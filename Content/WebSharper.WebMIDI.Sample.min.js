import { Start as fT } from "./WebSharper.Core.JavaScript/Runtime.js"
import { Lazy as fU, MarkResizable as fV, SetOptional as fW, GetOptional as fX, CreateFuncWithArgs as fY, DeleteEmptyFields as fZ, Create as f0, OnLoad as f1 } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(f2){ return"Dispose"in f2;}
function b(){ h.Create_1("");const f2=new q("New_1");const f3=(f2.h.push(t(f2.k, "connectmidi", () => f2.i, () => { const f_=null;bd(ba(() => bb(bl(e()), () => bc(null))), null);})),f2);const f4=(f3.h.push(new u0036("status", d().View)),f3);const f5=(f4.h.push(new u0036("midimessages", c().View)),f4);const f6=u(f5.k, f5.h, []);const f7=new l(f6[1], G(f6[0]));let f8=(f5.i=f7,f7);const f9=f8.Doc;br("");bJ.RunById("main", f9);}
function c(){ return u0037.midiMessages;}
function d(){ return u0037.statusMessage;}
function e(){ const f2=null;return new Promise((f3) => { f3(new Promise((f4) => { f4(globalThis.navigator.requestMIDIAccess().then((f5) => { d().Set("MIDI Access Granted!");f5.inputs.forEach((f6) => f6.addEventListener("midimessage", f));return Promise.resolve(null);}));})["catch"]((f4) => { const f5=bm(f4);d().Set("MIDI Access Denied!");const f6=f5.message;(((f7) => f7("MIDI Connection Error: "+String(f6)))((f7) => { console.log(f7);}));return Promise.resolve(null);}));});}
function f(f2){ const f3=f2.data;(((f4) => f4("MIDI Message: "+String(f3)))((f4) => { console.log(f4);}));c().Set(String(c())+"\n"+String(f3));}
class g { Equals(f2){ return this===f2;} GetHashCode(){ return -1;} }
let h=fU((f2) => class f3 extends g { static { h=f2(this);} static Create_1(f4){ return new H(false, {s:bN(f4, [])}, f4);} static { } });
function i(f2){ throw new Error(f2);}
function j(f2){ return[f2.K, f2.V];}
function k(f2, f3){ const f4=1+f3-f2;return f4<=0?[]:b9(f4, (f5) => f5+f2);}
class l extends g { doc;allVars;anchorRoot;get Doc(){ return this.doc;} SetAnchorRoot(f2){ this.anchorRoot=f2;} constructor(f2, f3){ super();this.doc=f3;this.allVars=f2.$==0?f2.$0:i("Should not happen");this.anchorRoot=null;} }
function m(f2, f3){ o(f2, f3);return f2[f3];}
function n(f2, f3, f4){ o(f2, f3);f2[f3]=f4;}
function o(f2, f3){ if(f3<0||f3>=f2.length)i("Index was outside the bounds of the array.");}
function p(f2){ return f2.dims===2?f2.length*f2.length:f2.length;}
class q extends g { i;k;h;s;static New_1(){ return new this("New_1");} constructor(f2){ if(f2=="New_1"){ let f3;super();this.i=null;this.k=(f3=u0038(),String(f3));this.h=fV([]);fW(this, "s", null);} } }
class r extends g { ForTextView(){ console.warn("Content hole filled with attribute data", this.Name);return null;} AddAttribute(f2, f3){ console.warn("Var hole filled with non-Var data", this.Name);} get AsChoiceView(){ console.warn("Attribute value hole filled with non-text data", this.Name);return er("");} }
class s extends g { }
function t(f2, f3, f4, f5){ return new u0039(f3, (f6) =>(f7) => { const f8=f4();f8.SetAnchorRoot(f6);return f5({Vars:f8, Anchors:f8, Target:f6, Event:f7});});}
function u(f2, f3, f4){ const f5=new bQ("New_5");const f6=new bW("New_3");const f7=cL(f3);try { while(f7.MoveNext()){ const f8=f7.Current;const f9=f8.Name;f6.SAdd(f9);f5.set_Item(f9, f8);} } finally { if(typeof f7=="object"&&a(f7))f7.Dispose();} return[bX(f3, ce((f_) => { const f$=f_[0];const ga=f_[1];const gb=f_[2];if(f6.Contains(f$))return null;else { const gc=ga===0?ct.GetOrAddHoleFor(f2, f$, () => { const gd=gb==null?null:bq(gb.$0);let ge=h.Create_1(gd==null?"":gd.$0);return new cu(f$, ge);}):ga===1?ct.GetOrAddHoleFor(f2, f$, () => { const gd=gb==null?null:bq(gb.$0);let ge=h.Create_1(gd==null?0:gd.$0);return new cv(f$, ge);}):ga===2?ct.GetOrAddHoleFor(f2, f$, () => { const gd=gb==null?null:bq(gb.$0);let ge=h.Create_1(gd==null?false:gd.$0);return new cw(f$, ge);}):ga===3?ct.GetOrAddHoleFor(f2, f$, () => { const gd=gb==null?null:bq(gb.$0);let ge=h.Create_1(gd==null?-8640000000000000:gd.$0);return new cx(f$, ge);}):ga===4?ct.GetOrAddHoleFor(f2, f$, () => new cy(f$, h.Create_1([]))):ga===5?ct.GetOrAddHoleFor(f2, f$, () => new cz(f$, h.Create_1(bq(globalThis.document.querySelector("[ws-dom="+f$+"]"))))):ga===6?ct.GetOrAddHoleFor(f2, f$, () => { const gd=gb==null?null:bq(gb.$0);let ge=h.Create_1(gd==null?[]:gd.$0);return new cA(f$, ge);}):i("Invalid value type");f5.set_Item(f$, gc);return bq(gc);} }, f4)), {$:0, $0:f5}];}
function v(f2, f3){ if(f2===f3)return true;else { const f4=typeof f2;if(f4=="object"){ if(f2===null||f2===void 0||f3===null||f3===void 0||!v(typeof f3, "object"))return false;else if("Equals"in f2)return f2.Equals(f3);else if("Equals"in f3)return false;else if(f2 instanceof Array&&f3 instanceof Array)return w(f2, f3);else if(f2 instanceof Date&&f3 instanceof Date)return x(f2, f3);else { const f5=[true];let f6;for(var f8 in f2)if(((f9) => { f5[0]=!f2.hasOwnProperty(f9)||f3.hasOwnProperty(f9)&&v(f2[f9], f3[f9]);return!f5[0];})(f8))break;if(f5[0]){ let f7;for(var f9 in f3)if(((f_) => { f5[0]=!f3.hasOwnProperty(f_)||f2.hasOwnProperty(f_);return!f5[0];})(f9))break;} return f5[0];} } else return f4=="function"&&("$Func"in f2?f2.$Func===f3.$Func&&f2.$Target===f3.$Target:"$Invokes"in f2&&"$Invokes"in f3&&w(f2.$Invokes, f3.$Invokes));} }
function w(f2, f3){ let f4;let f5;if(p(f2)===p(f3)){ f4=true;f5=0;while(f4&&f5<p(f2)){!v(m(f2, f5), m(f3, f5))?f4=false:void 0;f5=f5+1;} return f4;} else return false;}
function x(f2, f3){ return f2.getTime()===f3.getTime();}
function y(f2){ const f3=typeof f2;return f3=="function"?0:f3=="boolean"?f2?1:0:f3=="number"?f2:f3=="string"?z(f2):f3=="object"?f2==null?0:f2 instanceof Array?A(f2):B(f2):0;}
function z(f2){ let f3;if(f2===null)return 0;else { f3=5381;for(let f4=0, f5=f2.length-1;f4<=f5;f4++)f3=C(f3, f2[f4].charCodeAt());return f3;} }
function A(f2){ let f3=-34948909;for(let f4=0, f5=p(f2)-1;f4<=f5;f4++)f3=C(f3, y(m(f2, f4)));return f3;}
function B(f2){ if("GetHashCode"in f2)return f2.GetHashCode();else { const f3=[0];let f4;for(var f5 in f2)if(((f6) => { f3[0]=C(C(f3[0], z(f6)), y(f2[f6]));return false;})(f5))break;return f3[0];} }
function C(f2, f3){ return(f2<<5)+f2+f3;}
function D(f2, f3){ if(f2===f3)return 0;else { const f4=typeof f2;switch(f4=="function"?1:f4=="boolean"?2:f4=="number"?2:f4=="string"?2:f4=="object"?3:0){ case 0:return typeof f3=="undefined"?0:-1;case 1:return i("Cannot compare function values.");case 2:return f2<f3?-1:1;case 3:if(f2===null)return -1;else if(f3===null)return 1;else if("CompareTo"in f2)return f2.CompareTo(f3);else if("CompareTo0"in f2)return f2.CompareTo0(f3);else if(f2 instanceof Array&&f3 instanceof Array)return E(f2, f3);else if(f2 instanceof Date&&f3 instanceof Date)return F(f2, f3);else { const f5=[0];let f6;for(var f8 in f2)if(((f9) =>!f2.hasOwnProperty(f9)?false:!f3.hasOwnProperty(f9)?(f5[0]=1,true):(f5[0]=D(f2[f9], f3[f9]),f5[0]!==0))(f8))break;if(f5[0]===0){ let f7;for(var f9 in f3)if(((f_) =>!f3.hasOwnProperty(f_)?false:!f2.hasOwnProperty(f_)&&(f5[0]=-1,true))(f9))break;} return f5[0];} break;} } }
function E(f2, f3){ let f4;let f5;if(p(f2)<p(f3))return -1;else if(p(f2)>p(f3))return 1;else { f4=0;f5=0;while(f4===0&&f5<p(f2)){ f4=D(m(f2, f5), m(f3, f5));f5=f5+1;} return f4;} }
function F(f2, f3){ return D(f2.getTime(), f3.getTime());}
function G(f2){ br("index");return f2?bs("index", bq("main"), f2):void 0;}
class H extends s { isConst;current;snap;view;id;get View(){ return this.view;} Set(f2){ if(this.isConst)(((f3) => f3("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((f3) => { console.log(f3);}));else { cB(this.snap);this.current=f2;this.snap={s:bN(f2, [])};} } SetFinal(f2){ if(this.isConst)(((f3) => f3("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((f3) => { console.log(f3);}));else { cB(this.snap);this.isConst=true;this.current=f2;this.snap={s:bO(f2)};} } Get(){ return this.current;} UpdateMaybe(f2){ const f3=f2(this.Get());if(f3!=null&&f3.$==1)this.Set(f3.$0);} constructor(f2, f3, f4){ super();this.isConst=f2;this.current=f4;this.snap=f3;this.view=() => this.snap;this.id=bK();} }
function I(f2, f3, f4){ const f5=f2.s;if(f5==null)f4();else f5!=null&&f5.$==2?(f5.$1.push(f4),f3(f5.$0)):f5!=null&&f5.$==3?(f5.$0.push(f3),f5.$1.push(f4)):f3(f5.$0);}
function J(f2, f3){ const f4=f3.s;if(f4!=null&&f4.$==0)return{s:bO(f2(f4.$0))};else { const f5={s:bP([], [])};Q(f3, (f6) => { R(f5, f3, f2(f6));}, f5);return f5;} }
function K(f2, f3, f4, f5){ const f6=f3.s;const f7=f4.s;const f8=f5.s;if(f6!=null&&f6.$==0)return f7!=null&&f7.$==0?f8!=null&&f8.$==0?{s:bO(f2(f6.$0, f7.$0, f8.$0))}:S(f2, f6.$0, f7.$0, f5):f8!=null&&f8.$==0?T(f2, f6.$0, f8.$0, f4):U(f2, f6.$0, f4, f5);else if(f7!=null&&f7.$==0)return f8!=null&&f8.$==0?V(f2, f7.$0, f8.$0, f3):W(f2, f7.$0, f3, f5);else if(f8!=null&&f8.$==0)return X(f2, f8.$0, f3, f4);else { const f9={s:bP([], [])};const f_=() => { const f$=f9.s;if(!(f$!=null&&f$.$==0||f$!=null&&f$.$==2)){ const ga=Y(f3);const gb=Y(f4);const gc=Y(f5);if(ga!=null&&ga.$==1)if(gb!=null&&gb.$==1)if(gc!=null&&gc.$==1)if(ga.$0[1]&&gb.$0[1]&&gc.$0[1])Z(f9, f2(ga.$0[0], gb.$0[0], gc.$0[0]));else u0030(f9, f2(ga.$0[0], gb.$0[0], gc.$0[0]));} };Q(f3, f_, f9);Q(f4, f_, f9);Q(f5, f_, f9);return f9;} }
function L(f2){ const f3=cn(f2);if(f3.length==0)return{s:bO([])};else { const f4={s:bP([], [])};const f5=[p(f3)-1];const f6=() => { if(f5[0]===0){ const f7=cl((f8) => { const f9=f8.s;return f9!=null&&f9.$==0?f9.$0:f9!=null&&f9.$==2?f9.$0:i("value not found by View.Sequence");}, f3);if(cq((f8) => { const f9=f8.s;return f9!=null&&f9.$==0;}, f3))Z(f4, f7);else u0030(f4, f7);} else f5[0]=f5[0]-1;};cj((f7) => { Q(f7, f6, f4);}, f3);return f4;} }
function M(f2, f3, f4){ const f5=f3.s;const f6=f4.s;if(f5!=null&&f5.$==0)return f6!=null&&f6.$==0?{s:bO(f2(f5.$0, f6.$0))}:u0031(f2, f5.$0, f4);else if(f6!=null&&f6.$==0)return u0032(f2, f6.$0, f3);else { const f7={s:bP([], [])};const f8=() => { const f9=f7.s;if(!(f9!=null&&f9.$==0||f9!=null&&f9.$==2)){ const f_=Y(f3);const f$=Y(f4);if(f_!=null&&f_.$==1)if(f$!=null&&f$.$==1)if(f_.$0[1]&&f$.$0[1])Z(f7, f2(f_.$0[0], f$.$0[0]));else u0030(f7, f2(f_.$0[0], f$.$0[0]));} };Q(f3, f8, f7);Q(f4, f8, f7);return f7;} }
function N(f2, f3){ const f4=f2.s;const f5=f3.s;if(f4!=null&&f4.$==0)return f5!=null&&f5.$==0?{s:bO(null)}:f3;else if(f5!=null&&f5.$==0)return f2;else { const f6={s:bP([], [])};const f7=() => { const f8=f6.s;if(!(f8!=null&&f8.$==0||f8!=null&&f8.$==2)){ const f9=Y(f2);const f_=Y(f3);if(f9!=null&&f9.$==1)if(f_!=null&&f_.$==1)if(f9.$0[1]&&f_.$0[1])Z(f6, null);else u0030(f6, null);} };Q(f2, f7, f6);Q(f3, f7, f6);return f6;} }
function O(f2){ const f3=f2.s;if(f3==null)return f2;else if(f3!=null&&f3.$==2){ const f4={s:bN(f3.$0, [])};u0033(f2, f4);return f4;} else if(f3!=null&&f3.$==3){ const f5={s:bP([], [])};Q(f2, (f6) => { R(f5, f2, f6);}, f5);return f5;} else return f2;}
function P(f2, f3){ const f4=f2.s;if(f4==null)f3();else f4!=null&&f4.$==2?f4.$1.push(f3):f4!=null&&f4.$==3?f4.$1.push(f3):void 0;}
function Q(f2, f3, f4){ const f5=f2.s;if(f5==null)cB(f4);else f5!=null&&f5.$==2?(u0034(f5.$1, f4),f3(f5.$0)):f5!=null&&f5.$==3?(f5.$0.push(f3),u0034(f5.$1, f4)):f3(f5.$0);}
function R(f2, f3, f4){ const f5=f3.s;if(f5!=null&&f5.$==0)Z(f2, f4);else u0030(f2, f4);}
function S(f2, f3, f4, f5){ return J((f6) => f2(f3, f4, f6), f5);}
function T(f2, f3, f4, f5){ return J((f6) => f2(f3, f6, f4), f5);}
function U(f2, f3, f4, f5){ return M((f6, f7) => f2(f3, f6, f7), f4, f5);}
function V(f2, f3, f4, f5){ return J((f6) => f2(f6, f3, f4), f5);}
function W(f2, f3, f4, f5){ return M((f6, f7) => f2(f6, f3, f7), f4, f5);}
function X(f2, f3, f4, f5){ return M((f6, f7) => f2(f6, f7, f3), f4, f5);}
function Y(f2){ const f3=f2.s;return f3!=null&&f3.$==0?bq([f3.$0, true]):f3!=null&&f3.$==2?bq([f3.$0, false]):null;}
function Z(f2, f3){ const f4=f2.s;if(f4!=null&&f4.$==3){ f2.s=bO(f3);const f5=f4.$0;for(let f6=0, f7=p(f5)-1;f6<=f7;f6++)(m(f5, f6))(f3);} else void 0;}
function u0030(f2, f3){ const f4=f2.s;if(f4!=null&&f4.$==3){ f2.s=bN(f3, f4.$1);const f5=f4.$0;for(let f6=0, f7=p(f5)-1;f6<=f7;f6++)(m(f5, f6))(f3);} else void 0;}
function u0031(f2, f3, f4){ return J((f5) => f2(f3, f5), f4);}
function u0032(f2, f3, f4){ return J((f5) => f2(f5, f3), f4);}
function u0033(f2, f3){ const f4=f2.s;if(f4==null)cB(f3);else f4!=null&&f4.$==2?u0034(f4.$1, f3):f4!=null&&f4.$==3?u0034(f4.$1, f3):void 0;}
function u0034(f2, f3){ f2.push(f3);if(f2.length%20===0){ const f4=f2.slice(0);fR(f2);for(let f6=0, f7=p(f4)-1;f6<=f7;f6++){ const f5=m(f4, f6);if(typeof f5=="object")(((f8) => { if(f8.s)f2.push(f8);})(f5));else(((f8) => { f2.push(f8);})(f5));} } else void 0;}
class u0035 extends r { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} get AsChoiceView(){ return er(this.fillWith);} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
class u0036 extends r { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bq(this.fillWith);} get AsChoiceView(){ return es(this.fillWith);} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
let u0037=fU((f2) => class f3 { static { u0037=f2(this);} static midiMessages;static statusMessage;static { this.statusMessage=h.Create_1("Waiting for MIDI connection...");this.midiMessages=h.Create_1("");} });
function u0038(){ return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]", "g"), (f2) => { const f3=Math.random()*16|0;const f4=f2=="x"?f3:f3&3|8;return f4.toString(16);});}
class u0039 extends r { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
function $(f2){ const f3={};const f4=cL(f2);try { while(f4.MoveNext()){ const f5=f4.Current;f3[f5[0]]=f5[1];} } finally { if(typeof f4=="object"&&a(f4))f4.Dispose();} return f3;}
function ba(f2){ return(f3) => { try {(f2())(f3);} catch(f4){ f3.k(bS(f4));} };}
function bb(f2, f3){ return be((f4) => { f2(bR((f5) => { if(f5.$==0){ const f6=f5.$0;bi().Fork(() => { try {(f3(f6))(f4);} catch(f7){ f4.k(bS(f7));} });} else bi().Fork(() => { f4.k(f5);});}, f4.ct));});}
function bc(f2){ return(f3) => { f3.k(bT(f2));};}
function bd(f2, f3){ const f4=(bf())[0];const f5=f3==null?f4:f3.$0;bi().Fork(() => { if(!f5.c)f2(bR((f6) => { if(f6.$==1)bg(f6.$0);}, f5));});}
function be(f2){ return(f3) => { if(f3.ct.c)bh(f3);else f2(f3);};}
function bf(){ return cJ.defCTS;}
function bg(f2){ console.log("WebSharper: Uncaught asynchronous exception", f2);}
function bh(f2){ f2.k(bU(new db("New", f2.ct)));}
function bi(){ return cJ.scheduler;}
function bj(f2){ return(f3) => { const f4=[false];const f5=(f6) => { if(f4[0])i("A continuation provided by Async.FromContinuations was invoked multiple times");else { f4[0]=true;bi().Fork(f6);} };f2((f6) => { f5(() => { f3.k(bT(f6));});}, (f6) => { f5(() => { f3.k(bS(f6));});}, (f6) => { f5(() => { f3.k(bU(f6));});});};}
function bk(){ return cJ.Zero;}
function bl(f2){ return bj((f3, f4) => { f2.then(f3, (f5) => f4(bm(f5)));});}
function bm(f2){ return f2 instanceof Error?f2:new cI(f2);}
function bn(f2){ let f3=[];let f4;for(var f5 in f2)f3.push(f2[f5]);return f3;}
class bo extends g { tree;GetEnumerator(){ return cL(b0((f2) =>({K:f2.Key, V:f2.Value}), eY(false, this.tree)));} Equals(f2){ return this.Count===f2.Count&&b1(v, this, f2);} get Count(){ const f2=this.tree;return f2==null?0:f2.Count;} GetHashCode(){ return y(cn(this));} CompareTo0(f2){ return cd(D, this, f2);} }
class bp extends g { }
function bq(f2){ return{$:1, $0:f2};}
function br(f2){!bt()?(bu(true),bv(globalThis.document.body, "")):void 0;bw().set_Item(f2, bx(""));}
function bs(f2, f3, f4){ let f5;const f6=(f5=null,[bx(f2).TryGetValue(f3==null?"":f3.$0, {get:() => f5, set:(f7) => { f5=f7;}}), f5]);return f6[0]?by(f6[1].cloneNode(true), f4):(console.warn("Local template doesn't exist", f3),bJ.Empty);}
function bt(){ return cQ.LocalTemplatesLoaded;}
function bu(f2){ cQ.LocalTemplatesLoaded=f2;}
function bv(f2, f3){ const f4=bx(f3);const f5=new bQ("New_5");const f6=f2.querySelectorAll("[ws-template]");for(let gg=0, gh=f6.length-1;gg<=gh;gg++){ const f7=f6[gg];const f8=f7.getAttribute("ws-template").toLowerCase();f7.removeAttribute("ws-template");f5.set_Item(f8, bz(f7));} const f9=f2.querySelectorAll("[ws-children-template]");for(let gi=0, gj=f9.length-1;gi<=gj;gi++){ const f_=f9[gi];const f$=f_.getAttribute("ws-children-template").toLowerCase();f_.removeAttribute("ws-children-template");f5.set_Item(f$, bA(f_));} const ga=f2.querySelectorAll("template[id]");for(let gk=0, gl=ga.length-1;gk<=gl;gk++){ const gb=ga[gk];f5.set_Item(gb.getAttribute("id").toLowerCase(), bB(gb));} const gc=f2.querySelectorAll("template[name]");for(let gm=0, gn=gc.length-1;gm<=gn;gm++){ const gd=gc[gm];f5.set_Item(gd.getAttribute("name").toLowerCase(), bB(gd));} const ge=new bW("New_3");function gf(go){ if(!f4.ContainsKey(go)){ let gp;const gq=(gp=null,[f5.TryGetValue(go, {get:() => gp, set:(gr) => { gp=gr;}}), gp]);if(gq[0]){ ge.SAdd(go);f5.RemoveKey(go);bC(f3, bq(go), gq[1], bq(gf));} else console.warn(ge.Contains(go)?"Encountered loop when instantiating "+go:"Local template does not exist: "+go);} } while(f5.count>0)gf(bY(f5.Keys));}
function bw(){ return cQ.LoadedTemplates;}
function bx(f2){ let f3;const f4=(f3=null,[bw().TryGetValue(f2, {get:() => f3, set:(f6) => { f3=f6;}}), f3]);if(f4[0])return f4[1];else { const f5=new bQ("New_5");bw().set_Item(f2, f5);return f5;} }
function by(f2, f3){ let f4;const f5=bD(f2, bX(f3, bE().Values));const f6=f5[1];const f7=f5[0];const f8=f7.Els;return!v(f8, null)&&f8.length===1&&(m(f8, 0)instanceof Node&&(v(m(f8, 0).nodeType, Node.ELEMENT_NODE)&&(f4=m(f8, 0),true)))?de.TreeNode(f7, f6):bJ.Mk(cE(f7), f6);}
function bz(f2){ f2.removeAttribute("ws-template");const f3=f2.getAttribute("ws-replace");if(f3==null){ } else { f2.removeAttribute("ws-replace");const f4=f2.parentNode;if(v(f4, null)){ } else { const f5=globalThis.document.createElement(f2.tagName);f5.setAttribute("ws-replace", f3);f4.replaceChild(f5, f2);} } const f6=globalThis.document.createElement("div");f6.appendChild(f2);return f6;}
function bA(f2){ const f3=globalThis.document.createElement("div");while(f2.hasChildNodes())f3.appendChild(f2.firstChild);return f3;}
function bB(f2){ const f3=globalThis.document.createElement("div");const f4=f2.content;for(let f5=0, f6=f4.childNodes.length-1;f5<=f6;f5++)f3.appendChild(f4.childNodes[f5].cloneNode(true));return f3;}
function bC(f2, f3, f4, f5){ const f6=new bW("New_3");function f7(gc, gd){ while(true)switch(gc){ case 0:if(gd!==null){ const ge=gd.nextSibling;if(v(gd.nodeType, Node.TEXT_NODE))dn(gd);else if(v(gd.nodeType, Node.ELEMENT_NODE))f9(gd);gd=ge;} else return null;break;case 1:const gf=dv(gd.nodeName, bq(3), null).toLowerCase();const gg=gf.indexOf(".");const gh=gg===-1?[f2, gf]:[dv(gf, null, bq(gg-1)), dv(gf, bq(gg+1), null)];const gi=gh[1];const gj=gh[0];if(gj!=""&&!bw().ContainsKey(gj))return do_1(gi);else { if(gj==""&&f5!=null)f5.$0(gi);const gk=bw().Item(gj);if(!gk.ContainsKey(gi))return do_1(gi);else { const gl=gk.Item(gi);const gm=gl.cloneNode(true);const gn=new bW("New_3");const go=new bQ("New_5");const gp=gd.attributes;for(let gz=0, gA=gp.length-1;gz<=gA;gz++){ const gq=gp.item(gz).name.toLowerCase();const gr=gp.item(gz).nodeValue;let gs=gr==""?gq:gr.toLowerCase();go.set_Item(gq, gs);if(!gn.SAdd(gq))console.warn("Hole mapped twice", gq);} for(let gB=0, gC=gd.childNodes.length-1;gB<=gC;gB++){ const gt=gd.childNodes[gB];if(v(gt.nodeType, Node.ELEMENT_NODE))if(!gn.SAdd(gt.nodeName.toLowerCase()))console.warn("Hole filled twice", gi);} const gu=gd.childNodes.length===1&&v(gd.firstChild.nodeType, Node.TEXT_NODE);if(gu){ const gv=dp(gm, gd.firstChild.textContent, gi);const gw=((gD) =>(gE) => gD.SAdd(gE))(gn);let gx=((gD) =>(gE) => { if(gE!=null)gD(gE.$0);})((gD) => { gw(gD);});gx(gv);} dq(gm, gn);if(!gu){ for(let gD=0, gE=gd.childNodes.length-1;gD<=gE;gD++){ const gy=gd.childNodes[gD];if(v(gy.nodeType, Node.ELEMENT_NODE))if(gy.hasAttributes())dr(gm, gy);else f8(gm, gy);} } ds(gm, go);dt(gm, gd.parentNode, gd);gd.parentNode.removeChild(gd);return;} } break;} } function f8(gc, gd){ const ge=gd.nodeName.toLowerCase();const gf=(gj, gk) => { if(ge=="title"&&gd.hasChildNodes()){ const gl=dw(gd.textContent);gd.removeChild(gd.firstChild);while(gl.hasChildNodes())gd.appendChild(gl.firstChild);} f9(gd);return dt(gd, gj, gk);};bF(gc, "[ws-attr-holes]", (gj) => { const gk=ev(gj.getAttribute("ws-attr-holes"), [" "], 1);for(let go=0, gp=gk.length-1;go<=gp;go++){ const gl=m(gk, go);let gm=new RegExp("\\${"+ge+"}", "ig");let gn=gj.getAttribute(gl).replace(gm, gd.textContent);gj.setAttribute(gl, gn);} });const gg=gc.querySelector("[ws-hole="+ge+"]");if(v(gg, null)){ const gh=gc.querySelector("[ws-replace="+ge+"]");if(v(gh, null)){ const gi=gc.querySelector("slot[name="+ge+"]");return gc.tagName.toLowerCase()=="template"?(gf(gi.parentNode, gi),void gi.parentNode.removeChild(gi)):null;} else { gf(gh.parentNode, gh);gh.parentNode.removeChild(gh);return;} } else { while(gg.hasChildNodes())gg.removeChild(gg.lastChild);gg.removeAttribute("ws-hole");return gf(gg, null);} } function f9(gc){ if(!gc.hasAttribute("ws-preserve"))if(ew(gc.nodeName.toLowerCase(), "ws-"))f$(gc);else { du(gc);f_(gc.firstChild);} } function f_(gc){ return f7(0, gc);} function f$(gc){ return f7(1, gc);} function ga(gc){ while(true){ const gd=gc.querySelector("[ws-template]");if(v(gd, null)){ const ge=gc.querySelector("[ws-children-template]");if(v(ge, null)){ const gf=gc.querySelectorAll("template[id]");for(let gl=1, gm=gf.length-1;gl<=gm;gl++){ const gg=gf[gl];if(f6.Contains(gg)){ } else { bC(f2, bq(gg.getAttribute("id")), gg, null);f6.SAdd(gg);} } const gh=gc.querySelectorAll("template[name]");for(let gn=1, go=gh.length-1;gn<=go;gn++){ const gi=gh[gn];if(f6.Contains(gi)){ } else { bC(f2, bq(gi.getAttribute("name")), gi, null);f6.SAdd(gi);} } return null;} else { const gj=ge.getAttribute("ws-children-template");ge.removeAttribute("ws-children-template");bC(f2, bq(gj), ge, null);gc=gc;} } else { const gk=gd.getAttribute("ws-template");(bG(f2, bq(gk), gd))(null);gc=gc;} } } const gb=(f3==null?"":f3.$0).toLowerCase();bx(f2).set_Item(gb, f4);if(f4.hasChildNodes()){ ga(f4);f_(f4.firstChild);} }
function bD(f2, f3){ let f4;const f5=[];const f6=[];const f7=[];const f8=[];const f9=new bQ("New_5");const f_=cL(f3);try { while(f_.MoveNext()){ const f$=f_.Current;f9.set_Item(f$.Name, f$);} } finally { if(typeof f_=="object"&&a(f_))f_.Dispose();} let ga=dx(f2);const gb=(gk, gl) => { const gm=dV(gk, gl);f6.push(dW(gm));f7.push([gk, gm]);const gn=fX(gm.OnAfterRender);if(gn==null)return null;else { const go=gn.$0;f8.push(() => { go(gk);});return;} };const gc=(gk) => { let gl;const gm=(gl=null,[f9.TryGetValue(gk, {get:() => gl, set:(gp) => { gl=gp;}}), gl]);if(gm[0]){ const gn=gm[1];if(gn instanceof ea)return bq(gn.Value);else if(gn instanceof u0035)return bq(bJ.TextNode(gn.Value));else { const go=gn.ForTextView();return go==null?null:bq(bJ.TextView(go.$0));} } else return null;};bF(f2, "[ws-hole]", (gk) => { const gl=gk.getAttribute("ws-hole");gk.removeAttribute("ws-hole");while(gk.hasChildNodes())gk.removeChild(gk.lastChild);const gm=gc(gl);if(gm!=null&&gm.$==1){ const gn=gm.$0;cR(gk, gn.docNode);f5.push(da.New(dX(gk), gn.docNode, null, gk, bK(), null));f6.push(gn.updates);} });bF(f2, "[ws-replace]", (gk) => { const gl=gc(gk.getAttribute("ws-replace"));if(gl!=null&&gl.$==1){ const gm=gl.$0;const gn=gk.parentNode;const go=globalThis.document.createTextNode("");gn.replaceChild(go, gk);const gp=cW(go, gm.docNode);ga=dx(f2);const gq=cf((gr) => gk===gr, ga);if(gq==null){ } else n(ga, gq.$0, gm.docNode);f5.push(da.New(dX(gn), gm.docNode, bq([gp, go]), gn, bK(), null));f6.push(gm.updates);} });let gd=false;bF(f2, "slot", (gk) => { const gl=gk.getAttribute("name");const gm=gl==""||gl==null?"default":gl.toLowerCase();if(gd&&gm=="default"||!v(f2.parentElement, null)){ } else { while(gk.hasChildNodes())gk.removeChild(gk.lastChild);if(gm=="default")gd=true;const gn=gc(gm);if(gn!=null&&gn.$==1){ const go=gn.$0;cR(gk, go.docNode);f5.push(da.New(dX(gk), go.docNode, null, gk, bK(), null));f6.push(go.updates);} } });bF(f2, "[ws-attr]", (gk) => { let gl;const gm=gk.getAttribute("ws-attr");gk.removeAttribute("ws-attr");const gn=(gl=null,[f9.TryGetValue(gm, {get:() => gl, set:(gp) => { gl=gp;}}), gl]);if(gn[0]){ const go=gn[1];if(go instanceof eb)gb(gk, go.Value);else console.warn("Attribute hole filled with non-attribute data", gm);} });bF(f2, "[ws-on]", (gk) => { gb(gk, eo.Concat(ce((gl) => { let gm;const gn=ev(gl, [":"], 1);const go=(gm=null,[f9.TryGetValue(m(gn, 1), {get:() => gm, set:(gq) => { gm=gq;}}), gm]);if(go[0]){ const gp=go[1];return gp instanceof ec?bq(ed(m(gn, 0), gp.Value)):gp instanceof u0039?bq(eo.Handler(m(gn, 0), gp.Value)):(console.warn("Event hole on"+m(gn, 0)+" filled with non-event data", m(gn, 1)),null);} else return null;}, ev(gk.getAttribute("ws-on"), [" "], 1))));gk.removeAttribute("ws-on");});bF(f2, "[ws-onafterrender]", (gk) => { let gl;const gm=gk.getAttribute("ws-onafterrender");const gn=(gl=null,[f9.TryGetValue(gm, {get:() => gl, set:(gp) => { gl=gp;}}), gl]);if(gn[0]){ const go=gn[1];if(go instanceof ep){ gk.removeAttribute("ws-onafterrender");gb(gk, ee(go.Value));} else if(go instanceof eq){ gk.removeAttribute("ws-onafterrender");gb(gk, ee(go.Value));} else console.warn("onafterrender hole filled with non-onafterrender data", gm);} });bF(f2, "[ws-var]", (gk) => { let gl;const gm=gk.getAttribute("ws-var");gk.removeAttribute("ws-var");const gn=(gl=null,[f9.TryGetValue(gm, {get:() => gl, set:(go) => { gl=go;}}), gl]);if(gn[0])gn[1].AddAttribute((go) =>(gp) => gb(go, gp), gk);});const ge=() => { bH("[ws-dom]", (gk) => { let gl;let gm;let gn;const go=(gl=null,[f9.TryGetValue(gk.getAttribute("ws-dom").toLowerCase(), {get:() => gl, set:(gs) => { gl=gs;}}), gl]);if(go[0]){ const gp=go[1];if(gp instanceof cz){ const gq=gp.Value;gk.removeAttribute("ws-dom");gm=gk;const gr=new MutationObserver((gs, gt) => { cj((gu) => { gu.removedNodes.forEach(fY((gv) => gv[0]===gm&&gu.addedNodes.length!==1?(gq.SetFinal(null),gt.disconnect()):null), null);}, gs);});if(gk.parentElement!==null)gr.observe(gk.parentElement, (gn={},gn.childList=true,gn));gq.Set(bq(gk));dg((gs) => { if(gs!=null&&gs.$==1){ const gt=gs.$0;if(gm===gt){ } else { gm.replaceWith(gt);gm=gt;} } else { gm.remove();gr.disconnect();} }, gq.View);} } });};bF(f2, "[ws-attr-holes]", (gk) => { const gl=new RegExp(bI(), "g");const gm=ev(gk.getAttribute("ws-attr-holes"), [" "], 1);gk.removeAttribute("ws-attr-holes");for(let gn=0, go=gm.length-1;gn<=go;gn++)((() => { let gp;const gq=m(gm, gn);const gr=gk.getAttribute(gq);let gs=null;let gt=0;const gu=[];while(gs=gl.exec(gr),gs!==null){ const gv=dv(gr, bq(gt), bq(gl.lastIndex-m(gs, 0).length-1));gt=gl.lastIndex;gu.push([gv, m(gs, 1)]);} const gw=dv(gr, bq(gt), null);gl.lastIndex=0;const gx=ck((gC, gD) =>(((gE) => { const gF=gE[0];const gG=gE[1];return(gH) => { let gI;const gJ=gH[0];const gK=gH[1];const gL=(gI=null,[f9.TryGetValue(gG, {get:() => gI, set:(gN) => { gI=gN;}}), gI]);const gM=gL[0]?gL[1].AsChoiceView:er("");return gM.$==1?[gF, et.Cons(gJ==""?gM.$0:dh((gN) => gN+gJ, gM.$0), gK)]:[gF+gM.$0+gJ, gK];};})(gC))(gD), gu, [gw, et.Empty]);if(gx[1].$==1){ if(gx[1].$1.$==1){ if(gx[1].$1.$1.$==1){ if(gx[1].$1.$1.$1.$==0){ const gy=gx[0];gp=ef(gq, di((gC, gD, gE) => gy+gC+gD+gE, gx[1].$0, gx[1].$1.$0, gx[1].$1.$1.$0));} else { const gz=gx[0];gp=ef(gq, dh((gC) => gz+eu("", gC), dj(gx[1])));} } else { const gA=gx[0];gp=ef(gq, dk((gC, gD) => gA+gC+gD, gx[1].$0, gx[1].$1.$0));} } else if(gx[0]=="")gp=ef(gq, gx[1].$0);else { const gB=gx[0];gp=ef(gq, dh((gC) => gB+gC, gx[1].$0));} } else gp=eo.Create(gq, gx[0]);return gb(gk, gp);})());});let gf=ga;const gg=f8.length==0?bq(() => { ge();}):bq((gk) => { ge();cj((gl) => { gl(gk);}, f8);});const gh=!v(ga, null)&&ga.length===1&&(m(ga, 0)instanceof Node&&(m(ga, 0)instanceof Element&&(f4=m(ga, 0),true)))?bq(f4):null;let gi={Els:gf, Dirty:true, Holes:f5, Attrs:f7, Render:gg?gg.$0:void 0, El:gh?gh.$0:void 0};let gj=fZ(gi, ["Render", "El"]);return[gj, eC(df(), dl, f6)];}
function bE(){ return cQ.GlobalHoles;}
function bF(f2, f3, f4){ dD(f2, f3, (f5) => { if(f5.closest("[ws-preserve]")==null)f4(f5);});}
function bG(f2, f3, f4){ const f5=bz(f4);return(f6) => { bC(f2, f3, f5, f6);};}
function bH(f2, f3){ dE(f2, (f4) => { if(f4.closest("[ws-preserve]")==null)f3(f4);});}
function bI(){ return cQ.TextHoleRE;}
class bJ extends g { docNode;updates;static RunById(f2, f3){ const f4=globalThis.document.getElementById(f2);if(v(f4, null))i("invalid id: "+f2);else bJ.Run(f4, f3);} static Run(f2, f3){ cR(f2, f3.docNode);bJ.RunInPlace(false, f2, f3);} static get Empty(){ return bJ.Mk(null, df());} static RunInPlace(f2, f3, f4){ const f5=cT(f3, f4.docNode);dg(dL()||dS()?dT(cU(f2, f5, f4.docNode)):() => { cV(f2, f5, f4.docNode);}, f4.updates);} static Mk(f2, f3){ return new bJ(f2, f3);} static TextNode(f2){ return bJ.Mk(cF(globalThis.document.createTextNode(f2)), df());} static TextView(f2){ const f3=c4();return bJ.Mk(cG(f3), dh((f4) => { c5(f3, f4);}, f2));} constructor(f2, f3){ super();this.docNode=f2;this.updates=f3;} }
function bK(){ bL(bM()+1);return bM();}
function bL(f2){ c$.counter=f2;}
function bM(){ return c$.counter;}
function bN(f2, f3){ return{$:2, $0:f2, $1:f3};}
function bO(f2){ return{$:0, $0:f2};}
function bP(f2, f3){ return{$:3, $0:f2, $1:f3};}
class bQ extends g { equals;hash;count;data;set_Item(f2, f3){ this.set(f2, f3);} set(f2, f3){ const f4=this.hash(f2);const f5=this.data[f4];if(f5==null){ this.count=this.count+1;this.data[f4]=new Array({K:f2, V:f3});} else { const f6=cf((f7) => this.equals.apply(null, [(j(f7))[0], f2]), f5);if(f6==null){ this.count=this.count+1;f5.push({K:f2, V:f3});} else f5[f6.$0]={K:f2, V:f3};} } TryGetValue(f2, f3){ const f4=this.data[this.hash(f2)];if(f4==null)return false;else { const f5=cg((f6) => { const f7=j(f6);return this.equals.apply(null, [f7[0], f2])?bq(f7[1]):null;}, f4);return f5!=null&&f5.$==1&&(f3.set(f5.$0),true);} } ContainsKey(f2){ const f3=this.data[this.hash(f2)];return f3==null?false:ch((f4) => this.equals.apply(null, [(j(f4))[0], f2]), f3);} RemoveKey(f2){ return this.remove(f2);} get Keys(){ return new dK(this);} GetEnumerator(){ return cO(ci(bn(this.data)));} get Values(){ return new eG(this);} remove(f2){ const f3=this.hash(f2);const f4=this.data[f3];if(f4==null)return false;else { const f5=cm((f6) =>!this.equals.apply(null, [(j(f6))[0], f2]), f4);return p(f5)<f4.length&&(this.count=this.count-1,this.data[f3]=f5,true);} } Item(f2){ return this.get(f2);} get(f2){ const f3=this.data[this.hash(f2)];return f3==null?cK():co((f4) => { const f5=j(f4);return this.equals.apply(null, [f5[0], f2])?bq(f5[1]):null;}, f3);} static New_5(){ return new this("New_5");} static New_6(f2, f3, f4){ return new this("New_6", f2, f3, f4);} constructor(f2, f3, f4, f5){ if(f2=="New_5"){ f2="New_6";f3=[];f4=v;f5=y;} if(f2=="New_6"){ const f6=f3;const f7=f4;const f8=f5;super();this.equals=f7;this.hash=f8;this.count=0;this.data=[];const f9=cL(f6);try { while(f9.MoveNext()){ const f_=f9.Current;this.set(f_.K, f_.V);} } finally { if(typeof f9=="object"&&a(f9))f9.Dispose();} } } }
function bR(f2, f3){ return{k:f2, ct:f3};}
function bS(f2){ return{$:1, $0:f2};}
function bT(f2){ return{$:0, $0:f2};}
function bU(f2){ return{$:2, $0:f2};}
function bV(f2, f3){ return{c:f2, r:f3};}
class bW extends g { equals;hash;data;count;SAdd(f2){ return this.add(f2);} Contains(f2){ const f3=this.data[this.hash(f2)];return f3==null?false:this.arrContains(f2, f3);} add(f2){ const f3=this.hash(f2);const f4=this.data[f3];return f4==null?(this.data[f3]=[f2],this.count=this.count+1,true):this.arrContains(f2, f4)?false:(f4.push(f2),this.count=this.count+1,true);} arrContains(f2, f3){ let f4=true;let f5=0;const f6=f3.length;while(f4&&f5<f6)if(this.equals.apply(null, [f3[f5], f2]))f4=false;else f5=f5+1;return!f4;} GetEnumerator(){ return cL(eZ(this.data));} ExceptWith(f2){ const f3=cL(f2);try { while(f3.MoveNext())this.Remove(f3.Current);} finally { if(typeof f3=="object"&&a(f3))f3.Dispose();} } get Count(){ return this.count;} IntersectWith(f2){ const f3=new bW("New_4", f2, this.equals, this.hash);const f4=eZ(this.data);for(let f6=0, f7=f4.length-1;f6<=f7;f6++){ const f5=f4[f6];if(!f3.Contains(f5))this.Remove(f5);} } Remove(f2){ const f3=this.data[this.hash(f2)];return f3==null?false:this.arrRemove(f2, f3)&&(this.count=this.count-1,true);} CopyTo(f2, f3){ const f4=eZ(this.data);for(let f5=0, f6=f4.length-1;f5<=f6;f5++)n(f2, f5+f3, f4[f5]);} arrRemove(f2, f3){ let f4=true;let f5=0;const f6=f3.length;while(f4&&f5<f6)if(this.equals.apply(null, [f3[f5], f2])){ f3.splice(f5, 1);f4=false;} else f5=f5+1;return!f4;} static New_3(){ return new this("New_3");} static New_4(f2, f3, f4){ return new this("New_4", f2, f3, f4);} static New_2(f2){ return new this("New_2", f2);} constructor(f2, f3, f4, f5){ if(f2=="New_3"){ f2="New_4";f3=[];f4=v;f5=y;} let f6;if(f2=="New_2"){ f6=f3;f2="New_4";f3=f6;f4=v;f5=y;} if(f2=="New_4"){ const f7=f3;const f8=f4;const f9=f5;super();this.equals=f8;this.hash=f9;this.data=[];this.count=0;const f_=cL(f7);try { while(f_.MoveNext())this.add(f_.Current);} finally { if(typeof f_=="object"&&a(f_))f_.Dispose();} } } }
function bX(f2, f3){ return{GetEnumerator:() => { const f4=cL(f2);const f5=[true];return new cP(f4, null, (f6) => { if(f6.s.MoveNext()){ f6.c=f6.s.Current;return true;} else { const f7=f6.s;if(!v(f7, null))f7.Dispose();f6.s=null;return f5[0]&&(f5[0]=false,f6.s=cL(f3),f6.s.MoveNext()?(f6.c=f6.s.Current,true):(f6.s.Dispose(),f6.s=null,false));} }, (f6) => { const f7=f6.s;if(!v(f7, null))f7.Dispose();});}};}
function bY(f2){ const f3=cL(f2);try { return f3.MoveNext()?f3.Current:dH();} finally { if(typeof f3=="object"&&a(f3))f3.Dispose();} }
function bZ(f2, f3, f4){ let f5=f3;const f6=cL(f4);try { while(f6.MoveNext())f5=f2(f5, f6.Current);return f5;} finally { if(typeof f6=="object"&&a(f6))f6.Dispose();} }
function b0(f2, f3){ return{GetEnumerator:() => { const f4=cL(f3);return new cP(null, null, (f5) => f4.MoveNext()&&(f5.c=f2(f4.Current),true), () => { f4.Dispose();});}};}
function b1(f2, f3, f4){ return!b3((f5, f6) =>!f2(f5, f6), f3, f4);}
function b2(f2, f3){ const f4=cL(f3);try { while(f4.MoveNext())f2(f4.Current);} finally { if(typeof f4=="object"&&a(f4))f4.Dispose();} }
function b3(f2, f3, f4){ const f5=cL(f3);try { const f6=cL(f4);try { let f7=false;while(!f7&&f5.MoveNext()&&f6.MoveNext())f7=f2(f5.Current, f6.Current);return f7;} finally { if(typeof f6=="object"&&a(f6))f6.Dispose();} } finally { if(typeof f5=="object"&&a(f5))f5.Dispose();} }
function b4(f2, f3){ return{GetEnumerator:() => new cP(f3, null, (f4) => { const f5=f2(f4.s);return f5==null?false:(f4.c=f5.$0[0],f4.s=f5.$0[1],true);}, void 0)};}
function b5(f2){ return{GetEnumerator:() => cL(f2())};}
function b6(f2, f3){ return b8(b0(f2, f3));}
function b7(f2){ const f3=cL(f2);try { if(!f3.MoveNext())b_();let f4=f3.Current;while(f3.MoveNext()){ const f5=f3.Current;if(D(f5, f4)===1)f4=f5;} return f4;} finally { if(typeof f3=="object"&&a(f3))f3.Dispose();} }
function b8(f2){ return{GetEnumerator:() => { const f3=cL(f2);function f4(f5){ while(true){ const f6=f5.s;if(v(f6, null)){ if(f3.MoveNext()){ f5.s=cL(f3.Current);f5=f5;} else { f3.Dispose();return false;} } else if(f6.MoveNext()){ f5.c=f6.Current;return true;} else { f5.Dispose();f5.s=null;f5=f5;} } } return new cP(null, null, f4, (f5) => { const f6=f5.s;if(!v(f6, null))f6.Dispose();if(!v(f3, null))f3.Dispose();});}};}
function b9(f2, f3){ return b$(f2, ca(f3));}
function b_(){ return i("The input sequence was empty.");}
function b$(f2, f3){ f2<0?dJ():void 0;return{GetEnumerator:() => { const f4=[cL(f3)];return new cP(0, null, (f5) => { f5.s=f5.s+1;if(f5.s>f2)return false;else { const f6=f4[0];return v(f6, null)?dH():f6.MoveNext()?(f5.c=f6.Current,f5.s===f2?(f6.Dispose(),f4[0]=null):void 0,true):(f6.Dispose(),f4[0]=null,dH());} }, () => { const f5=f4[0];if(!v(f5, null))f5.Dispose();});}};}
function ca(f2){ return{GetEnumerator:() => new cP(0, null, (f3) => { f3.c=f2(f3.s);f3.s=f3.s+1;return true;}, void 0)};}
function cb(f2, f3){ return!cc((f4) =>!f2(f4), f3);}
function cc(f2, f3){ const f4=cL(f3);try { let f5=false;while(!f5&&f4.MoveNext())f5=f2(f4.Current);return f5;} finally { if(typeof f4=="object"&&a(f4))f4.Dispose();} }
function cd(f2, f3, f4){ const f5=cL(f3);try { const f6=cL(f4);try { let f7=0;let f8=true;while(f8&&f7===0)if(f5.MoveNext())f7=f6.MoveNext()?f2(f5.Current, f6.Current):1;else if(f6.MoveNext())f7=-1;else f8=false;return f7;} finally { if(typeof f6=="object"&&a(f6))f6.Dispose();} } finally { if(typeof f5=="object"&&a(f5))f5.Dispose();} }
function ce(f2, f3){ const f4=[];for(let f6=0, f7=f3.length-1;f6<=f7;f6++){ const f5=f2(f3[f6]);if(f5==null){ } else f4.push(f5.$0);} return f4;}
function cf(f2, f3){ let f4=null;let f5=0;while(f5<f3.length&&f4==null){ f2(f3[f5])?f4=bq(f5):void 0;f5=f5+1;} return f4;}
function cg(f2, f3){ let f4=null;let f5=0;while(f5<f3.length&&f4==null){ const f6=f2(f3[f5]);if(f6!=null&&f6.$==1)f4=f6;f5=f5+1;} return f4;}
function ch(f2, f3){ let f4=false;let f5=0;while(!f4&&f5<p(f3))if(f2(f3[f5]))f4=true;else f5=f5+1;return f4;}
function ci(f2){ return Array.prototype.concat.apply([], cn(f2));}
function cj(f2, f3){ for(let f4=0, f5=f3.length-1;f4<=f5;f4++)f2(f3[f4]);}
function ck(f2, f3, f4){ let f5=f4;const f6=f3.length;for(let f7=1, f8=f6;f7<=f8;f7++)f5=f2(f3[f6-f7], f5);return f5;}
function cl(f2, f3){ const f4=new Array(f3.length);for(let f5=0, f6=f3.length-1;f5<=f6;f5++)f4[f5]=f2(f3[f5]);return f4;}
function cm(f2, f3){ const f4=[];for(let f5=0, f6=f3.length-1;f5<=f6;f5++)if(f2(f3[f5]))f4.push(f3[f5]);return f4;}
function cn(f2){ if(f2 instanceof Array)return f2.slice();else if(f2 instanceof et)return cp(f2);else { const f3=[];const f4=cL(f2);try { while(f4.MoveNext())f3.push(f4.Current);return f3;} finally { if(typeof f4=="object"&&a(f4))f4.Dispose();} } }
function co(f2, f3){ const f4=cg(f2, f3);return f4==null?i("KeyNotFoundException"):f4.$0;}
function cp(f2){ const f3=[];let f4=f2;while(!(f4.$==0)){ f3.push(fc(f4));f4=fd(f4);} return f3;}
function cq(f2, f3){ let f4=true;let f5=0;while(f4&&f5<p(f3))if(f2(f3[f5]))f5=f5+1;else f4=false;return f4;}
function cr(f2, f3){ const f4=new Array(f2);for(let f5=0, f6=f2-1;f5<=f6;f5++)f4[f5]=f3;return f4;}
function cs(f2, f3){ if(f2<0)i("Negative size given.");else null;const f4=new Array(f2);for(let f5=0, f6=f2-1;f5<=f6;f5++)f4[f5]=f3(f5);return f4;}
let ct=fU((f2) => class f3 extends g { static { ct=f2(this);} static init;id;vars;static initialized;static instances;static GetOrAddHoleFor(f4, f5, f6){ let f7;const f8=ct.GetHolesFor(f4);const f9=(f7=null,[f8.TryGetValue(f5, {get:() => f7, set:(f$) => { f7=f$;}}), f7]);if(f9[0])return f9[1];else { const f_=f6();f8.set_Item(f5, f_);return f_;} } static GetHolesFor(f4){ let f5;const f6=(f5=null,[ct.initialized.TryGetValue(f4, {get:() => f5, set:(f8) => { f5=f8;}}), f5]);if(f6[0])return f6[1];else { const f7=new bQ("New_5");ct.initialized.set_Item(f4, f7);return f7;} } static { ct.initialized=new bQ("New_5");ct.instances=new bQ("New_5");} });
class cu extends r { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bq(this.fillWith.View);} AddAttribute(f2, f3){(f2(f3))(eg(this.fillWith));} get AsChoiceView(){ return es(dh(String, this.fillWith.View));} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
class cv extends r { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bq(dh(String, this.fillWith.View));} AddAttribute(f2, f3){(f2(f3))(eh(this.fillWith));} get AsChoiceView(){ return es(dh(String, this.fillWith.View));} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
class cw extends r { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bq(dh(String, this.fillWith.View));} AddAttribute(f2, f3){(f2(f3))(ei(this.fillWith));} get AsChoiceView(){ return es(dh(String, this.fillWith.View));} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
class cx extends r { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bq(dh((f2) =>(new Date(f2)).toLocaleString(), this.fillWith.View));} AddAttribute(f2, f3){(f2(f3))(ej(this.fillWith));} get AsChoiceView(){ return es(dh((f2) =>(new Date(f2)).toLocaleString(), this.fillWith.View));} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
class cy extends r { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bq(dh(String, this.fillWith.View));} AddAttribute(f2, f3){(f2(f3))(ek(this.fillWith));} get AsChoiceView(){ return es(dh(String, this.fillWith.View));} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
class cz extends r { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
class cA extends r { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bq(dh((f2) => eu(",", f2), this.fillWith.View));} AddAttribute(f2, f3){(f2(f3))(el(this.fillWith));} get AsChoiceView(){ return es(dh(String, this.fillWith.View));} constructor(f2, f3){ super();this.name=f2;this.fillWith=f3;} }
function cB(f2){ let f3;const f4=f2.s;if(f4==null||(f4!=null&&f4.$==2?(f3=f4.$1,false):f4!=null&&f4.$==3?(f3=f4.$1,false):true))void 0;else { f2.s=null;for(let f6=0, f7=p(f3)-1;f6<=f7;f6++){ const f5=m(f3, f6);if(typeof f5=="object")(((f8) => { cB(f8);})(f5));else f5();} } }
class cC { }
function cD(f2, f3){ return fM(f2, -2147483648, 2147483647, f3);}
function cE(f2){ return{$:6, $0:f2};}
function cF(f2){ return{$:5, $0:f2};}
function cG(f2){ return{$:4, $0:f2};}
class cH extends g { idle;robin;Fork(f2){ this.robin.push(f2);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const f2=Date.now();let f3=true;while(f3)if(this.robin.length===0){ this.idle=true;f3=false;} else {(this.robin.shift())();Date.now()-f2>40?(setTimeout(() => { this.tick();}, 0),f3=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class cI extends Error { reason;constructor(f2){ super("Promise rejected");this.reason=f2;} }
let cJ=fU((f2) => class f3 { static { cJ=f2(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=bV(false, []);this.scheduler=new cH();this.defCTS=[new dd()];this.Zero=bc();this.GetCT=(f4) => { f4.k(bT(f4.ct));};} });
function cK(){ throw new e7("New");}
function cL(f2){ return f2 instanceof Array?cM(f2):v(typeof f2, "string")?cN(f2):f2.GetEnumerator();}
function cM(f2){ return new cP(0, null, (f3) => { const f4=f3.s;return f4<p(f2)&&(f3.c=m(f2, f4),f3.s=f4+1,true);}, void 0);}
function cN(f2){ return new cP(0, null, (f3) => { const f4=f3.s;return f4<f2.length&&(f3.c=f2[f4],f3.s=f4+1,true);}, void 0);}
function cO(f2){ return f2 instanceof Array?cM(f2):v(typeof f2, "string")?cN(f2):"GetEnumerator0"in f2?f2.GetEnumerator0():f2.GetEnumerator();}
class cP extends g { s;c;n;d;e;MoveNext(){ const f2=this.n(this);this.e=f2?1:2;return f2;} get Current(){ return this.e===1?this.c:this.e===0?i("Enumeration has not started. Call MoveNext."):i("Enumeration already finished.");} Dispose(){ if(this.d)this.d(this);} constructor(f2, f3, f4, f5){ super();this.s=f2;this.c=f3;this.n=f4;this.d=f5;this.e=0;} }
let cQ=fU((f2) => class f3 { static { cQ=f2(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new bQ("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new bQ("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
function cR(f2, f3){ cS(f2, f3, null);}
function cS(f2, f3, f4){ while(true){ if(f3!=null&&f3.$==1)return cX(f2, f3.$0.El, f4);else if(f3!=null&&f3.$==2){ const f5=f3.$0;f5.Dirty=false;f3=f5.Current;} else if(f3==null)return f4;else if(f3!=null&&f3.$==4)return cX(f2, f3.$0.Text, f4);else if(f3!=null&&f3.$==5)return cX(f2, f3.$0, f4);else if(f3!=null&&f3.$==6)return ck((f8, f9) =>((((f_) =>(f$) =>(ga) => f$==null||f$.constructor===Object?cS(f_, f$, ga):cX(f_, f$, ga))(f2))(f8))(f9), f3.$0.Els, f4);else { const f6=f3.$1;const f7=f3.$0;f3=f7;f4=cS(f2, f6, f4);} } }
function cT(f2, f3){ return eH(eI(), cY(f2, d1(), f3));}
function cU(f2, f3, f4){ if(dL()){ const f5=null;return ba(() => { const f6=eJ(f4);const f7=c2(f3, f6);const f8=c1(f3, f6);return bb(dM(dN(f7, c0(f3, f6))), () => bb(cZ(f2, f3), () => bb(dM(f8), () => { f3.PreviousNodes=f6;return bc(null);})));});} else return cZ(f2, f3);}
function cV(f2, f3, f4){ const f5=eJ(f4);c3(f2, f3.Top);f3.PreviousNodes=f5;}
function cW(f2, f3){ const f4=f2.parentNode;const f5=globalThis.document.createTextNode("");f4.insertBefore(f5, f2);c6(f2, f3);return f5;}
function cX(f2, f3, f4){ dF(f2, f4, f3);return f3;}
function cY(f2, f3, f4){ cR(f2, f4);const f5=dV(f2, f3);return da.New(f5, f4, null, f2, bK(), fX(f5.OnAfterRender));}
function cZ(f2, f3){ if(dS()){ const f4=(f5) => { requestAnimationFrame(() => { c3(f2, f3.Top);f5();});};return bj((f5, f6, f7) => f4.apply(null, [f5, f6, f7]));} else { c3(f2, f3.Top);return bc(null);} }
function c0(f2, f3){ return dQ(cl((f4) => d3(f4.Attr), eN(eM(f3, eL((f4) => d2(f4.Attr), f2.PreviousNodes)))));}
function c1(f2, f3){ return dQ(cl((f4) => d5(f4.Attr), eN(eM(f2.PreviousNodes, eL((f4) => d4(f4.Attr), f3)))));}
function c2(f2, f3){ const f4=(f6) => d6(f6.Attr);const f5=(f6) => eL(f4, f6);return dQ(cl((f6) => d7(f6.Attr), eN(eO(f5(f2.PreviousNodes), f5(f3)))));}
function c3(f2, f3){!f2?c7(f3):void 0;c8(f3.Children);c9(f3);}
function c4(){ return{Text:globalThis.document.createTextNode(""), Dirty:false, Value:""};}
function c5(f2, f3){ f2.Value=f3;f2.Dirty=true;}
function c6(f2, f3){ cS(f2.parentNode, f3, f2);}
function c7(f2){ function f3(f4){ function f5(f6){ while(true){ if(f6!=null&&f6.$==0){ const f7=f6.$1;const f8=f6.$0;if(f5(f8))return true;else f6=f7;} else if(f6!=null&&f6.$==2){ const f9=f6.$0;if(f9.Dirty)return true;else f6=f9.Current;} else if(f6!=null&&f6.$==6){ const f_=f6.$0;return f_.Dirty||ch(f3, f_.Holes);} else return false;} } return f5(f4.Children);} d_(f2.El, f2.Attr);if(f3(f2))c_(f2);}
function c8(f2){ while(true){ if(f2!=null&&f2.$==1)return c3(false, f2.$0);else if(f2!=null&&f2.$==2){ const f3=f2.$0;f2=f3.Current;} else if(f2==null)return null;else if(f2!=null&&f2.$==5)return null;else if(f2!=null&&f2.$==4){ const f4=f2.$0;return f4.Dirty?(f4.Text.nodeValue=f4.Value,f4.Dirty=false):null;} else if(f2!=null&&f2.$==6){ const f5=f2.$0;cj((f8) => { c3(false, f8);}, f5.Holes);cj((f8) => { d_(f8[0], f8[1]);}, f5.Attrs);return c9(f5);} else { const f6=f2.$1;const f7=f2.$0;c8(f7);f2=f6;} } }
function c9(f2){ const f3=fX(f2.Render);if(f3!=null&&f3.$==1){ f3.$0(f2.El);fW(f2, "Render", null);} }
function c_(f2){ const f3=f2.El;function f4(f8, f9){ while(true){ if(f8!=null&&f8.$==1)return f8.$0.El;else if(f8!=null&&f8.$==2){ const f_=f8.$0;if(f_.Dirty){ f_.Dirty=false;return cS(f3, f_.Current, f9);} else f8=f_.Current;} else if(f8==null)return f9;else if(f8!=null&&f8.$==4)return f8.$0.Text;else if(f8!=null&&f8.$==5)return f8.$0;else if(f8!=null&&f8.$==6){ const f$=f8.$0;if(f$.Dirty)f$.Dirty=false;return ck((gc, gd) => gc==null||gc.constructor===Object?f4(gc, gd):gc, f$.Els, f9);} else { const ga=f8.$1;const gb=f8.$0;f8=gb;f9=f4(ga, f9);} } } const f5=f2.El;fH((f8) => { dG(f5, f8);}, fG(fI(f2), fF(f2.El, fX(f2.Delimiters))));let f6=f2.Children;const f7=fX(f2.Delimiters);f4(f6, f7!=null&&f7.$==1?f7.$0[1]:null);}
let c$=fU((f2) => class f3 { static { c$=f2(this);} static counter;static { this.counter=0;} });
class da { Attr;Children;Delimiters;El;ElKey;Render;Equals(f2){ return this.ElKey===f2.ElKey;} GetHashCode(){ return this.ElKey;} static New(f2, f3, f4, f5, f6, f7){ const f8={Attr:f2, Children:f3, El:f5, ElKey:f6};let f9=(fW(f8, "Delimiters", f4),fW(f8, "Render", f7),f8);return f0(da, f9);} }
class db extends Error { ct;static New(f2){ return new this("New", f2);} static New_1(f2, f3, f4){ return new this("New_1", f2, f3, f4);} constructor(f2, f3, f4, f5){ let f6;if(f2=="New"){ f6=f3;f2="New_1";f3="The operation was canceled.";f4=null;f5=f6;} if(f2=="New_1"){ const f7=f3;const f8=f4;const f9=f5;super(f7);this.inner=f8;this.ct=f9;} } }
class dc { Key;Value;Equals(f2){ return v(this.Key, f2.Key);} GetHashCode(){ return y(this.Key);} CompareTo0(f2){ return D(this.Key, f2.Key);} }
class dd extends g { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
class de extends bJ { docNode_1;updates_1;elt;rvUpdates;static TreeNode(f2, f3){ const f4=eF.Create(f3);const f5=cl((f8) => dW(f8[1]), f2.Attrs);let f6=eC(df(), dl, f5);let f7=dl(f6, f4.v);return new de(cE(f2), f7, m(f2.Els, 0), f4);} constructor(f2, f3, f4, f5){ super(f2, f3);this.docNode_1=f2;this.updates_1=f3;this.elt=f4;this.rvUpdates=f5;} }
function df(f2){ const f3={s:bO(f2)};return() => f3;}
function dg(f2, f3){ function f4(){ I(f3(), f2, () => { bi().Fork(f4);});} bi().Fork(f4);}
function dh(f2, f3){ return dm(() => J(f2, f3()));}
function di(f2, f3, f4, f5){ return dm(() => K(f2, f3(), f4(), f5()));}
function dj(f2){ return dm(() => L(b0((f3) => f3(), f2)));}
function dk(f2, f3, f4){ return dm(() => M(f2, f3(), f4()));}
function dl(f2, f3){ return dm(() => N(f2(), f3()));}
function dm(f2){ const f3={c:null, o:f2};return() => { let f4=f3.c;if(f4===null){ f4=f3.o();f3.c=f4;const f5=f4.s;if(f5!=null&&f5.$==0)f3.o=null;else P(f4, () => { f3.c=null;});return f4;} else return f4;};}
function dn(f2){ let f3=null;let f4=0;const f5=f2.textContent;const f6=new RegExp(bI(), "g");while(f3=f6.exec(f5),f3!==null){ f2.parentNode.insertBefore(globalThis.document.createTextNode(dv(f5, bq(f4), bq(f6.lastIndex-m(f3, 0).length-1))), f2);f4=f6.lastIndex;const f7=globalThis.document.createElement("span");f7.setAttribute("ws-replace", m(f3, 1).toLowerCase());f2.parentNode.insertBefore(f7, f2);} f6.lastIndex=0;f2.textContent=dv(f5, bq(f4), null);}
function do_1(f2){ console.warn("Instantiating non-loaded template", f2);}
function dp(f2, f3, f4){ const f5=f2.querySelector("[ws-replace]");return v(f5, null)?(console.warn("Filling non-existent text hole", f4),null):(f5.parentNode.replaceChild(globalThis.document.createTextNode(f3), f5),bq(f5.getAttribute("ws-replace")));}
function dq(f2, f3){ const f4=(f5) => { bF(f2, "["+f5+"]", (f6) => { if(!f3.Contains(f6.getAttribute(f5)))f6.removeAttribute(f5);});};f4("ws-attr");f4("ws-onafterrender");f4("ws-var");bF(f2, "[ws-hole]", (f5) => { if(!f3.Contains(f5.getAttribute("ws-hole"))){ f5.removeAttribute("ws-hole");while(f5.hasChildNodes())f5.removeChild(f5.lastChild);} });bF(f2, "[ws-replace]", (f5) => { if(!f3.Contains(f5.getAttribute("ws-replace")))f5.parentNode.removeChild(f5);});bF(f2, "[ws-on]", (f5) => { f5.setAttribute("ws-on", eu(" ", cm((f6) => f3.Contains(m(ev(f6, [":"], 1), 1)), ev(f5.getAttribute("ws-on"), [" "], 1))));});bF(f2, "[ws-attr-holes]", (f5) => { const f6=ev(f5.getAttribute("ws-attr-holes"), [" "], 1);for(let f_=0, f$=f6.length-1;f_<=f$;f_++){ const f7=m(f6, f_);let f8=new RegExp(bI(), "g");let f9=f5.getAttribute(f7).replace(f8, (ga, gb) => f3.Contains(gb)?ga:"");f5.setAttribute(f7, f9);} });}
function dr(f2, f3){ du(f3);const f4=f3.nodeName.toLowerCase();const f5=f2.querySelector("[ws-attr="+f4+"]");if(v(f5, null))console.warn("Filling non-existent attr hole", f4);else { f5.removeAttribute("ws-attr");for(let f7=0, f8=f3.attributes.length-1;f7<=f8;f7++){ const f6=f3.attributes.item(f7);if(f6.name=="class"&&f5.hasAttribute("class"))f5.setAttribute("class", f5.getAttribute("class")+" "+f6.nodeValue);else f5.setAttribute(f6.name, f6.nodeValue);} } }
function ds(f2, f3){ const f4=(f5) => { bF(f2, "["+f5+"]", (f6) => { let f7;const f8=(f7=null,[f3.TryGetValue(f6.getAttribute(f5).toLowerCase(), {get:() => f7, set:(f9) => { f7=f9;}}), f7]);if(f8[0])f6.setAttribute(f5, f8[1]);});};f4("ws-hole");f4("ws-replace");f4("ws-attr");f4("ws-onafterrender");f4("ws-var");bF(f2, "[ws-on]", (f5) => { f5.setAttribute("ws-on", eu(" ", cl((f6) => { let f7;const f8=ev(f6, [":"], 1);const f9=(f7=null,[f3.TryGetValue(m(f8, 1), {get:() => f7, set:(f_) => { f7=f_;}}), f7]);return f9[0]?m(f8, 0)+":"+f9[1]:f6;}, ev(f5.getAttribute("ws-on"), [" "], 1))));});bF(f2, "[ws-attr-holes]", (f5) => { const f6=ev(f5.getAttribute("ws-attr-holes"), [" "], 1);for(let f7=0, f8=f6.length-1;f7<=f8;f7++)((() => { const f9=m(f6, f7);return f5.setAttribute(f9, bZ((f_, f$) => { const ga=j(f$);return f_.replace(new RegExp("\\${"+ga[0]+"}", "ig"), "${"+ga[1]+"}");}, f5.getAttribute(f9), f3));})());});}
function dt(f2, f3, f4){ while(true){ if(f2.hasChildNodes())f4=f3.insertBefore(f2.lastChild, f4);else return null;} }
function du(f2){ const f3=f2.attributes;const f4=[];const f5=[];const f6=[];for(let f$=0, ga=f3.length-1;f$<=ga;f$++){ const f7=f3.item(f$);if(ew(f7.nodeName, "ws-on")&&f7.nodeName!="ws-onafterrender"&&f7.nodeName!="ws-on"){ f4.push(f7.nodeName);f5.push(dv(f7.nodeName, bq("ws-on".length), null)+":"+f7.nodeValue.toLowerCase());} else if(!ew(f7.nodeName, "ws-")&&(new RegExp(bI())).test(f7.nodeValue)){ let f8=new RegExp(bI(), "g");let f9=f7.nodeValue.replace(f8, (gb, gc) =>"${"+gc.toLowerCase()+"}");f7.nodeValue=f9;f6.push(f7.nodeName);} else void 0;} if(!(f5.length==0))f2.setAttribute("ws-on", eu(" ", f5));if(!(f6.length==0))f2.setAttribute("ws-attr-holes", eu(" ", f6));const f_=(gb) => { const gc=f2.getAttribute(gb);if(gc==null){ } else f2.setAttribute(gb, gc.toLowerCase());};f_("ws-hole");f_("ws-replace");f_("ws-attr");f_("ws-onafterrender");f_("ws-var");cj((gb) => { f2.removeAttribute(gb);}, f4);}
function dv(f2, f3, f4){ if(f3==null){ if(f4!=null&&f4.$==1){ const f5=f4.$0;return f5<0?"":f2.slice(0, f5+1);} else return"";} else if(f4==null)return f2.slice(f3.$0);else { const f6=f4.$0;return f6<0?"":f2.slice(f3.$0, f6+1);} }
function dw(f2){ const f3=globalThis.document.createElement("div");if(!dy().test(f2)){ f3.appendChild(globalThis.document.createTextNode(f2));return f3;} else { const f4=dC().exec(f2);const f5=v(f4, null)?"":m(f4, 1).toLowerCase();const f6=(dz())[f5];const f7=f6?f6:dA();f3.innerHTML=f7[1]+f2.replace(dB(), "<$1></$2>")+f7[2];function f8(f9, f_){ while(true){ if(f_===0)return f9;else { const f$=f_;f9=f9.lastChild;f_=f$-1;} } } return f8(f3, f7[0]);} }
function dx(f2){ const f3=[];for(let f4=0, f5=f2.childNodes.length-1;f4<=f5;f4++)f3.push(f2.childNodes[f4]);return f3;}
function dy(){ return e0.rhtml;}
function dz(){ return e0.wrapMap;}
function dA(){ return e0.defaultWrap;}
function dB(){ return e0.rxhtmlTag;}
function dC(){ return e0.rtagName;}
function dD(f2, f3, f4){ const f5=f2.querySelectorAll(f3);for(let f6=0, f7=f5.length-1;f6<=f7;f6++)f4(f5[f6]);}
function dE(f2, f3){ const f4=globalThis.document.querySelectorAll(f2);for(let f5=0, f6=f4.length-1;f5<=f6;f5++)f3(f4[f5]);}
function dF(f2, f3, f4){ let f5;if(f4.parentNode===f2){ const f6=f4.nextSibling;let f7=v(f6, null)?null:f6;f5=f3===f7;} else f5=false;if(!f5)f2.insertBefore(f4, f3);}
function dG(f2, f3){ if(f3.parentNode===f2)f2.removeChild(f3);}
function dH(){ return i("The input sequence has an insufficient number of elements.");}
function dI(f2, f3){ let f4=true;let f5=0;while(f4&&f5<p(f3))if(v(f3[f5], f2))f4=false;else f5=f5+1;return!f4;}
function dJ(){ return i("The input must be non-negative.");}
class dK extends g { d;GetEnumerator(){ return cL(b0((f2) => f2.K, this.d));} constructor(f2){ super();this.d=f2;} }
function dL(){ return eP();}
function dM(f2){ const f3=null;return ba(() => bb(dO(() => { }, eQ(f2)), () => { eR(f2);return bc(null);}));}
function dN(f2, f3){ return dP(e2(f2.$0, f3.$0));}
function dO(f2, f3){ const f4=f3.Duration;if(f4===0)return bk();else { const f5=(f6) => { function f7(f8){ return(f9) => { const f_=f9-f8;f3.Compute(f_);f2();return f_<=f4?void requestAnimationFrame((f$) => {(f7(f8))(f$);}):f6();};} requestAnimationFrame((f8) => {(f7(f8))(f8);});};return bj((f6, f7, f8) => f5.apply(null, [f6, f7, f8]));} }
function dP(f2){ return{$:0, $0:f2};}
function dQ(f2){ return dP(e4(b0(eT, f2)));}
function dR(){ return dP(e5());}
function dS(){ return eX.BatchUpdatesEnabled;}
function dT(f2){ const f3=[0];function f4(){ const f5=null;return ba(() => bb(f2, () => { const f6=f3[0];return v(f6, 1)?(f3[0]=0,bk()):v(f6, 2)?(f3[0]=1,f4()):bk();}));} return() => { const f5=f3[0];if(v(f5, 0)){ f3[0]=1;bd(f4(), null);} else v(f5, 1)?f3[0]=2:void 0;};}
function dU(f2, f3, f4, f5){ const f6={DynElem:f2, DynFlags:f3, DynNodes:f4};fW(f6, "OnAfterRender", f5);return f6;}
function dV(f2, f3){ const f4=[];const f5=[];function f6(f9){ while(true){ if(!(f9===null)){ if(f9!=null&&f9.$==1)return f4.push(f9.$0);else if(f9!=null&&f9.$==2){ const f_=f9.$1;const f$=f9.$0;f6(f$);f9=f_;} else return f9!=null&&f9.$==3?f9.$0(f2):f9!=null&&f9.$==4?f5.push(f9.$0):null;} else return null;} } f6(f3);const f7=f4.slice(0);let f8=dU(f2, dY(f3), f7, f5.length===0?null:bq((f9) => { b2((f_) => { f_(f9);}, f5);}));return f8;}
function dW(f2){ return eD((f3) => f3.NChanged, df(), dl, f2.DynNodes);}
function dX(f2){ return dU(f2, 0, [], null);}
function dY(f2){ return f2!==null&&f2.hasOwnProperty("flags")?f2.flags:0;}
function dZ(f2){ return eo.A3(f2);}
function d0(f2, f3){ return eo.A1(new e6(f2, f3));}
function d1(){ return e8.EmptyAttr;}
function d2(f2){ const f3=2;return(f2.DynFlags&f3)===f3;}
function d3(f2){ return d9(f2, (f3, f4) => f3.NGetExitAnim(f4));}
function d4(f2){ const f3=1;return(f2.DynFlags&f3)===f3;}
function d5(f2){ return d9(f2, (f3, f4) => f3.NGetEnterAnim(f4));}
function d6(f2){ const f3=4;return(f2.DynFlags&f3)===f3;}
function d7(f2){ return d9(f2, (f3, f4) => f3.NGetChangeAnim(f4));}
function d8(f2, f3){ if(f2===null)return f3;else if(f3===null)return f2;else { const f4=eo.A2(f2, f3);d$(f4, dY(f2)|dY(f3));return f4;} }
function d9(f2, f3){ return dQ(cl((f4) => f3(f4, f2.DynElem), f2.DynNodes));}
function d_(f2, f3){ cj((f4) => { f4.NSync(f2);}, f3.DynNodes);}
function d$(f2, f3){ f2.flags=f3;}
class ea extends r { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class eb extends r { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class ec extends r { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
function ed(f2, f3){ return dZ((f4) => { f4.addEventListener(f2, (f5) =>(f3(f4))(f5), false);});}
function ee(f2){ return eo.A4(f2);}
function ef(f2, f3){ return d0(f3, (f4) =>(f5) => f4.setAttribute(f2, f5));}
function eg(f2){ return em(fx(), f2);}
function eh(f2){ return em(fy(), f2);}
function ei(f2){ return em(fz(), f2);}
function ej(f2){ return em(fA(), f2);}
function ek(f2){ return em(fB(), f2);}
function el(f2){ return em(fC(), f2);}
function em(f2, f3){ const f4=f2(f3);return eo.Append(dZ(f4[0]), en(f4[1], f4[2]));}
function en(f2, f3){ return d0(f3, f2);}
class eo { static Handler(f2, f3){ return eo.HandlerImpl(f2, f3);} static Concat(f2){ const f3=eE(f2);return eC(d1(), eo.Append, f3);} static Create(f2, f3){ return dZ((f4) => { f4.setAttribute(f2, f3);});} static HandlerImpl(f2, f3){ return dZ((f4) => { f4.addEventListener(f2, (f5) =>(f3(f4))(f5), false);});} static Append(f2, f3){ return d8(f2, f3);} static A4(f2){ return f0(eo, {$:4, $0:f2});} static A3(f2){ return f0(eo, {$:3, $0:f2});} static A1(f2){ return f0(eo, {$:1, $0:f2});} static A2(f2, f3){ return f0(eo, {$:2, $0:f2, $1:f3});} }
class ep extends r { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class eq extends r { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
function er(f2){ return{$:0, $0:f2};}
function es(f2){ return{$:1, $0:f2};}
class et { static Cons(f2, f3){ return f0(et, {$:1, $0:f2, $1:f3});} static Empty=f0(et, {$:0});GetEnumerator(){ return new cP(this, null, (f2) => { const f3=f2.s;return f3.$==0?false:(f2.c=f3.$0,f2.s=f3.$1,true);}, void 0);} }
function eu(f2, f3){ return cn(f3).join(f2);}
function ev(f2, f3, f4){ return ex(f2, new RegExp("["+ey(f3.join(""))+"]"), f4);}
function ew(f2, f3){ return f2.substring(0, f3.length)==f3;}
function ex(f2, f3, f4){ return f4===1?cm((f5) => f5!=="", ez(f2, f3)):ez(f2, f3);}
function ey(f2){ return f2.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function ez(f2, f3){ return f2.split(f3);}
function eA(f2, f3){ return cb(f2, eB(f3));}
function eB(f2){ return f2==null?"":f2;}
function eC(f2, f3, f4){ const f5=p(f4);function f6(f7){ return(f8) => { let f9;switch(f8<=0?0:f8===1?f7>=0&&f7<f5?1:(f9=f8,2):(f9=f8,2)){ case 0:return f2;case 1:return m(f4, f7);case 2:const f_=f8/2>>0;return f3((f6(f7))(f_), (f6(f7+f_))(f8-f_));} };} return(f6(0))(f5);}
function eD(f2, f3, f4, f5){ const f6=p(f5);function f7(f8){ return(f9) => { let f_;switch(f9<=0?0:f9===1?f8>=0&&f8<f6?1:(f_=f9,2):(f_=f9,2)){ case 0:return f3;case 1:return f2(m(f5, f8));case 2:const f$=f9/2>>0;return f4((f7(f8))(f$), (f7(f8+f$))(f9-f$));} };} return(f7(0))(f6);}
function eE(f2){ if(f2 instanceof Array)return f2;else if(f2 instanceof et)return cp(f2);else if(f2===null)return[];else { const f3=[];const f4=cL(f2);try { while(f4.MoveNext())f3.push(f4.Current);return f3;} finally { if(typeof f4=="object"&&a(f4))f4.Dispose();} } }
class eF { c;s;v;static Create(f2){ let f3;f3=null;f3=eF.New(f2, null, () => { let f4;f4=f3.s;return f4===null?(f4=O(f3.c()),f3.s=f4,P(f4, () => { f3.s=null;}),f4):f4;});return f3;} static New(f2, f3, f4){ return f0(eF, {c:f2, s:f3, v:f4});} }
class eG extends g { d;GetEnumerator(){ return cL(b0((f2) => f2.V, this.d));} constructor(f2){ super();this.d=f2;} }
function eH(f2, f3){ return{PreviousNodes:f2, Top:f3};}
function eI(){ return eK(new bW("New_3"));}
function eJ(f2){ const f3=[];function f4(f7, f8){ while(true)switch(f7){ case 0:if(f8!=null&&f8.$==0){ const f9=f8.$1;const f_=f8.$0;f4(0, f_);f8=f9;} else if(f8!=null&&f8.$==1){ const f$=f8.$0;f8=f$;f7=1;} else if(f8!=null&&f8.$==2){ const ga=f8.$0;f8=ga.Current;} else if(f8!=null&&f8.$==6){ const gb=f8.$0.Holes;return(((gc) =>(gd) => { cj(gc, gd);})(f6))(gb);} else return null;break;case 1:f3.push(f8);f8=f8.Children;f7=0;break;} } function f5(f7){ return f4(0, f7);} function f6(f7){ return f4(1, f7);} f5(f2);return eK(new bW("New_2", f3));}
function eK(f2){ return{$:0, $0:f2};}
function eL(f2, f3){ return eK(e_(f2, f3.$0));}
function eM(f2, f3){ return eK(e$(f2.$0, f3.$0));}
function eN(f2){ return fa(f2.$0);}
function eO(f2, f3){ return eK(fb(f2.$0, f3.$0));}
function eP(){ return e1.UseAnimations;}
function eQ(f2){ return eS(ce((f3) => f3.$==1?bq(f3.$0):null, e3(f2.$0)));}
function eR(f2){ cj((f3) => { if(f3.$==0)f3.$0();}, e3(f2.$0));}
function eS(f2){ const f3=eE(f2);const f4=p(f3);if(f4===0)return eU();else if(f4===1)return m(f3, 0);else { const f5=b7(b0((f7) => f7.Duration, f3));const f6=cl((f7) => eW(f5, f7), f3);return eV(f5, (f7) => { cj((f8) => { f8.Compute(f7);}, f6);});} }
function eT(f2){ return f2.$0;}
function eU(f2){ return eV(0, () => f2);}
function eV(f2, f3){ return{Compute:f3, Duration:f2};}
function eW(f2, f3){ const f4=f3.Compute;const f5=f3.Duration;const f6=fN(() => f3.Compute(f3.Duration));return{Compute:(f7) => f7>=f5?f6.f():f4(f7), Duration:f2};}
let eX=fU((f2) => class f3 { static { eX=f2(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
function eY(f2, f3){ function f4(f5, f6){ let f7;while(true){ if(f5==null)return f6.$==1?bq([f6.$0[0], [f6.$0[1], f6.$1]]):null;else if(f2){ f7=f5;f5=f7.Right;f6=et.Cons([f7.Node, f7.Left], f6);} else { f7=f5;f5=f7.Left;f6=et.Cons([f7.Node, f7.Right], f6);} } } return b4((f5) => f4(f5[0], f5[1]), [f3, et.Empty]);}
function eZ(f2){ let f3=[];let f4;for(var f5 in f2)f3.push.apply(f3, f2[f5]);return f3;}
let e0=fU((f2) => class f3 { static { e0=f2(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const f4=[1, "<table>", "</table>"];let f5=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", f4], ["tbody", f4], ["tfoot", f4], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=f5;this.defaultWrap=[0, "", ""];} });
let e1=fU((f2) => class f3 { static { e1=f2(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=e9.Custom((f4) => { const f5=f4*f4;return 3*f5-2*(f5*f4);});this.UseAnimations=true;} });
function e2(f2, f3){ return f2.$==0?f3:f3.$==0?f2:{$:2, $0:f2, $1:f3};}
function e3(f2){ const f3=[];function f4(f5){ while(true){ if(f5.$==1)return f3.push(f5.$0);else if(f5.$==2){ const f6=f5.$1;const f7=f5.$0;f4(f7);f5=f6;} else return f5.$==3?cj((f8) => { f3.push(f8);}, f5.$0):null;} } f4(f2);return f3.slice(0);}
function e4(f2){ const f3=eE(f2);return eC(e5(), e2, f3);}
function e5(){ return fQ.Empty;}
class e6 extends g { push;value;dirty;updates;get NChanged(){ return this.updates;} NGetExitAnim(f2){ return dR();} NGetEnterAnim(f2){ return dR();} NGetChangeAnim(f2){ return dR();} NSync(f2){ if(this.dirty){(this.push(f2))(this.value);this.dirty=false;} } constructor(f2, f3){ super();this.push=f3;this.value=void 0;this.dirty=false;this.updates=dh((f4) => { this.value=f4;this.dirty=true;}, f2);} }
class e7 extends Error { static New(){ return new this("New");} static New_1(f2){ return new this("New_1", f2);} constructor(f2, f3){ if(f2=="New"){ f2="New_1";f3="The given key was not present in the dictionary.";} if(f2=="New_1"){ const f4=f3;super(f4);} } }
let e8=fU((f2) => class f3 { static { e8=f2(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(gi) =>[(gj) => { gj.addEventListener("change", () => gi.Get()!=gj.checked?gi.Set(gj.checked):null);}, (gj) =>(gk) => gk!=null&&gk.$==1?void(gj.checked=gk.$0):null, dh(bq, gi.View)];this.StringSet=(gi) =>(gj) => { gi.value=gj;};this.StringGet=(gi) => bq(gi.value);const f4=fh();const f5=fg();this.StringApply=(gi) => ff(f4, f5, gi);this.StringListSet=(gi) =>(gj) => { const gk=gi.options;for(let gl=0, gm=gk.length-1;gl<=gm;gl++)((() => { const gn=gk.item(gl);gn.selected=dI(gn.value, gj);})());};this.StringListGet=(gi) => { const gj=gi.selectedOptions;return bq(cn(b5(() => b6((gk) =>[gj.item(gk).value], k(0, gj.length-1)))));};const f6=fj();const f7=fi();this.StringListApply=(gi) => ff(f6, f7, gi);this.DateTimeSetUnchecked=(gi) =>(gj) => { gi.value=(new Date(gj)).toLocaleString();};this.DateTimeGetUnchecked=(gi) => { let gj;let gk;const gl=gi.value;if(fD(gl))return bq(-8640000000000000);else { gj=0;const gm=fL(gl);let gn=gm!=null&&gm.$==1&&(gj=gm.$0,true);gk=[gn, gj];return gk[0]?bq(gk[1]):null;} };const f8=fl();const f9=fk();this.DateTimeApplyUnchecked=(gi) => ff(f8, f9, gi);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(gi) => { const gj=gi.files;return bq(cn(b5(() => b0((gk) => gj.item(gk), k(0, gj.length-1)))));};const f_=fo();const f$=fn();this.FileApplyUnchecked=(gi) => fm(f_, f$, gi);this.IntSetUnchecked=(gi) =>(gj) => { gi.value=String(gj);};this.IntGetUnchecked=(gi) => { const gj=gi.value;if(fD(gj))return bq(0);else { const gk=+gj;return gk!==gk>>0?null:bq(gk);} };const ga=fq();const gb=fp();this.IntApplyUnchecked=(gi) => ff(ga, gb, gi);this.IntSetChecked=(gi) =>(gj) => { const gk=gj.Input;return gi.value!=gk?void(gi.value=gk):null;};this.IntGetChecked=(gi) => { let gj;let gk;const gl=gi.value;if(fD(gl))gj=(gi.checkValidity?gi.checkValidity():true)?fE.Blank(gl):fE.Invalid(gl);else { const gm=(gk=0,[cD(gl, {get:() => gk, set:(gn) => { gk=gn;}}), gk]);gj=gm[0]?fE.Valid(gm[1], gl):fE.Invalid(gl);} return bq(gj);};const gc=fs();const gd=fr();this.IntApplyChecked=(gi) => ff(gc, gd, gi);this.FloatSetUnchecked=(gi) =>(gj) => { gi.value=String(gj);};this.FloatGetUnchecked=(gi) => { const gj=gi.value;if(fD(gj))return bq(0);else { const gk=+gj;return isNaN(gk)?null:bq(gk);} };const ge=fu();const gf=ft();this.FloatApplyUnchecked=(gi) => ff(ge, gf, gi);this.FloatSetChecked=(gi) =>(gj) => { const gk=gj.Input;return gi.value!=gk?void(gi.value=gk):null;};this.FloatGetChecked=(gi) => { let gj;const gk=gi.value;if(fD(gk))gj=(gi.checkValidity?gi.checkValidity():true)?fE.Blank(gk):fE.Invalid(gk);else { const gl=+gk;gj=isNaN(gl)?fE.Invalid(gk):fE.Valid(gl, gk);} return bq(gj);};const gg=fw();const gh=fv();this.FloatApplyChecked=(gi) => ff(gg, gh, gi);} });
class e9 extends g { transformTime;static Custom(f2){ return new e9(f2);} constructor(f2){ super();this.transformTime=f2;} }
function e_(f2, f3){ return new bW("New_2", cm(f2, fa(f3)));}
function e$(f2, f3){ const f4=new bW("New_2", fa(f3));f4.ExceptWith(fa(f2));return f4;}
function fa(f2){ const f3=cr(f2.Count, void 0);f2.CopyTo(f3, 0);return f3;}
function fb(f2, f3){ const f4=new bW("New_2", fa(f2));f4.IntersectWith(fa(f3));return f4;}
function fc(f2){ return f2.$==1?f2.$0:fe();}
function fd(f2){ return f2.$==1?f2.$1:fe();}
function fe(){ return i("The input list was empty.");}
function ff(f2, f3, f4){ let f5;f5=null;return[(f6) => { const f7=() => { f4.UpdateMaybe((f8) => { let f9;f5=f2(f6);return f5!=null&&f5.$==1&&(!v(f5.$0, f8)&&(f9=[f5, f5.$0],true))?f9[0]:null;});};f6.addEventListener("change", f7);f6.addEventListener("input", f7);f6.addEventListener("keypress", f7);}, (f6) => { const f7=f3(f6);return(f8) => f8==null?null:f7(f8.$0);}, dh((f6) => { let f7;return f5!=null&&f5.$==1&&(v(f5.$0, f6)&&(f7=f5.$0,true))?null:bq(f6);}, f4.View)];}
function fg(){ return e8.StringSet;}
function fh(){ return e8.StringGet;}
function fi(){ return e8.StringListSet;}
function fj(){ return e8.StringListGet;}
function fk(){ return e8.DateTimeSetUnchecked;}
function fl(){ return e8.DateTimeGetUnchecked;}
function fm(f2, f3, f4){ let f5;f5=null;return[(f6) => { f6.addEventListener("change", () => { f4.UpdateMaybe((f7) => { let f8;f5=f2(f6);return f5!=null&&f5.$==1&&(f5.$0!==f7&&(f8=[f5, f5.$0],true))?f8[0]:null;});});}, (f6) => { const f7=f3(f6);return(f8) => f8==null?null:f7(f8.$0);}, dh((f6) => { let f7;return f5!=null&&f5.$==1&&(v(f5.$0, f6)&&(f7=f5.$0,true))?null:bq(f6);}, f4.View)];}
function fn(){ return e8.FileSetUnchecked;}
function fo(){ return e8.FileGetUnchecked;}
function fp(){ return e8.IntSetUnchecked;}
function fq(){ return e8.IntGetUnchecked;}
function fr(){ return e8.IntSetChecked;}
function fs(){ return e8.IntGetChecked;}
function ft(){ return e8.FloatSetUnchecked;}
function fu(){ return e8.FloatGetUnchecked;}
function fv(){ return e8.FloatSetChecked;}
function fw(){ return e8.FloatGetChecked;}
function fx(){ return e8.StringApply;}
function fy(){ return e8.FloatApplyUnchecked;}
function fz(){ return e8.BoolCheckedApply;}
function fA(){ return e8.DateTimeApplyUnchecked;}
function fB(){ return e8.FileApplyUnchecked;}
function fC(){ return e8.StringListApply;}
function fD(f2){ return eA(fK, f2);}
class fE { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(f2){ return f0(fE, {$:2, $0:f2});} static Invalid(f2){ return f0(fE, {$:1, $0:f2});} static Valid(f2, f3){ return f0(fE, {$:0, $0:f2, $1:f3});} }
function fF(f2, f3){ let f4;if(f3!=null&&f3.$==1){ const f5=[];f4=f3.$0[0].nextSibling;while(f4!==f3.$0[1]){ f5.push(f4);f4=f4.nextSibling;} return fJ(f5);} else { let f6=f2.childNodes.length;const f7=f2.childNodes;let f8=cs(f6, (f9) => f7[f9]);return fJ(f8);} }
function fG(f2, f3){ const f4=f2.$0;return fJ(cm((f5) => cq((f6) =>!(f5===f6), f4), f3.$0));}
function fH(f2, f3){ cj(f2, f3.$0);}
function fI(f2){ const f3=[];function f4(f5){ while(true){ if(f5!=null&&f5.$==2){ const f6=f5.$0;f5=f6.Current;} else if(f5!=null&&f5.$==1)return f3.push(f5.$0.El);else if(f5==null)return null;else if(f5!=null&&f5.$==5)return f3.push(f5.$0);else if(f5!=null&&f5.$==4)return f3.push(f5.$0.Text);else if(f5!=null&&f5.$==6){ const f7=f5.$0.Els;return(((f_) =>(f$) => { cj(f_, f$);})((f_) => { if(f_==null||f_.constructor===Object)f4(f_);else f3.push(f_);}))(f7);} else { const f8=f5.$1;const f9=f5.$0;f4(f9);f5=f8;} } } f4(f2.Children);return fJ(eE(f3));}
function fJ(f2){ return{$:0, $0:f2};}
function fK(f2){ return f2.match(new RegExp("\\s"))!==null;}
function fL(f2){ const f3=Date.parse(f2);return isNaN(f3)?null:bq(f3);}
function fM(f2, f3, f4, f5){ const f6=+f2;const f7=f6===f6-f6%1&&f6>=f3&&f6<=f4;if(f7)f5.set(f6);return f7;}
function fN(f2){ return fS(false, f2, fO);}
function fO(){ const f2=this.v();this.c=true;this.v=f2;this.f=fP;return f2;}
function fP(){ return this.v;}
let fQ=fU((f2) => class f3 { static { fQ=f2(this);} static Empty;static { this.Empty={$:0};} });
function fR(f2){ f2.splice(0, p(f2));}
function fS(f2, f3, f4){ return{c:f2, v:f3, f:f4};}
f1(() => { b();});
fT();

