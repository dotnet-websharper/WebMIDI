(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd;b=a.WebSharper=a.WebSharper||{};c=b.WebMIDI=b.WebMIDI||{};d=c.Sample=c.Sample||{};e=d.Client=d.Client||{};f=b.Obj=b.Obj||{};g=b.UI=b.UI||{};h=g.Var$1=g.Var$1||{};i=b.Operators=b.Operators||{};j=g.Templating=g.Templating||{};k=j.Runtime=j.Runtime||{};l=k.Server=k.Server||{};m=l.TemplateInstance=l.TemplateInstance||{};n=b.Arrays=b.Arrays||{};o=l.ProviderBuilder=l.ProviderBuilder||{};p=g.TemplateHole=g.TemplateHole||{};q=g.Var=g.Var||{};r=l.Handler=l.Handler||{};s=b.Unchecked=b.Unchecked||{};t=a.WebSharper$WebMIDI$Sample_Templates=a.WebSharper$WebMIDI$Sample_Templates||{};u=g.ConcreteVar=g.ConcreteVar||{};v=g.Snap=g.Snap||{};w=g.TemplateHoleModule=g.TemplateHoleModule||{};x=w.Text=w.Text||{};y=w.TextView=w.TextView||{};z=a.StartupCode$WebSharper_WebMIDI_Sample$Client=a.StartupCode$WebSharper_WebMIDI_Sample$Client||{};A=a.System=a.System||{};B=A.Guid=A.Guid||{};C=w.EventQ=w.EventQ||{};D=b.JavaScript=b.JavaScript||{};E=D.Pervasives=D.Pervasives||{};F=b.Concurrency=b.Concurrency||{};G=D.Promise=D.Promise||{};H=a.EventTarget;I=a.WindowOrWorkerGlobalScope;J=D.JS=D.JS||{};K=b.Collections=b.Collections||{};L=K.FSharpMap=K.FSharpMap||{};M=g.Client=g.Client||{};N=M.Templates=M.Templates||{};O=g.Doc=g.Doc||{};P=g.Abbrev=g.Abbrev||{};Q=P.Fresh=P.Fresh||{};R=K.Dictionary=K.Dictionary||{};S=a.Node;T=a.Object;U=F.AsyncBody=F.AsyncBody||{};V=a.Event;W=F.CT=F.CT||{};X=K.HashSet=K.HashSet||{};Y=b.Seq=b.Seq||{};Z=l.TemplateInitializer=l.TemplateInitializer||{};_0=w.VarStr=w.VarStr||{};_1=w.VarFloatUnchecked=w.VarFloatUnchecked||{};_2=w.VarBool=w.VarBool||{};_3=w.VarDateTime=w.VarDateTime||{};_4=w.VarFile=w.VarFile||{};_5=w.VarDomElement=w.VarDomElement||{};_6=g.View=g.View||{};_7=b.Numeric=b.Numeric||{};_8=F.Scheduler=F.Scheduler||{};_9=a.Error;_=D.NonStandardPromiseRejectionException=D.NonStandardPromiseRejectionException||{};$=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};ba=K.DictionaryUtil=K.DictionaryUtil||{};bb=b.Enumerator=b.Enumerator||{};bc=bb.T=bb.T||{};bd=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};be=g.Docs=g.Docs||{};bf=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bg=g.DocElemNode=g.DocElemNode||{};bh=a.CharacterData;bi=b.OperationCanceledException=b.OperationCanceledException||{};bj=K.Pair=K.Pair||{};bk=b.CancellationTokenSource=b.CancellationTokenSource||{};bl=a.Blob;bm=g.Elt=g.Elt||{};bn=a.Element;bo=N.Prepare=N.Prepare||{};bp=b.Slice=b.Slice||{};bq=g.DomUtility=g.DomUtility||{};br=K.KeyCollection=K.KeyCollection||{};bs=g.An=g.An||{};bt=M.Settings=M.Settings||{};bu=P.Mailbox=P.Mailbox||{};bv=M.Attrs=M.Attrs||{};bw=bv.Dyn=bv.Dyn||{};bx=g.Attrs=g.Attrs||{};by=w.Elt=w.Elt||{};bz=w.Attribute=w.Attribute||{};bA=w.Event=w.Event||{};bB=g.AttrModule=g.AttrModule||{};bC=g.AttrProxy=g.AttrProxy||{};bD=w.AfterRender=w.AfterRender||{};bE=w.AfterRenderQ=w.AfterRenderQ||{};bF=b.List=b.List||{};bG=bF.T=bF.T||{};bH=b.Strings=b.Strings||{};bI=g.Array=g.Array||{};bJ=g.Updates=g.Updates||{};bK=K.ValueCollection=K.ValueCollection||{};bL=M.Docs=M.Docs||{};bM=bL.RunState=bL.RunState||{};bN=bL.NodeSet=bL.NodeSet||{};bO=g.Anims=g.Anims||{};bP=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bQ=K.BalancedTree=K.BalancedTree||{};bR=K.HashSetUtil=K.HashSetUtil||{};bS=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bT=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bU=g.AppendList=g.AppendList||{};bV=g.DynamicAttrNode=g.DynamicAttrNode||{};bW=b.KeyNotFoundException=b.KeyNotFoundException||{};bX=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bY=g.Easing=g.Easing||{};bZ=P.HashSet=P.HashSet||{};b0=g.BindVar=g.BindVar||{};b1=g.String=g.String||{};b2=g.CheckedInput=g.CheckedInput||{};b3=bL.DomNodes=bL.DomNodes||{};b4=b.Char=b.Char||{};b5=b.DateUtil=b.DateUtil||{};b6=b.Lazy=b.Lazy||{};b7=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b8=b.Queue=b.Queue||{};b9=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};b_=b9.LazyRecord=b9.LazyRecord||{};b$=a.Promise;ca=a.console;cb=b&&b.Runtime;cc=a.Math;cd=a.Date;e.Main=function(){var ce,cf,cg,ch,ci,cj,ck;h.Create$1("");ce=(cf=(cg=(ch=(ci=new o.New$1(),(ci.h.push(r.EventQ2(ci.k,"connectmidi",function(){return ci.i;},function(){var cl;F.Start((cl=null,F.Delay(function(){return F.Bind(G.AsAsync(e.connectMIDI()),function(){return F.Return(null);});})),null);})),ci)),(ch.h.push(new y.New("status",e.statusMessage().get_View())),ch)),(cg.h.push(new y.New("midimessages",e.midiMessages().get_View())),cg)),(cj=r.CompleteHoles(cf.k,cf.h,[]),(ck=new m.New(cj[1],t.main(cj[0])),cf.i=ck,ck))).get_Doc();N.LoadLocalTemplates("");O.RunById("main",ce);};e.midiMessages=function(){z.$cctor();return z.midiMessages;};e.statusMessage=function(){z.$cctor();return z.statusMessage;};e.connectMIDI=function(){var ce;function cf(){function cg(){return self.navigator.requestMIDIAccess().then(function(ci){e.statusMessage().Set("MIDI Access Granted!");ci.inputs.forEach(function(cj){return cj.addEventListener("midimessage",e.handleMIDIMessage);});return b$.resolve(null);});}function ch(ci){var cj;e.statusMessage().Set("MIDI Access Denied!");cj=ci.message;(function(ck){return ck("MIDI Connection Error: "+a.String(cj));}(function(ck){ca.log(ck);}));return b$.resolve(null);}return new b$(function(ci){ci(cg());})["catch"](function(ci){return ch(G.unwrapExn(ci));});}ce=null;return new b$(function(cg){cg(cf());});};e.handleMIDIMessage=function(ce){var cf;cf=ce.data;(function(cg){return cg("MIDI Message: "+a.String(cf));}(function(cg){ca.log(cg);}));e.midiMessages().Set(a.String(e.midiMessages())+"\n"+a.String(cf));};f=b.Obj=cb.Class({Equals:function(ce){return this===ce;},GetHashCode:function(){return -1;}},null,f);f.New=cb.Ctor(function(){},f);h=g.Var$1=cb.Class({},f,h);h.Create$1=function(ce){return new u.New(false,v.New({$:2,$0:ce,$1:[]}),ce);};i.FailWith=function(ce){throw new _9(ce);};i.KeyValue=function(ce){return[ce.K,ce.V];};i.range=function(ce,cf){var cg;cg=1+cf-ce;return cg<=0?[]:Y.init(cg,function(ch){return ch+ce;});};m=l.TemplateInstance=cb.Class({get_Doc:function(){return this.doc;},SetAnchorRoot:function(ce){this.anchorRoot=ce;}},f,m);m.New=cb.Ctor(function(ce,cf){f.New.call(this);this.doc=cf;this.allVars=ce.$==0?ce.$0:i.FailWith("Should not happen");this.anchorRoot=null;},m);n.get=function(ce,cf){n.checkBounds(ce,cf);return ce[cf];};n.length=function(ce){return ce.dims===2?ce.length*ce.length:ce.length;};n.checkBounds=function(ce,cf){if(cf<0||cf>=ce.length)i.FailWith("Index was outside the bounds of the array.");};n.set=function(ce,cf,cg){n.checkBounds(ce,cf);ce[cf]=cg;};o=l.ProviderBuilder=cb.Class({},f,o);o.New$1=cb.Ctor(function(){var ce;f.New.call(this);this.i=null;this.k=(ce=B.NewGuid(),a.String(ce));this.h=cb.MarkResizable([]);cb.SetOptional(this,"s",null);},o);p=g.TemplateHole=cb.Class({ForTextView:function(){ca.warn("Content hole filled with attribute data",this.get_Name());return null;},AddAttribute:function(ce,cf){ca.warn("Var hole filled with non-Var data",this.get_Name());},get_AsChoiceView:function(){ca.warn("Attribute value hole filled with non-text data",this.get_Name());return{$:0,$0:""};}},f,p);p.New=cb.Ctor(function(){f.New.call(this);},p);q=g.Var=cb.Class({},f,q);q.New=cb.Ctor(function(){f.New.call(this);},q);r.EventQ2=function(ce,cf,cg,ch){return new C.New(cf,function(ci){return function(cj){var ck;ck=cg();ck.SetAnchorRoot(ci);return ch({Vars:ck,Anchors:ck,Target:ci,Event:cj});};});};r.CompleteHoles=function(ce,cf,cg){var ci,cj,ck,cl,cm;function ch(cn,co,cp){var cq;return cj.Contains(cn)?null:(cq=s.Equals(co,0)?Z.GetOrAddHoleFor(ce,cn,function(){return new _0.New(cn,h.Create$1(""));}):s.Equals(co,1)?Z.GetOrAddHoleFor(ce,cn,function(){return new _1.New(cn,h.Create$1(0));}):s.Equals(co,2)?Z.GetOrAddHoleFor(ce,cn,function(){return new _2.New(cn,h.Create$1(false));}):s.Equals(co,3)?Z.GetOrAddHoleFor(ce,cn,function(){return new _3.New(cn,h.Create$1(-8640000000000000));}):s.Equals(co,4)?Z.GetOrAddHoleFor(ce,cn,function(){return new _4.New(cn,h.Create$1([]));}):s.Equals(co,5)?Z.GetOrAddHoleFor(ce,cn,function(){var cr;cr=self.document.querySelector("[ws-dom="+cn+"]");cr.removeAttribute("ws-dom");return new _5.New(cn,h.Create$1({$:1,$0:cr}));}):i.FailWith("Invalid value type"),(ci.set_Item(cn,cq),{$:1,$0:cq}));}ci=new R.New$5();cj=new X.New$3();ck=bb.Get(cf);try{while(ck.MoveNext()){cl=ck.Current();cm=cl.get_Name();cj.SAdd(cm);ci.set_Item(cm,cl);}}finally{if(typeof ck=="object"&&"Dispose"in ck)ck.Dispose();}return[Y.append(cf,n.choose(function(cn){return ch(cn[0],cn[1],cn[2]);},cg)),{$:0,$0:ci}];};s.Equals=function(ce,cf){var cg,ch,ci,cj;if(ce===cf)return true;else{cg=typeof ce;if(cg=="object"){if(ce===null||ce===void 0||cf===null||cf===void 0||!s.Equals(typeof cf,"object"))return false;else if("Equals"in ce)return ce.Equals(cf);else if("Equals"in cf)return false;else if(ce instanceof a.Array&&cf instanceof a.Array)return s.arrayEquals(ce,cf);else if(ce instanceof a.Date&&cf instanceof a.Date)return s.dateEquals(ce,cf);else{ch=[true];for(var ck in ce)if(function(cl){ch[0]=!ce.hasOwnProperty(cl)||cf.hasOwnProperty(cl)&&s.Equals(ce[cl],cf[cl]);return!ch[0];}(ck))break;if(ch[0]){for(var cl in cf)if(function(cm){ch[0]=!cf.hasOwnProperty(cm)||ce.hasOwnProperty(cm);return!ch[0];}(cl))break;}return ch[0];}}else return cg=="function"&&("$Func"in ce?ce.$Func===cf.$Func&&ce.$Target===cf.$Target:"$Invokes"in ce&&"$Invokes"in cf&&s.arrayEquals(ce.$Invokes,cf.$Invokes));}};s.arrayEquals=function(ce,cf){var cg,ch;if(n.length(ce)===n.length(cf)){cg=true;ch=0;while(cg&&ch<n.length(ce)){!s.Equals(n.get(ce,ch),n.get(cf,ch))?cg=false:void 0;ch=ch+1;}return cg;}else return false;};s.dateEquals=function(ce,cf){return ce.getTime()===cf.getTime();};s.Hash=function(ce){var cf;cf=typeof ce;return cf=="function"?0:cf=="boolean"?ce?1:0:cf=="number"?ce:cf=="string"?s.hashString(ce):cf=="object"?ce==null?0:ce instanceof a.Array?s.hashArray(ce):s.hashObject(ce):0;};s.hashString=function(ce){var cf,cg,ch;if(ce===null)return 0;else{cf=5381;for(cg=0,ch=ce.length-1;cg<=ch;cg++)cf=s.hashMix(cf,ce[cg].charCodeAt());return cf;}};s.hashArray=function(ce){var cf,cg,ch;cf=-34948909;for(cg=0,ch=n.length(ce)-1;cg<=ch;cg++)cf=s.hashMix(cf,s.Hash(n.get(ce,cg)));return cf;};s.hashObject=function(ce){var cf,cg;if("GetHashCode"in ce)return ce.GetHashCode();else{cf=[0];for(var ch in ce)if(function(ci){cf[0]=s.hashMix(s.hashMix(cf[0],s.hashString(ci)),s.Hash(ce[ci]));return false;}(ch))break;return cf[0];}};s.hashMix=function(ce,cf){return(ce<<5)+ce+cf;};s.Compare=function(ce,cf){var cg,ch,ci,cj,ck,cl;if(ce===cf)return 0;else{ch=typeof ce;switch(ch=="function"?1:ch=="boolean"?2:ch=="number"?2:ch=="string"?2:ch=="object"?3:0){case 0:return typeof cf=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return ce<cf?-1:1;case 3:if(ce===null)ci=-1;else if(cf===null)ci=1;else if("CompareTo"in ce)ci=ce.CompareTo(cf);else if("CompareTo0"in ce)ci=ce.CompareTo0(cf);else if(ce instanceof a.Array&&cf instanceof a.Array)ci=s.compareArrays(ce,cf);else if(ce instanceof a.Date&&cf instanceof a.Date)ci=s.compareDates(ce,cf);else{cj=[0];for(var cm in ce)if(function(cn){return!ce.hasOwnProperty(cn)?false:!cf.hasOwnProperty(cn)?(cj[0]=1,true):(cj[0]=s.Compare(ce[cn],cf[cn]),cj[0]!==0);}(cm))break;if(cj[0]===0){for(var cn in cf)if(function(co){return!cf.hasOwnProperty(co)?false:!ce.hasOwnProperty(co)&&(cj[0]=-1,true);}(cn))break;}ci=cj[0];}return ci;}}};s.compareArrays=function(ce,cf){var cg,ch;if(n.length(ce)<n.length(cf))return -1;else if(n.length(ce)>n.length(cf))return 1;else{cg=0;ch=0;while(cg===0&&ch<n.length(ce)){cg=s.Compare(n.get(ce,ch),n.get(cf,ch));ch=ch+1;}return cg;}};s.compareDates=function(ce,cf){return s.Compare(ce.getTime(),cf.getTime());};t.main=function(ce){N.LoadLocalTemplates("index");return ce?N.NamedTemplate("index",{$:1,$0:"main"},ce):void 0;};u=g.ConcreteVar=cb.Class({get_View:function(){return this.view;},Set:function(ce){if(this.isConst)(function(cf){return cf("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cf){ca.log(cf);}));else{v.Obsolete(this.snap);this.current=ce;this.snap=v.New({$:2,$0:ce,$1:[]});}},SetFinal:function(ce){if(this.isConst)(function(cf){return cf("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cf){ca.log(cf);}));else{v.Obsolete(this.snap);this.isConst=true;this.current=ce;this.snap=v.New({$:0,$0:ce});}},Get:function(){return this.current;},UpdateMaybe:function(ce){var cf;cf=ce(this.Get());if(cf!=null&&cf.$==1)this.Set(cf.$0);}},q,u);u.New=cb.Ctor(function(ce,cf,cg){var ch;ch=this;q.New.call(this);this.isConst=ce;this.current=cg;this.snap=cf;this.view=function(){return ch.snap;};this.id=Q.Int();},u);v.WhenRun=function(ce,cf,cg){var ch;ch=ce.s;if(ch==null)cg();else ch!=null&&ch.$==2?(ch.$1.push(cg),cf(ch.$0)):ch!=null&&ch.$==3?(ch.$0.push(cf),ch.$1.push(cg)):cf(ch.$0);};v.Map=function(ce,cf){var cg,ch;cg=cf.s;return cg!=null&&cg.$==0?v.New({$:0,$0:ce(cg.$0)}):(ch=v.New({$:3,$0:[],$1:[]}),(v.When(cf,function(ci){v.MarkDone(ch,cf,ce(ci));},ch),ch));};v.Map3=function(ce,cf,cg,ch){var ci,cj,ck,cl;function cm(cn){var co,cp,cq,cr;if(!(co=cl.s,co!=null&&co.$==0||co!=null&&co.$==2)){cp=v.ValueAndForever(cf);cq=v.ValueAndForever(cg);cr=v.ValueAndForever(ch);if(cp!=null&&cp.$==1)cq!=null&&cq.$==1?cr!=null&&cr.$==1?cp.$0[1]&&cq.$0[1]&&cr.$0[1]?v.MarkForever(cl,ce(cp.$0[0],cq.$0[0],cr.$0[0])):v.MarkReady(cl,ce(cp.$0[0],cq.$0[0],cr.$0[0])):void 0:void 0;}}ci=cf.s;cj=cg.s;ck=ch.s;return ci!=null&&ci.$==0?cj!=null&&cj.$==0?ck!=null&&ck.$==0?v.New({$:0,$0:ce(ci.$0,cj.$0,ck.$0)}):v.Map3Opt1(ce,ci.$0,cj.$0,ch):ck!=null&&ck.$==0?v.Map3Opt2(ce,ci.$0,ck.$0,cg):v.Map3Opt3(ce,ci.$0,cg,ch):cj!=null&&cj.$==0?ck!=null&&ck.$==0?v.Map3Opt4(ce,cj.$0,ck.$0,cf):v.Map3Opt5(ce,cj.$0,cf,ch):ck!=null&&ck.$==0?v.Map3Opt6(ce,ck.$0,cf,cg):(cl=v.New({$:3,$0:[],$1:[]}),(v.When(cf,cm,cl),v.When(cg,cm,cl),v.When(ch,cm,cl),cl));};v.Sequence=function(ce){var cf,cg,ch;function ci(cj){var ck;if(ch[0]===0){ck=n.map(function(cl){var cm;cm=cl.s;return cm!=null&&cm.$==0?cm.$0:cm!=null&&cm.$==2?cm.$0:i.FailWith("value not found by View.Sequence");},cf);if(n.forall(function(cl){var cm;cm=cl.s;return cm!=null&&cm.$==0;},cf))v.MarkForever(cg,ck);else v.MarkReady(cg,ck);}else ch[0]=ch[0]-1;}cf=n.ofSeq(ce);return cf.length==0?v.New({$:0,$0:[]}):(cg=v.New({$:3,$0:[],$1:[]}),(ch=[n.length(cf)-1],(n.iter(function(cj){v.When(cj,ci,cg);},cf),cg)));};v.Map2=function(ce,cf,cg){var ch,ci,cj;function ck(cl){var cm,cn,co;if(!(cm=cj.s,cm!=null&&cm.$==0||cm!=null&&cm.$==2)){cn=v.ValueAndForever(cf);co=v.ValueAndForever(cg);if(cn!=null&&cn.$==1)co!=null&&co.$==1?cn.$0[1]&&co.$0[1]?v.MarkForever(cj,ce(cn.$0[0],co.$0[0])):v.MarkReady(cj,ce(cn.$0[0],co.$0[0])):void 0;}}ch=cf.s;ci=cg.s;return ch!=null&&ch.$==0?ci!=null&&ci.$==0?v.New({$:0,$0:ce(ch.$0,ci.$0)}):v.Map2Opt1(ce,ch.$0,cg):ci!=null&&ci.$==0?v.Map2Opt2(ce,ci.$0,cf):(cj=v.New({$:3,$0:[],$1:[]}),(v.When(cf,ck,cj),v.When(cg,ck,cj),cj));};v.Map2Unit=function(ce,cf){var cg,ch,ci;function cj(){var ck,cl,cm;if(!(ck=ci.s,ck!=null&&ck.$==0||ck!=null&&ck.$==2)){cl=v.ValueAndForever(ce);cm=v.ValueAndForever(cf);if(cl!=null&&cl.$==1)cm!=null&&cm.$==1?cl.$0[1]&&cm.$0[1]?v.MarkForever(ci,null):v.MarkReady(ci,null):void 0;}}cg=ce.s;ch=cf.s;return cg!=null&&cg.$==0?ch!=null&&ch.$==0?v.New({$:0,$0:null}):cf:ch!=null&&ch.$==0?ce:(ci=v.New({$:3,$0:[],$1:[]}),(v.When(ce,cj,ci),v.When(cf,cj,ci),ci));};v.Copy=function(ce){var cf,cg,ch;cf=ce.s;return cf==null?ce:cf!=null&&cf.$==2?(cg=v.New({$:2,$0:cf.$0,$1:[]}),(v.WhenObsolete(ce,cg),cg)):cf!=null&&cf.$==3?(ch=v.New({$:3,$0:[],$1:[]}),(v.When(ce,function(ci){v.MarkDone(ch,ce,ci);},ch),ch)):ce;};v.WhenObsoleteRun=function(ce,cf){var cg;cg=ce.s;if(cg==null)cf();else cg!=null&&cg.$==2?cg.$1.push(cf):cg!=null&&cg.$==3?cg.$1.push(cf):void 0;};v.When=function(ce,cf,cg){var ch;ch=ce.s;if(ch==null)v.Obsolete(cg);else ch!=null&&ch.$==2?(v.EnqueueSafe(ch.$1,cg),cf(ch.$0)):ch!=null&&ch.$==3?(ch.$0.push(cf),v.EnqueueSafe(ch.$1,cg)):cf(ch.$0);};v.MarkDone=function(ce,cf,cg){var ch;if(ch=cf.s,ch!=null&&ch.$==0)v.MarkForever(ce,cg);else v.MarkReady(ce,cg);};v.Map3Opt1=function(ce,cf,cg,ch){return v.Map(function(ci){return ce(cf,cg,ci);},ch);};v.Map3Opt2=function(ce,cf,cg,ch){return v.Map(function(ci){return ce(cf,ci,cg);},ch);};v.Map3Opt3=function(ce,cf,cg,ch){return v.Map2(function(ci,cj){return ce(cf,ci,cj);},cg,ch);};v.Map3Opt4=function(ce,cf,cg,ch){return v.Map(function(ci){return ce(ci,cf,cg);},ch);};v.Map3Opt5=function(ce,cf,cg,ch){return v.Map2(function(ci,cj){return ce(ci,cf,cj);},cg,ch);};v.Map3Opt6=function(ce,cf,cg,ch){return v.Map2(function(ci,cj){return ce(ci,cj,cf);},cg,ch);};v.ValueAndForever=function(ce){var cf;cf=ce.s;return cf!=null&&cf.$==0?{$:1,$0:[cf.$0,true]}:cf!=null&&cf.$==2?{$:1,$0:[cf.$0,false]}:null;};v.MarkForever=function(ce,cf){var cg,ch,ci,cj;cg=ce.s;if(cg!=null&&cg.$==3){ce.s={$:0,$0:cf};ch=cg.$0;for(ci=0,cj=n.length(ch)-1;ci<=cj;ci++)(n.get(ch,ci))(cf);}else void 0;};v.MarkReady=function(ce,cf){var cg,ch,ci,cj;cg=ce.s;if(cg!=null&&cg.$==3){ce.s={$:2,$0:cf,$1:cg.$1};ch=cg.$0;for(ci=0,cj=n.length(ch)-1;ci<=cj;ci++)(n.get(ch,ci))(cf);}else void 0;};v.Map2Opt1=function(ce,cf,cg){return v.Map(function(ch){return ce(cf,ch);},cg);};v.Map2Opt2=function(ce,cf,cg){return v.Map(function(ch){return ce(ch,cf);},cg);};v.WhenObsolete=function(ce,cf){var cg;cg=ce.s;if(cg==null)v.Obsolete(cf);else cg!=null&&cg.$==2?v.EnqueueSafe(cg.$1,cf):cg!=null&&cg.$==3?v.EnqueueSafe(cg.$1,cf):void 0;};v.EnqueueSafe=function(ce,cf){var cg,ch,ci,cj;ce.push(cf);if(ce.length%20===0){cg=ce.slice(0);b8.Clear(ce);for(ch=0,ci=n.length(cg)-1;ch<=ci;ch++){cj=n.get(cg,ch);if(typeof cj=="object")(function(ck){if(ck.s)ce.push(ck);}(cj));else(function(ck){ce.push(ck);}(cj));}}else void 0;};x=w.Text=cb.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;},get_AsChoiceView:function(){return{$:0,$0:this.fillWith};}},p,x);x.New=cb.Ctor(function(ce,cf){p.New.call(this);this.name=ce;this.fillWith=cf;},x);y=w.TextView=cb.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith};},get_AsChoiceView:function(){return{$:1,$0:this.fillWith};}},p,y);y.New=cb.Ctor(function(ce,cf){p.New.call(this);this.name=ce;this.fillWith=cf;},y);z.$cctor=function(){z.$cctor=a.ignore;z.statusMessage=h.Create$1("Waiting for MIDI connection...");z.midiMessages=h.Create$1("");};B.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(ce){var cf,cg;cf=cc.random()*16|0;cg=ce=="x"?cf:cf&3|8;return cg.toString(16);});};C=w.EventQ=cb.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},p,C);C.New=cb.Ctor(function(ce,cf){p.New.call(this);this.name=ce;this.fillWith=cf;},C);E.NewFromSeq=function(ce){var cf,cg,ch;cf={};cg=bb.Get(ce);try{while(cg.MoveNext()){ch=cg.Current();cf[ch[0]]=ch[1];}}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}return cf;};F.Delay=function(ce){return function(cf){try{(ce(null))(cf);}catch(cg){cf.k({$:1,$0:cg});}};};F.Bind=function(ce,cf){return F.checkCancel(function(cg){ce(U.New(function(ch){var ci;if(ch.$==0){ci=ch.$0;F.scheduler().Fork(function(){try{(cf(ci))(cg);}catch(cj){cg.k({$:1,$0:cj});}});}else F.scheduler().Fork(function(){cg.k(ch);});},cg.ct));});};F.Return=function(ce){return function(cf){cf.k({$:0,$0:ce});};};F.Start=function(ce,cf){var cg,ch;cg=(ch=(F.defCTS())[0],cf==null?ch:cf.$0);F.scheduler().Fork(function(){if(!cg.c)ce(U.New(function(ci){if(ci.$==1)F.UncaughtAsyncError(ci.$0);},cg));});};F.checkCancel=function(ce){return function(cf){if(cf.ct.c)F.cancel(cf);else ce(cf);};};F.defCTS=function(){$.$cctor();return $.defCTS;};F.UncaughtAsyncError=function(ce){ca.log("WebSharper: Uncaught asynchronous exception",ce);};F.cancel=function(ce){ce.k({$:2,$0:new bi.New(ce.ct)});};F.scheduler=function(){$.$cctor();return $.scheduler;};F.FromContinuations=function(ce){return function(cf){var cg;function ch(ci){if(cg[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cg[0]=true;F.scheduler().Fork(ci);}}cg=[false];ce(function(ci){ch(function(){cf.k({$:0,$0:ci});});},function(ci){ch(function(){cf.k({$:1,$0:ci});});},function(ci){ch(function(){cf.k({$:2,$0:ci});});});};};F.Zero=function(){$.$cctor();return $.Zero;};G.AsAsync=function(ce){return F.FromContinuations(function(cf,cg){ce.then(cf,function(ch){return cg(G.unwrapExn(ch));});});};G.unwrapExn=function(ce){return ce instanceof _9?ce:new _.New(ce);};J.GetFieldValues=function(ce){var cf,cg;cf=[];for(var ch in ce)cf.push(ce[ch]);return cf;};L=K.FSharpMap=cb.Class({GetEnumerator:function(){return bb.Get(Y.map(function(ce){return{K:ce.Key,V:ce.Value};},bQ.Enumerate(false,this.tree)));},Equals:function(ce){return this.Count()===ce.Count()&&Y.forall2(s.Equals,this,ce);},Count:function(){var ce;ce=this.tree;return ce==null?0:ce.Count;},GetHashCode:function(){return s.Hash(n.ofSeq(this));},CompareTo0:function(ce){return Y.compareWith(s.Compare,this,ce);}},f,L);N.LoadLocalTemplates=function(ce){!N.LocalTemplatesLoaded()?(N.set_LocalTemplatesLoaded(true),N.LoadNestedTemplates(self.document.body,"")):void 0;N.LoadedTemplates().set_Item(ce,N.LoadedTemplateFile(""));};N.NamedTemplate=function(ce,cf,cg){var ch,ci;ch=(ci=null,[N.LoadedTemplateFile(ce).TryGetValue(cf==null?"":cf.$0,{get:function(){return ci;},set:function(cj){ci=cj;}}),ci]);return ch[0]?N.ChildrenTemplate(ch[1].cloneNode(true),cg):(ca.warn("Local template doesn't exist",cf),O.get_Empty());};N.LocalTemplatesLoaded=function(){bd.$cctor();return bd.LocalTemplatesLoaded;};N.set_LocalTemplatesLoaded=function(ce){bd.$cctor();bd.LocalTemplatesLoaded=ce;};N.LoadNestedTemplates=function(ce,cf){var ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB;function cg(cC){var cD,cE;if(!ch.ContainsKey(cC)){cD=(cE=null,[ci.TryGetValue(cC,{get:function(){return cE;},set:function(cF){cE=cF;}}),cE]);if(cD[0]){cB.SAdd(cC);ci.RemoveKey(cC);N.PrepareTemplateStrict(cf,{$:1,$0:cC},cD[1],{$:1,$0:cg});}else ca.warn(cB.Contains(cC)?"Encountered loop when instantiating "+cC:"Local template does not exist: "+cC);}}ch=N.LoadedTemplateFile(cf);ci=new R.New$5();cj=ce.querySelectorAll("[ws-template]");for(ck=0,cl=cj.length-1;ck<=cl;ck++){cm=cj[ck];cn=cm.getAttribute("ws-template").toLowerCase();cm.removeAttribute("ws-template");ci.set_Item(cn,N.FakeRootSingle(cm));}co=ce.querySelectorAll("[ws-children-template]");for(cp=0,cq=co.length-1;cp<=cq;cp++){cr=co[cp];cs=cr.getAttribute("ws-children-template").toLowerCase();cr.removeAttribute("ws-children-template");ci.set_Item(cs,N.FakeRoot(cr));}ct=ce.querySelectorAll("template[id]");for(cu=0,cv=ct.length-1;cu<=cv;cu++){cw=ct[cu];ci.set_Item(cw.getAttribute("id").toLowerCase(),N.FakeRootFromHTMLTemplate(cw));}cx=ce.querySelectorAll("template[name]");for(cy=0,cz=cx.length-1;cy<=cz;cy++){cA=cx[cy];ci.set_Item(cA.getAttribute("name").toLowerCase(),N.FakeRootFromHTMLTemplate(cA));}cB=new X.New$3();while(ci.count>0)cg(Y.head(ci.Keys()));};N.LoadedTemplates=function(){bd.$cctor();return bd.LoadedTemplates;};N.LoadedTemplateFile=function(ce){var cf,cg,ch;cf=(cg=null,[N.LoadedTemplates().TryGetValue(ce,{get:function(){return cg;},set:function(ci){cg=ci;}}),cg]);return cf[0]?cf[1]:(ch=new R.New$5(),(N.LoadedTemplates().set_Item(ce,ch),ch));};N.ChildrenTemplate=function(ce,cf){var cg,ch,ci,cj,ck;cg=N.InlineTemplate(ce,Y.append(cf,N.GlobalHoles().Values()));ch=cg[1];ci=cg[0];cj=ci.Els;return!s.Equals(cj,null)&&cj.length===1&&(n.get(cj,0)instanceof S&&(s.Equals(n.get(cj,0).nodeType,S.ELEMENT_NODE)&&(ck=n.get(cj,0),true)))?bm.TreeNode(ci,ch):O.Mk({$:6,$0:ci},ch);};N.FakeRootSingle=function(ce){var cf,cg,ch,ci;ce.removeAttribute("ws-template");cf=ce.getAttribute("ws-replace");if(cf==null);else{ce.removeAttribute("ws-replace");cg=ce.parentNode;s.Equals(cg,null)?void 0:(ch=self.document.createElement(ce.tagName),ch.setAttribute("ws-replace",cf),cg.replaceChild(ch,ce));}ci=self.document.createElement("div");ci.appendChild(ce);return ci;};N.FakeRoot=function(ce){var cf;cf=self.document.createElement("div");while(ce.hasChildNodes())cf.appendChild(ce.firstChild);return cf;};N.FakeRootFromHTMLTemplate=function(ce){var cf,cg,ch,ci;cf=self.document.createElement("div");cg=ce.content;for(ch=0,ci=cg.childNodes.length-1;ch<=ci;ch++)cf.appendChild(cg.childNodes[ch].cloneNode(true));return cf;};N.PrepareTemplateStrict=function(ce,cf,cg,ch){var ci,cj;function ck(cq,cr){var cs,ct,cu,cv,cw,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS;function cx(cT){}while(true)switch(cq){case 0:if(cr!==null){cs=cr.nextSibling;if(s.Equals(cr.nodeType,S.TEXT_NODE))bo.convertTextNode(cr);else if(s.Equals(cr.nodeType,S.ELEMENT_NODE))cm(cr);cr=cs;}else return null;break;case 1:cy=bp.string(cr.nodeName,{$:1,$0:3},null).toLowerCase();cz=(ct=cy.indexOf("."),ct===-1?[ce,cy]:[bp.string(cy,null,{$:1,$0:ct-1}),bp.string(cy,{$:1,$0:ct+1},null)]);cA=cz[1];cB=cz[0];if(cB!=""&&!N.LoadedTemplates().ContainsKey(cB))return bo.failNotLoaded(cA);else{if(cB==""&&ch!=null)ch.$0(cA);cC=N.LoadedTemplates().Item(cB);if(!cC.ContainsKey(cA))return bo.failNotLoaded(cA);else{cD=cC.Item(cA);cE=cD.cloneNode(true);cF=new X.New$3();cG=new R.New$5();cH=cr.attributes;for(cI=0,cJ=cH.length-1;cI<=cJ;cI++){cK=cH.item(cI).name.toLowerCase();cG.set_Item(cK,(cL=cH.item(cI).nodeValue,cL==""?cK:cL.toLowerCase()));if(!cF.SAdd(cK))ca.warn("Hole mapped twice",cK);}for(cM=0,cN=cr.childNodes.length-1;cM<=cN;cM++){cO=cr.childNodes[cM];if(s.Equals(cO.nodeType,S.ELEMENT_NODE))!cF.SAdd(cO.nodeName.toLowerCase())?ca.warn("Hole filled twice",cA):void 0;}cP=cr.childNodes.length===1&&s.Equals(cr.firstChild.nodeType,S.TEXT_NODE);if(cP){cv=bo.fillTextHole(cE,cr.firstChild.textContent,cA);((function(cT){return function(cU){if(cU!=null)cT(cU.$0);};}((cw=function(cT){return function(cU){return cT.SAdd(cU);};}(cF),function(cT){return cx(cw(cT));})))(cv));}bo.removeHolesExcept(cE,cF);if(!cP){for(cQ=0,cR=cr.childNodes.length-1;cQ<=cR;cQ++){cS=cr.childNodes[cQ];if(s.Equals(cS.nodeType,S.ELEMENT_NODE))cS.hasAttributes()?bo.fillInstanceAttrs(cE,cS):cl(cE,cS);}}bo.mapHoles(cE,cG);bo.fill(cE,cr.parentNode,cr);cr.parentNode.removeChild(cr);return;}}break;}}function cl(cq,cr){var cs,ct,cv,cw;function cu(cx,cy){var cz;if(cv=="title"&&cr.hasChildNodes()){cz=bq.ParseHTMLIntoFakeRoot(cr.textContent);cr.removeChild(cr.firstChild);while(cz.hasChildNodes())cr.appendChild(cz.firstChild);}else null;cm(cr);return bo.fill(cr,cx,cy);}cv=cr.nodeName.toLowerCase();N.foreachNotPreserved(cq,"[ws-attr-holes]",function(cx){var cy,cz,cA,cB,cC;cy=bH.SplitChars(cx.getAttribute("ws-attr-holes"),[" "],1);for(cz=0,cA=cy.length-1;cz<=cA;cz++){cB=n.get(cy,cz);cx.setAttribute(cB,(cC=new a.RegExp("\\${"+cv+"}","ig"),cx.getAttribute(cB).replace(cC,cr.textContent)));}});cw=cq.querySelector("[ws-hole="+cv+"]");if(s.Equals(cw,null)){cs=cq.querySelector("[ws-replace="+cv+"]");return s.Equals(cs,null)?(ct=cq.querySelector("slot[name="+cv+"]"),cq.tagName.toLowerCase()=="template"?(cu(ct.parentNode,ct),void ct.parentNode.removeChild(ct)):null):(cu(cs.parentNode,cs),void cs.parentNode.removeChild(cs));}else{while(cw.hasChildNodes())cw.removeChild(cw.lastChild);cw.removeAttribute("ws-hole");return cu(cw,null);}}function cm(cq){if(!cq.hasAttribute("ws-preserve"))if(bH.StartsWith(cq.nodeName.toLowerCase(),"ws-"))co(cq);else{bo.convertAttrs(cq);cn(cq.firstChild);}}function cn(cq){return ck(0,cq);}function co(cq){return ck(1,cq);}function cp(cq){var cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC;while(true){cr=cq.querySelector("[ws-template]");if(s.Equals(cr,null)){cs=cq.querySelector("[ws-children-template]");if(s.Equals(cs,null)){ct=cq.querySelectorAll("template[id]");for(cu=1,cv=ct.length-1;cu<=cv;cu++){cw=ct[cu];if(ci.Contains(cw));else{N.PrepareTemplateStrict(ce,{$:1,$0:cw.getAttribute("id")},cw,null);ci.SAdd(cw);}}cx=cq.querySelectorAll("template[name]");for(cy=1,cz=cx.length-1;cy<=cz;cy++){cA=cx[cy];if(ci.Contains(cA));else{N.PrepareTemplateStrict(ce,{$:1,$0:cA.getAttribute("name")},cA,null);ci.SAdd(cA);}}return null;}else{cB=cs.getAttribute("ws-children-template");cs.removeAttribute("ws-children-template");N.PrepareTemplateStrict(ce,{$:1,$0:cB},cs,null);cq=cq;}}else{cC=cr.getAttribute("ws-template");(N.PrepareSingleTemplate(ce,{$:1,$0:cC},cr))(null);cq=cq;}}}ci=new X.New$3();cj=(cf==null?"":cf.$0).toLowerCase();N.LoadedTemplateFile(ce).set_Item(cj,cg);if(cg.hasChildNodes()){cp(cg);cn(cg.firstChild);}};N.InlineTemplate=function(ce,cf){var cg,ch,ci,cj,ck,co,cp,cq,cr,cs,ct,cu;function cl(cv,cw){var cx,cy,cz;cx=bx.Insert(cv,cw);cp.push(bx.Updates(cx));cq.push([cv,cx]);cy=cb.GetOptional(cx.OnAfterRender);return cy==null?null:(cz=cy.$0,void cr.push(function(){cz(cv);}));}function cm(cv){var cw,cx,cy,cz;cw=(cx=null,[cs.TryGetValue(cv,{get:function(){return cx;},set:function(cA){cx=cA;}}),cx]);return cw[0]?(cy=cw[1],cy instanceof by?{$:1,$0:cy.get_Value()}:cy instanceof x?{$:1,$0:O.TextNode(cy.get_Value())}:(cz=cy.ForTextView(),cz==null?null:{$:1,$0:O.TextView(cz.$0)})):null;}function cn(){N.foreachNotPreservedwsDOM("[ws-dom]",function(cv){var cw,cx,cy,cz,cA,cB,cC;cw=(cx=null,[cs.TryGetValue(cv.getAttribute("ws-dom").toLowerCase(),{get:function(){return cx;},set:function(cD){cx=cD;}}),cx]);if(cw[0]){cy=cw[1];cy instanceof _5?(cz=cy.get_Value(),cv.removeAttribute("ws-dom"),cA=cv,cB=new a.MutationObserver(function(cD,cE){n.iter(function(cF){function cG(cH,cI,cJ,cK){if(cH===cA&&cF.addedNodes.length!==1){cz.SetFinal(null);cE.disconnect();}}cF.removedNodes.forEach(cb.CreateFuncWithArgs(function(cH){return cG(cH[0],cH[1],cH[2],cH[3]);}),null);},cD);}),cv.parentElement!==null?cB.observe(cv.parentElement,(cC={},cC.childList=true,cC)):void 0,cz.Set({$:1,$0:cv}),_6.Sink(function(cD){var cE;if(cD!=null&&cD.$==1){cE=cD.$0;if(cA===cE);else{cA.replaceWith.apply(cA,[cE]);cA=cE;}}else{cA.remove();cB.disconnect();}},cz.get_View())):void 0;}});}co=[];cp=[];cq=[];cr=[];cs=new R.New$5();ct=bb.Get(cf);try{while(ct.MoveNext()){cu=ct.Current();cs.set_Item(cu.get_Name(),cu);}}finally{if(typeof ct=="object"&&"Dispose"in ct)ct.Dispose();}cg=bq.ChildrenArray(ce);N.foreachNotPreserved(ce,"[ws-hole]",function(cv){var cw,cx,cy;cy=cv.getAttribute("ws-hole");cv.removeAttribute("ws-hole");while(cv.hasChildNodes())cv.removeChild(cv.lastChild);cw=cm(cy);if(cw!=null&&cw.$==1){cx=cw.$0;be.LinkElement(cv,cx.docNode);co.push(bg.New(bx.Empty(cv),cx.docNode,null,cv,Q.Int(),null));cp.push(cx.updates);}});N.foreachNotPreserved(ce,"[ws-replace]",function(cv){var cw,cx,cy,cz,cA,cB;cw=cm(cv.getAttribute("ws-replace"));if(cw!=null&&cw.$==1){cx=cw.$0;cy=cv.parentNode;cz=self.document.createTextNode("");cy.replaceChild(cz,cv);cA=be.InsertBeforeDelim(cz,cx.docNode);cB=n.tryFindIndex(function(cC){return cv===cC;},cg);cB==null?void 0:n.set(cg,cB.$0,cx.docNode);co.push(bg.New(bx.Empty(cy),cx.docNode,{$:1,$0:[cA,cz]},cy,Q.Int(),null));cp.push(cx.updates);}});ch=false;N.foreachNotPreserved(ce,"slot",function(cv){var cw,cx,cy,cz;cy=cv.getAttribute("name");cz=cy==""||cy==null?"default":cy.toLowerCase();if(ch&&cz=="default"||!s.Equals(ce.parentElement,null))void 0;else{while(cv.hasChildNodes())cv.removeChild(cv.lastChild);if(cz=="default")ch=true;cw=cm(cz);if(cw!=null&&cw.$==1){cx=cw.$0;be.LinkElement(cv,cx.docNode);co.push(bg.New(bx.Empty(cv),cx.docNode,null,cv,Q.Int(),null));cp.push(cx.updates);}}});N.foreachNotPreserved(ce,"[ws-attr]",function(cv){var cw,cx,cy,cz;cw=cv.getAttribute("ws-attr");cv.removeAttribute("ws-attr");cx=(cy=null,[cs.TryGetValue(cw,{get:function(){return cy;},set:function(cA){cy=cA;}}),cy]);if(cx[0]){cz=cx[1];cz instanceof bz?cl(cv,cz.get_Value()):ca.warn("Attribute hole filled with non-attribute data",cw);}});N.foreachNotPreserved(ce,"[ws-on]",function(cv){cl(cv,bC.Concat(n.choose(function(cw){var cx,cy,cz,cA;cx=bH.SplitChars(cw,[":"],1);cy=(cz=null,[cs.TryGetValue(n.get(cx,1),{get:function(){return cz;},set:function(cB){cz=cB;}}),cz]);return cy[0]?(cA=cy[1],cA instanceof bA?{$:1,$0:bB.Handler(n.get(cx,0),cA.get_Value())}:cA instanceof C?{$:1,$0:bC.Handler(n.get(cx,0),cA.get_Value())}:(ca.warn("Event hole on"+n.get(cx,0)+" filled with non-event data",n.get(cx,1)),null)):null;},bH.SplitChars(cv.getAttribute("ws-on"),[" "],1))));cv.removeAttribute("ws-on");});N.foreachNotPreserved(ce,"[ws-onafterrender]",function(cv){var cw,cx,cy,cz;cw=cv.getAttribute("ws-onafterrender");cx=(cy=null,[cs.TryGetValue(cw,{get:function(){return cy;},set:function(cA){cy=cA;}}),cy]);if(cx[0]){cz=cx[1];cz instanceof bD?(cv.removeAttribute("ws-onafterrender"),cl(cv,bB.OnAfterRender(cz.get_Value()))):cz instanceof bE?(cv.removeAttribute("ws-onafterrender"),cl(cv,bB.OnAfterRender(cz.get_Value()))):ca.warn("onafterrender hole filled with non-onafterrender data",cw);}});N.foreachNotPreserved(ce,"[ws-var]",function(cv){var cw,cx,cy;cw=cv.getAttribute("ws-var");cv.removeAttribute("ws-var");cx=(cy=null,[cs.TryGetValue(cw,{get:function(){return cy;},set:function(cz){cy=cz;}}),cy]);if(cx[0])cx[1].AddAttribute(function(cz){return function(cA){return cl(cz,cA);};},cv);});N.foreachNotPreserved(ce,"[ws-attr-holes]",function(cv){var cw,cx,cy,cz;cw=new a.RegExp(N.TextHoleRE(),"g");cx=bH.SplitChars(cv.getAttribute("ws-attr-holes"),[" "],1);cv.removeAttribute("ws-attr-holes");for(cy=0,cz=cx.length-1;cy<=cz;cy++)(function(){var cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM;cJ=n.get(cx,cy);cK=cv.getAttribute(cJ);cA=null;cB=0;cL=[];while(cA=cw.exec(cK),cA!==null){cM=bp.string(cK,{$:1,$0:cB},{$:1,$0:cw.lastIndex-n.get(cA,0).length-1});cB=cw.lastIndex;cL.push([cM,n.get(cA,1)]);}cD=bp.string(cK,{$:1,$0:cB},null);cw.lastIndex=0;cE=n.foldBack(function(cN,cO){return(function(cP){var cQ,cR;cQ=cP[0];cR=cP[1];return function(cS){var cT,cU,cV,cW,cX;cT=cS[0];cU=cS[1];cV=(cW=(cX=null,[cs.TryGetValue(cR,{get:function(){return cX;},set:function(cY){cX=cY;}}),cX]),cW[0]?cW[1].get_AsChoiceView():{$:0,$0:""});return cV.$==1?[cQ,new bG({$:1,$0:cT==""?cV.$0:_6.Map(function(cY){return cY+cT;},cV.$0),$1:cU})]:[cQ+cV.$0+cT,cU];};}(cN))(cO);},cL,[cD,bG.Empty]);return cl(cv,cE[1].$==1?cE[1].$1.$==1?cE[1].$1.$1.$==1?cE[1].$1.$1.$1.$==0?(cF=cE[0],bB.Dynamic(cJ,_6.Map3(function(cN,cO,cP){return cF+cN+cO+cP;},cE[1].$0,cE[1].$1.$0,cE[1].$1.$1.$0))):(cG=cE[0],bB.Dynamic(cJ,_6.Map(function(cN){return cG+bH.concat("",cN);},_6.Sequence(cE[1])))):(cH=cE[0],bB.Dynamic(cJ,_6.Map2(function(cN,cO){return cH+cN+cO;},cE[1].$0,cE[1].$1.$0))):cE[0]==""?bB.Dynamic(cJ,cE[1].$0):(cI=cE[0],bB.Dynamic(cJ,_6.Map(function(cN){return cI+cN;},cE[1].$0))):bC.Create(cJ,cE[0]));}());});return[cb.DeleteEmptyFields({Els:cg,Dirty:true,Holes:co,Attrs:cq,Render:(ci=cr.length==0?{$:1,$0:function(){cn();}}:{$:1,$0:function(cv){cn();n.iter(function(cw){cw(cv);},cr);}},ci?ci.$0:void 0),El:(cj=!s.Equals(cg,null)&&cg.length===1&&(n.get(cg,0)instanceof S&&(n.get(cg,0)instanceof bn&&(ck=n.get(cg,0),true)))?{$:1,$0:ck}:null,cj?cj.$0:void 0)},["Render","El"]),bI.TreeReduce(_6.Const(),_6.Map2Unit,cp)];};N.GlobalHoles=function(){bd.$cctor();return bd.GlobalHoles;};N.foreachNotPreserved=function(ce,cf,cg){bq.IterSelector(ce,cf,function(ch){if(ch.closest("[ws-preserve]")==null)cg(ch);});};N.PrepareSingleTemplate=function(ce,cf,cg){var ch;ch=N.FakeRootSingle(cg);return function(ci){N.PrepareTemplateStrict(ce,cf,ch,ci);};};N.foreachNotPreservedwsDOM=function(ce,cf){bq.IterSelectorDoc(ce,function(cg){if(cg.closest("[ws-preserve]")==null)cf(cg);});};N.TextHoleRE=function(){bd.$cctor();return bd.TextHoleRE;};O=g.Doc=cb.Class({},f,O);O.RunById=function(ce,cf){var cg;cg=self.document.getElementById(ce);if(s.Equals(cg,null))i.FailWith("invalid id: "+ce);else O.Run(cg,cf);};O.Run=function(ce,cf){be.LinkElement(ce,cf.docNode);O.RunInPlace(false,ce,cf);};O.get_Empty=function(){return O.Mk(null,_6.Const());};O.RunInPlace=function(ce,cf,cg){var ch;ch=be.CreateRunState(cf,cg.docNode);_6.Sink(bs.get_UseAnimations()||bt.BatchUpdatesEnabled()?bu.StartProcessor(be.PerformAnimatedUpdate(ce,ch,cg.docNode)):function(){be.PerformSyncUpdate(ce,ch,cg.docNode);},cg.updates);};O.Mk=function(ce,cf){return new O.New(ce,cf);};O.TextNode=function(ce){return O.Mk({$:5,$0:self.document.createTextNode(ce)},_6.Const());};O.TextView=function(ce){var cf;cf=be.CreateTextNode();return O.Mk({$:4,$0:cf},_6.Map(function(cg){be.UpdateTextNode(cf,cg);},ce));};O.New=cb.Ctor(function(ce,cf){f.New.call(this);this.docNode=ce;this.updates=cf;},O);Q.Int=function(){Q.set_counter(Q.counter()+1);return Q.counter();};Q.set_counter=function(ce){bf.$cctor();bf.counter=ce;};Q.counter=function(){bf.$cctor();return bf.counter;};R=K.Dictionary=cb.Class({set_Item:function(ce,cf){this.set(ce,cf);},set:function(ce,cf){var cg,ch,ci,cj;cg=this;ch=this.hash(ce);ci=this.data[ch];if(ci==null){this.count=this.count+1;this.data[ch]=new a.Array({K:ce,V:cf});}else{cj=n.tryFindIndex(function(ck){return cg.equals.apply(null,[(i.KeyValue(ck))[0],ce]);},ci);cj==null?(this.count=this.count+1,ci.push({K:ce,V:cf})):ci[cj.$0]={K:ce,V:cf};}},TryGetValue:function(ce,cf){var cg,ch,ci;cg=this;ch=this.data[this.hash(ce)];return ch==null?false:(ci=n.tryPick(function(cj){var ck;ck=i.KeyValue(cj);return cg.equals.apply(null,[ck[0],ce])?{$:1,$0:ck[1]}:null;},ch),ci!=null&&ci.$==1&&(cf.set(ci.$0),true));},ContainsKey:function(ce){var cf,cg;cf=this;cg=this.data[this.hash(ce)];return cg==null?false:n.exists(function(ch){return cf.equals.apply(null,[(i.KeyValue(ch))[0],ce]);},cg);},RemoveKey:function(ce){return this.remove(ce);},Keys:function(){return new br.New(this);},GetEnumerator:function(){return bb.Get0(n.concat(J.GetFieldValues(this.data)));},Values:function(){return new bK.New(this);},remove:function(ce){var cf,cg,ch,ci;cf=this;cg=this.hash(ce);ch=this.data[cg];return ch==null?false:(ci=n.filter(function(cj){return!cf.equals.apply(null,[(i.KeyValue(cj))[0],ce]);},ch),n.length(ci)<ch.length&&(this.count=this.count-1,this.data[cg]=ci,true));},Item:function(ce){return this.get(ce);},get:function(ce){var cf,cg;cf=this;cg=this.data[this.hash(ce)];return cg==null?ba.notPresent():n.pick(function(ch){var ci;ci=i.KeyValue(ch);return cf.equals.apply(null,[ci[0],ce])?{$:1,$0:ci[1]}:null;},cg);}},f,R);R.New$5=cb.Ctor(function(){R.New$6.call(this,[],s.Equals,s.Hash);},R);R.New$6=cb.Ctor(function(ce,cf,cg){var ch,ci;f.New.call(this);this.equals=cf;this.hash=cg;this.count=0;this.data=[];ch=bb.Get(ce);try{while(ch.MoveNext()){ci=ch.Current();this.set(ci.K,ci.V);}}finally{if(typeof ch=="object"&&"Dispose"in ch)ch.Dispose();}},R);U.New=function(ce,cf){return{k:ce,ct:cf};};W.New=function(ce,cf){return{c:ce,r:cf};};X=K.HashSet=cb.Class({SAdd:function(ce){return this.add(ce);},Contains:function(ce){var cf;cf=this.data[this.hash(ce)];return cf==null?false:this.arrContains(ce,cf);},add:function(ce){var cf,cg;cf=this.hash(ce);cg=this.data[cf];return cg==null?(this.data[cf]=[ce],this.count=this.count+1,true):this.arrContains(ce,cg)?false:(cg.push(ce),this.count=this.count+1,true);},arrContains:function(ce,cf){var cg,ch,ci,cj;cg=true;ch=0;cj=cf.length;while(cg&&ch<cj)if(this.equals.apply(null,[cf[ch],ce]))cg=false;else ch=ch+1;return!cg;},GetEnumerator:function(){return bb.Get(bR.concat(this.data));},ExceptWith:function(ce){var cf;cf=bb.Get(ce);try{while(cf.MoveNext())this.Remove(cf.Current());}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}},Count:function(){return this.count;},IntersectWith:function(ce){var cf,cg,ch,ci,cj;cf=new X.New$4(ce,this.equals,this.hash);cg=bR.concat(this.data);for(ch=0,ci=cg.length-1;ch<=ci;ch++){cj=cg[ch];if(!cf.Contains(cj))this.Remove(cj);}},Remove:function(ce){var cf;cf=this.data[this.hash(ce)];return cf==null?false:this.arrRemove(ce,cf)&&(this.count=this.count-1,true);},CopyTo:function(ce,cf){var cg,ch,ci;cg=bR.concat(this.data);for(ch=0,ci=cg.length-1;ch<=ci;ch++)n.set(ce,ch+cf,cg[ch]);},arrRemove:function(ce,cf){var cg,ch,ci,cj;cg=true;ch=0;cj=cf.length;while(cg&&ch<cj)if(this.equals.apply(null,[cf[ch],ce])){cf.splice.apply(cf,[ch,1]);cg=false;}else ch=ch+1;return!cg;}},f,X);X.New$3=cb.Ctor(function(){X.New$4.call(this,[],s.Equals,s.Hash);},X);X.New$4=cb.Ctor(function(ce,cf,cg){var ch;f.New.call(this);this.equals=cf;this.hash=cg;this.data=[];this.count=0;ch=bb.Get(ce);try{while(ch.MoveNext())this.add(ch.Current());}finally{if(typeof ch=="object"&&"Dispose"in ch)ch.Dispose();}},X);X.New$2=cb.Ctor(function(ce){X.New$4.call(this,ce,s.Equals,s.Hash);},X);Y.append=function(ce,cf){return{GetEnumerator:function(){var cg,ch;cg=bb.Get(ce);ch=[true];return new bc.New(cg,null,function(ci){var cj;return ci.s.MoveNext()?(ci.c=ci.s.Current(),true):(cj=ci.s,!s.Equals(cj,null)?cj.Dispose():void 0,ci.s=null,ch[0]&&(ch[0]=false,ci.s=bb.Get(cf),ci.s.MoveNext()?(ci.c=ci.s.Current(),true):(ci.s.Dispose(),ci.s=null,false)));},function(ci){var cj;cj=ci.s;if(!s.Equals(cj,null))cj.Dispose();});}};};Y.head=function(ce){var cf;cf=bb.Get(ce);try{return cf.MoveNext()?cf.Current():Y.insufficient();}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}};Y.fold=function(ce,cf,cg){var ch,ci;ch=cf;ci=bb.Get(cg);try{while(ci.MoveNext())ch=ce(ch,ci.Current());return ch;}finally{if(typeof ci=="object"&&"Dispose"in ci)ci.Dispose();}};Y.map=function(ce,cf){return{GetEnumerator:function(){var cg;cg=bb.Get(cf);return new bc.New(null,null,function(ch){return cg.MoveNext()&&(ch.c=ce(cg.Current()),true);},function(){cg.Dispose();});}};};Y.forall2=function(ce,cf,cg){return!Y.exists2(function(ch,ci){return!ce(ch,ci);},cf,cg);};Y.iter=function(ce,cf){var cg;cg=bb.Get(cf);try{while(cg.MoveNext())ce(cg.Current());}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}};Y.exists2=function(ce,cf,cg){var ch,ci,cj,ck;ch=bb.Get(cf);try{cj=bb.Get(cg);try{ck=false;while(!ck&&ch.MoveNext()&&cj.MoveNext())ck=ce(ch.Current(),cj.Current());ci=ck;}finally{if(typeof cj=="object"&&"Dispose"in cj)cj.Dispose();}return ci;}finally{if(typeof ch=="object"&&"Dispose"in ch)ch.Dispose();}};Y.unfold=function(ce,cf){return{GetEnumerator:function(){return new bc.New(cf,null,function(cg){var ch;ch=ce(cg.s);return ch==null?false:(cg.c=ch.$0[0],cg.s=ch.$0[1],true);},void 0);}};};Y.delay=function(ce){return{GetEnumerator:function(){return bb.Get(ce());}};};Y.max=function(ce){var cf,cg,ch;cf=bb.Get(ce);try{if(!cf.MoveNext())Y.seqEmpty();cg=cf.Current();while(cf.MoveNext()){ch=cf.Current();if(s.Compare(ch,cg)===1)cg=ch;}return cg;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}};Y.init=function(ce,cf){return Y.take(ce,Y.initInfinite(cf));};Y.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};Y.forall=function(ce,cf){return!Y.exists(function(cg){return!ce(cg);},cf);};Y.take=function(ce,cf){ce<0?Y.nonNegative():void 0;return{GetEnumerator:function(){var cg;cg=[bb.Get(cf)];return new bc.New(0,null,function(ch){var ci;ch.s=ch.s+1;return ch.s>ce?false:(ci=cg[0],s.Equals(ci,null)?Y.insufficient():ci.MoveNext()?(ch.c=ci.Current(),ch.s===ce?(ci.Dispose(),cg[0]=null):void 0,true):(ci.Dispose(),cg[0]=null,Y.insufficient()));},function(){var ch;ch=cg[0];if(!s.Equals(ch,null))ch.Dispose();});}};};Y.initInfinite=function(ce){return{GetEnumerator:function(){return new bc.New(0,null,function(cf){cf.c=ce(cf.s);cf.s=cf.s+1;return true;},void 0);}};};Y.exists=function(ce,cf){var cg,ch;cg=bb.Get(cf);try{ch=false;while(!ch&&cg.MoveNext())ch=ce(cg.Current());return ch;}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}};Y.compareWith=function(ce,cf,cg){var ch,ci,cj,ck,cl;ch=bb.Get(cf);try{cj=bb.Get(cg);try{ck=0;cl=true;while(cl&&ck===0)if(ch.MoveNext())ck=cj.MoveNext()?ce(ch.Current(),cj.Current()):1;else if(cj.MoveNext())ck=-1;else cl=false;ci=ck;}finally{if(typeof cj=="object"&&"Dispose"in cj)cj.Dispose();}return ci;}finally{if(typeof ch=="object"&&"Dispose"in ch)ch.Dispose();}};n.choose=function(ce,cf){var cg,ch,ci,cj;cg=[];for(ch=0,ci=cf.length-1;ch<=ci;ch++){cj=ce(cf[ch]);if(cj==null);else cg.push(cj.$0);}return cg;};n.tryFindIndex=function(ce,cf){var cg,ch;cg=null;ch=0;while(ch<cf.length&&cg==null){ce(cf[ch])?cg={$:1,$0:ch}:void 0;ch=ch+1;}return cg;};n.tryPick=function(ce,cf){var cg,ch,ci;cg=null;ch=0;while(ch<cf.length&&cg==null){ci=ce(cf[ch]);if(ci!=null&&ci.$==1)cg=ci;ch=ch+1;}return cg;};n.exists=function(ce,cf){var cg,ch,ci,cj;cg=false;ch=0;cj=n.length(cf);while(!cg&&ch<cj)if(ce(cf[ch]))cg=true;else ch=ch+1;return cg;};n.concat=function(ce){return a.Array.prototype.concat.apply([],n.ofSeq(ce));};n.iter=function(ce,cf){var cg,ch;for(cg=0,ch=cf.length-1;cg<=ch;cg++)ce(cf[cg]);};n.foldBack=function(ce,cf,cg){var ch,ci,cj,ck,cl;ch=cg;cj=cf.length;for(ck=1,cl=cj;ck<=cl;ck++)ch=ce(cf[cj-ck],ch);return ch;};n.map=function(ce,cf){var cg,ch,ci;cg=new a.Array(cf.length);for(ch=0,ci=cf.length-1;ch<=ci;ch++)cg[ch]=ce(cf[ch]);return cg;};n.filter=function(ce,cf){var cg,ch,ci;cg=[];for(ch=0,ci=cf.length-1;ch<=ci;ch++)if(ce(cf[ch]))cg.push(cf[ch]);return cg;};n.ofSeq=function(ce){var cf,cg;if(ce instanceof a.Array)return ce.slice();else if(ce instanceof bG)return n.ofList(ce);else{cf=[];cg=bb.Get(ce);try{while(cg.MoveNext())cf.push(cg.Current());return cf;}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}}};n.pick=function(ce,cf){var cg;cg=n.tryPick(ce,cf);return cg==null?i.FailWith("KeyNotFoundException"):cg.$0;};n.ofList=function(ce){var cf,cg;cg=[];cf=ce;while(!(cf.$==0)){cg.push(bF.head(cf));cf=bF.tail(cf);}return cg;};n.forall=function(ce,cf){var cg,ch,ci,cj;cg=true;ch=0;cj=n.length(cf);while(cg&&ch<cj)if(ce(cf[ch]))ch=ch+1;else cg=false;return cg;};n.create=function(ce,cf){var cg,ch,ci;cg=new a.Array(ce);for(ch=0,ci=ce-1;ch<=ci;ch++)cg[ch]=cf;return cg;};n.init=function(ce,cf){var cg,ch,ci;if(ce<0)i.FailWith("Negative size given.");else null;cg=new a.Array(ce);for(ch=0,ci=ce-1;ch<=ci;ch++)cg[ch]=cf(ch);return cg;};Z.$cctor=function(){Z.$cctor=a.ignore;Z.initialized=new R.New$5();};Z=l.TemplateInitializer=cb.Class({},f,Z);Z.GetOrAddHoleFor=function(ce,cf,cg){var ch,ci,cj,ck;Z.$cctor();ch=Z.GetHolesFor(ce);ci=(cj=null,[ch.TryGetValue(cf,{get:function(){return cj;},set:function(cl){cj=cl;}}),cj]);return ci[0]?ci[1]:(ck=cg(),(ch.set_Item(cf,ck),ck));};Z.GetHolesFor=function(ce){var cf,cg,ch;Z.$cctor();cf=(cg=null,[Z.initialized.TryGetValue(ce,{get:function(){return cg;},set:function(ci){cg=ci;}}),cg]);return cf[0]?cf[1]:(ch=new R.New$5(),(Z.initialized.set_Item(ce,ch),ch));};_0=w.VarStr=cb.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith.get_View()};},AddAttribute:function(ce,cf){(ce(cf))(bB.Value(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_6.Map(a.String,this.fillWith.get_View())};}},p,_0);_0.New=cb.Ctor(function(ce,cf){p.New.call(this);this.name=ce;this.fillWith=cf;},_0);_1=w.VarFloatUnchecked=cb.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:_6.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(ce,cf){(ce(cf))(bB.FloatValueUnchecked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_6.Map(a.String,this.fillWith.get_View())};}},p,_1);_1.New=cb.Ctor(function(ce,cf){p.New.call(this);this.name=ce;this.fillWith=cf;},_1);_2=w.VarBool=cb.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:_6.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(ce,cf){(ce(cf))(bB.Checked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_6.Map(a.String,this.fillWith.get_View())};}},p,_2);_2.New=cb.Ctor(function(ce,cf){p.New.call(this);this.name=ce;this.fillWith=cf;},_2);_3=w.VarDateTime=cb.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:_6.Map(function(ce){return(new a.Date(ce)).toLocaleString();},this.fillWith.get_View())};},AddAttribute:function(ce,cf){(ce(cf))(bB.DateTimeValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_6.Map(function(ce){return(new a.Date(ce)).toLocaleString();},this.fillWith.get_View())};}},p,_3);_3.New=cb.Ctor(function(ce,cf){p.New.call(this);this.name=ce;this.fillWith=cf;},_3);_4=w.VarFile=cb.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:_6.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(ce,cf){(ce(cf))(bB.FileValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_6.Map(a.String,this.fillWith.get_View())};}},p,_4);_4.New=cb.Ctor(function(ce,cf){p.New.call(this);this.name=ce;this.fillWith=cf;},_4);_5=w.VarDomElement=cb.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},p,_5);_5.New=cb.Ctor(function(ce,cf){p.New.call(this);this.name=ce;this.fillWith=cf;},_5);v.Obsolete=function(ce){var cf,cg,ch,ci,cj;cg=ce.s;if(cg==null||(cg!=null&&cg.$==2?(cf=cg.$1,false):cg!=null&&cg.$==3?(cf=cg.$1,false):true))void 0;else{ce.s=null;for(ch=0,ci=n.length(cf)-1;ch<=ci;ch++){cj=n.get(cf,ch);if(typeof cj=="object")(function(ck){v.Obsolete(ck);}(cj));else cj();}}};v.New=function(ce){return{s:ce};};_6=g.View=cb.Class({},null,_6);_7.TryParseInt32=function(ce,cf){return _7.TryParse(ce,-2147483648,2147483647,cf);};_8=F.Scheduler=cb.Class({Fork:function(ce){var cf;cf=this;this.robin.push(ce);if(this.idle){this.idle=false;a.setTimeout(function(){cf.tick();},0);}},tick:function(){var ce,cf,cg;cf=this;cg=cd.now();ce=true;while(ce)if(this.robin.length===0){this.idle=true;ce=false;}else{(this.robin.shift())();cd.now()-cg>40?(a.setTimeout(function(){cf.tick();},0),ce=false):void 0;}}},f,_8);_8.New=cb.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},_8);_=D.NonStandardPromiseRejectionException=cb.Class({},_9,_);_.New=cb.Ctor(function(ce){this.message="Promise rejected";T.setPrototypeOf(this,_.prototype);this.reason=ce;},_);$.$cctor=function(){$.$cctor=a.ignore;$.noneCT=W.New(false,[]);$.scheduler=new _8.New();$.defCTS=[new bk.New()];$.Zero=F.Return();$.GetCT=function(ce){ce.k({$:0,$0:ce.ct});};};ba.notPresent=function(){throw new bW.New();};bb.Get=function(ce){return ce instanceof a.Array?bb.ArrayEnumerator(ce):s.Equals(typeof ce,"string")?bb.StringEnumerator(ce):ce.GetEnumerator();};bb.ArrayEnumerator=function(ce){return new bc.New(0,null,function(cf){var cg;cg=cf.s;return cg<n.length(ce)&&(cf.c=n.get(ce,cg),cf.s=cg+1,true);},void 0);};bb.StringEnumerator=function(ce){return new bc.New(0,null,function(cf){var cg;cg=cf.s;return cg<ce.length&&(cf.c=ce[cg],cf.s=cg+1,true);},void 0);};bb.Get0=function(ce){return ce instanceof a.Array?bb.ArrayEnumerator(ce):s.Equals(typeof ce,"string")?bb.StringEnumerator(ce):"GetEnumerator0"in ce?ce.GetEnumerator0():ce.GetEnumerator();};bc=bb.T=cb.Class({MoveNext:function(){var ce;ce=this.n(this);this.e=ce?1:2;return ce;},Current:function(){return this.e===1?this.c:this.e===0?i.FailWith("Enumeration has not started. Call MoveNext."):i.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},f,bc);bc.New=cb.Ctor(function(ce,cf,cg,ch){f.New.call(this);this.s=ce;this.c=cf;this.n=cg;this.d=ch;this.e=0;},bc);bd.$cctor=function(){bd.$cctor=a.ignore;bd.LoadedTemplates=new R.New$5();bd.LocalTemplatesLoaded=false;bd.GlobalHoles=new R.New$5();bd.TextHoleRE="\\${([^}]+)}";bd.RenderedFullDocTemplate=null;};be.LinkElement=function(ce,cf){be.InsertDoc(ce,cf,null);};be.InsertDoc=function(ce,cf,cg){var ch,ci,cj;while(true)if(cf!=null&&cf.$==1)return be.InsertNode(ce,cf.$0.El,cg);else if(cf!=null&&cf.$==2){ch=cf.$0;ch.Dirty=false;cf=ch.Current;}else if(cf==null)return cg;else if(cf!=null&&cf.$==4)return be.InsertNode(ce,cf.$0.Text,cg);else if(cf!=null&&cf.$==5)return be.InsertNode(ce,cf.$0,cg);else if(cf!=null&&cf.$==6)return n.foldBack(function(ck,cl){return(((cb.Curried3(function(cm,cn,co){return cn==null||cn.constructor===T?be.InsertDoc(cm,cn,co):be.InsertNode(cm,cn,co);}))(ce))(ck))(cl);},cf.$0.Els,cg);else{ci=cf.$1;cj=cf.$0;cf=cj;cg=be.InsertDoc(ce,ci,cg);}};be.CreateRunState=function(ce,cf){return bM.New(bN.get_Empty(),be.CreateElemNode(ce,bx.EmptyAttr(),cf));};be.PerformAnimatedUpdate=function(ce,cf,cg){var ch;return bs.get_UseAnimations()?(ch=null,F.Delay(function(){var ci,cj,ck;ci=bN.FindAll(cg);cj=be.ComputeChangeAnim(cf,ci);ck=be.ComputeEnterAnim(cf,ci);return F.Bind(bs.Play(bs.Append(cj,be.ComputeExitAnim(cf,ci))),function(){return F.Bind(be.SyncElemNodesNextFrame(ce,cf),function(){return F.Bind(bs.Play(ck),function(){cf.PreviousNodes=ci;return F.Return(null);});});});})):be.SyncElemNodesNextFrame(ce,cf);};be.PerformSyncUpdate=function(ce,cf,cg){var ch;ch=bN.FindAll(cg);be.SyncElemNode(ce,cf.Top);cf.PreviousNodes=ch;};be.InsertBeforeDelim=function(ce,cf){var cg,ch;cg=ce.parentNode;ch=self.document.createTextNode("");cg.insertBefore(ch,ce);be.LinkPrevElement(ce,cf);return ch;};be.InsertNode=function(ce,cf,cg){bq.InsertAt(ce,cg,cf);return cf;};be.CreateElemNode=function(ce,cf,cg){var ch;be.LinkElement(ce,cg);ch=bx.Insert(ce,cf);return bg.New(ch,cg,null,ce,Q.Int(),cb.GetOptional(ch.OnAfterRender));};be.SyncElemNodesNextFrame=function(ce,cf){function cg(ch){a.requestAnimationFrame(function(){be.SyncElemNode(ce,cf.Top);ch();});}return bt.BatchUpdatesEnabled()?F.FromContinuations(function(ch,ci,cj){return cg.apply(null,[ch,ci,cj]);}):(be.SyncElemNode(ce,cf.Top),F.Return(null));};be.ComputeExitAnim=function(ce,cf){return bs.Concat(n.map(function(cg){return bx.GetExitAnim(cg.Attr);},bN.ToArray(bN.Except(cf,bN.Filter(function(cg){return bx.HasExitAnim(cg.Attr);},ce.PreviousNodes)))));};be.ComputeEnterAnim=function(ce,cf){return bs.Concat(n.map(function(cg){return bx.GetEnterAnim(cg.Attr);},bN.ToArray(bN.Except(ce.PreviousNodes,bN.Filter(function(cg){return bx.HasEnterAnim(cg.Attr);},cf)))));};be.ComputeChangeAnim=function(ce,cf){var cg;function ch(ci){return bx.HasChangeAnim(ci.Attr);}cg=function(ci){return bN.Filter(ch,ci);};return bs.Concat(n.map(function(ci){return bx.GetChangeAnim(ci.Attr);},bN.ToArray(bN.Intersect(cg(ce.PreviousNodes),cg(cf)))));};be.SyncElemNode=function(ce,cf){!ce?be.SyncElement(cf):void 0;be.Sync(cf.Children);be.AfterRender(cf);};be.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};be.UpdateTextNode=function(ce,cf){ce.Value=cf;ce.Dirty=true;};be.LinkPrevElement=function(ce,cf){be.InsertDoc(ce.parentNode,cf,ce);};be.SyncElement=function(ce){function cf(cg){function ch(ci){var cj,ck,cl,cm;while(true){if(ci!=null&&ci.$==0){ck=ci.$1;cl=ci.$0;if(ch(cl))return true;else ci=ck;}else if(ci!=null&&ci.$==2){cm=ci.$0;if(cm.Dirty)return true;else ci=cm.Current;}else return ci!=null&&ci.$==6&&(cj=ci.$0,cj.Dirty||n.exists(cf,cj.Holes));}}return ch(cg.Children);}bx.Sync(ce.El,ce.Attr);if(cf(ce))be.DoSyncElement(ce);};be.Sync=function(ce){var cf,cg,ch,ci,cj;while(true){if(ce!=null&&ce.$==1)return be.SyncElemNode(false,ce.$0);else if(ce!=null&&ce.$==2){ch=ce.$0;ce=ch.Current;}else if(ce==null)return null;else if(ce!=null&&ce.$==5)return null;else if(ce!=null&&ce.$==4){cf=ce.$0;return cf.Dirty?(cf.Text.nodeValue=cf.Value,cf.Dirty=false):null;}else if(ce!=null&&ce.$==6){cg=ce.$0;n.iter(function(ck){be.SyncElemNode(false,ck);},cg.Holes);n.iter(function(ck){bx.Sync(ck[0],ck[1]);},cg.Attrs);return be.AfterRender(cg);}else{ci=ce.$1;cj=ce.$0;be.Sync(cj);ce=ci;}}};be.AfterRender=function(ce){var cf;cf=cb.GetOptional(ce.Render);if(cf!=null&&cf.$==1){cf.$0(ce.El);cb.SetOptional(ce,"Render",null);}};be.DoSyncElement=function(ce){var cf,cg,ch;function ci(cj,ck){var cl,cm,cn,co;while(true){if(cj!=null&&cj.$==1)return cj.$0.El;else if(cj!=null&&cj.$==2){cm=cj.$0;if(cm.Dirty){cm.Dirty=false;return be.InsertDoc(cf,cm.Current,ck);}else cj=cm.Current;}else if(cj==null)return ck;else if(cj!=null&&cj.$==4)return cj.$0.Text;else if(cj!=null&&cj.$==5)return cj.$0;else if(cj!=null&&cj.$==6){cl=cj.$0;cl.Dirty?cl.Dirty=false:void 0;return n.foldBack(function(cp,cq){return cp==null||cp.constructor===T?ci(cp,cq):cp;},cl.Els,ck);}else{cn=cj.$1;co=cj.$0;cj=co;ck=ci(cn,ck);}}}cf=ce.El;b3.Iter((cg=ce.El,function(cj){bq.RemoveNode(cg,cj);}),b3.Except(b3.DocChildren(ce),b3.Children(ce.El,cb.GetOptional(ce.Delimiters))));ci(ce.Children,(ch=cb.GetOptional(ce.Delimiters),ch!=null&&ch.$==1?ch.$0[1]:null));};bf.$cctor=function(){bf.$cctor=a.ignore;bf.counter=0;};bg=g.DocElemNode=cb.Class({Equals:function(ce){return this.ElKey===ce.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bg);bg.New=function(ce,cf,cg,ch,ci,cj){var ck;return new bg((ck={Attr:ce,Children:cf,El:ch,ElKey:ci},(cb.SetOptional(ck,"Delimiters",cg),cb.SetOptional(ck,"Render",cj),ck)));};bi=b.OperationCanceledException=cb.Class({},_9,bi);bi.New=cb.Ctor(function(ce){bi.New$1.call(this,"The operation was canceled.",null,ce);},bi);bi.New$1=cb.Ctor(function(ce,cf,cg){this.message=ce;this.inner=cf;T.setPrototypeOf(this,bi.prototype);this.ct=cg;},bi);bj=K.Pair=cb.Class({Equals:function(ce){return s.Equals(this.Key,ce.Key);},GetHashCode:function(){return s.Hash(this.Key);},CompareTo0:function(ce){return s.Compare(this.Key,ce.Key);}},null,bj);bk=b.CancellationTokenSource=cb.Class({},f,bk);bk.New=cb.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bk);bm=g.Elt=cb.Class({},O,bm);bm.TreeNode=function(ce,cf){var cg,ch;function ci(cj,ck){return bx.Updates(ck);}cg=bJ.Create(cf);return new bm.New$1({$:6,$0:ce},_6.Map2Unit((ch=n.map(function(cj){return ci(cj[0],cj[1]);},ce.Attrs),bI.TreeReduce(_6.Const(),_6.Map2Unit,ch)),cg.v),n.get(ce.Els,0),cg);};bm.New$1=cb.Ctor(function(ce,cf,cg,ch){O.New.call(this,ce,cf);this.docNode$1=ce;this.updates$1=cf;this.elt=cg;this.rvUpdates=ch;},bm);_6.Const=function(ce){var cf;cf=v.New({$:0,$0:ce});return function(){return cf;};};_6.Sink=function(ce,cf){function cg(){v.WhenRun(cf(),ce,function(){F.scheduler().Fork(cg);});}F.scheduler().Fork(cg);};_6.Map=function(ce,cf){return _6.CreateLazy(function(){return v.Map(ce,cf());});};_6.Map3=function(ce,cf,cg,ch){return _6.CreateLazy(function(){return v.Map3(ce,cf(),cg(),ch());});};_6.Sequence=function(ce){return _6.CreateLazy(function(){return v.Sequence(Y.map(function(cf){return cf();},ce));});};_6.Map2=function(ce,cf,cg){return _6.CreateLazy(function(){return v.Map2(ce,cf(),cg());});};_6.Map2Unit=function(ce,cf){return _6.CreateLazy(function(){return v.Map2Unit(ce(),cf());});};_6.CreateLazy=function(ce){var cf;cf={c:null,o:ce};return function(){var cg,ch;cg=cf.c;return cg===null?(cg=cf.o(),cf.c=cg,(ch=cg.s,ch!=null&&ch.$==0)?cf.o=null:v.WhenObsoleteRun(cg,function(){cf.c=null;}),cg):cg;};};bo.convertTextNode=function(ce){var cf,cg,ch,ci,cj,ck;cf=null;cg=0;ci=ce.textContent;cj=new a.RegExp(N.TextHoleRE(),"g");while(cf=cj.exec(ci),cf!==null){ce.parentNode.insertBefore(self.document.createTextNode(bp.string(ci,{$:1,$0:cg},{$:1,$0:cj.lastIndex-n.get(cf,0).length-1})),ce);cg=cj.lastIndex;ck=self.document.createElement("span");ck.setAttribute("ws-replace",n.get(cf,1).toLowerCase());ce.parentNode.insertBefore(ck,ce);}cj.lastIndex=0;ce.textContent=bp.string(ci,{$:1,$0:cg},null);};bo.failNotLoaded=function(ce){ca.warn("Instantiating non-loaded template",ce);};bo.fillTextHole=function(ce,cf,cg){var ch;ch=ce.querySelector("[ws-replace]");return s.Equals(ch,null)?(ca.warn("Filling non-existent text hole",cg),null):(ch.parentNode.replaceChild(self.document.createTextNode(cf),ch),{$:1,$0:ch.getAttribute("ws-replace")});};bo.removeHolesExcept=function(ce,cf){function cg(ch){N.foreachNotPreserved(ce,"["+ch+"]",function(ci){if(!cf.Contains(ci.getAttribute(ch)))ci.removeAttribute(ch);});}cg("ws-attr");cg("ws-onafterrender");cg("ws-var");N.foreachNotPreserved(ce,"[ws-hole]",function(ch){if(!cf.Contains(ch.getAttribute("ws-hole"))){ch.removeAttribute("ws-hole");while(ch.hasChildNodes())ch.removeChild(ch.lastChild);}});N.foreachNotPreserved(ce,"[ws-replace]",function(ch){if(!cf.Contains(ch.getAttribute("ws-replace")))ch.parentNode.removeChild(ch);});N.foreachNotPreserved(ce,"[ws-on]",function(ch){ch.setAttribute("ws-on",bH.concat(" ",n.filter(function(ci){return cf.Contains(n.get(bH.SplitChars(ci,[":"],1),1));},bH.SplitChars(ch.getAttribute("ws-on"),[" "],1))));});N.foreachNotPreserved(ce,"[ws-attr-holes]",function(ch){var ci,cj,ck,cl,cm;ci=bH.SplitChars(ch.getAttribute("ws-attr-holes"),[" "],1);for(cj=0,ck=ci.length-1;cj<=ck;cj++){cl=n.get(ci,cj);ch.setAttribute(cl,(cm=new a.RegExp(N.TextHoleRE(),"g"),ch.getAttribute(cl).replace(cm,function(cn,co){return cf.Contains(co)?cn:"";})));}});};bo.fillInstanceAttrs=function(ce,cf){var cg,ch,ci,cj,ck;bo.convertAttrs(cf);cg=cf.nodeName.toLowerCase();ch=ce.querySelector("[ws-attr="+cg+"]");if(s.Equals(ch,null))ca.warn("Filling non-existent attr hole",cg);else{ch.removeAttribute("ws-attr");for(ci=0,cj=cf.attributes.length-1;ci<=cj;ci++){ck=cf.attributes.item(ci);if(ck.name=="class"&&ch.hasAttribute("class"))ch.setAttribute("class",ch.getAttribute("class")+" "+ck.nodeValue);else ch.setAttribute(ck.name,ck.nodeValue);}}};bo.mapHoles=function(ce,cf){function cg(ch){N.foreachNotPreserved(ce,"["+ch+"]",function(ci){var cj,ck;cj=(ck=null,[cf.TryGetValue(ci.getAttribute(ch).toLowerCase(),{get:function(){return ck;},set:function(cl){ck=cl;}}),ck]);if(cj[0])ci.setAttribute(ch,cj[1]);});}cg("ws-hole");cg("ws-replace");cg("ws-attr");cg("ws-onafterrender");cg("ws-var");N.foreachNotPreserved(ce,"[ws-on]",function(ch){ch.setAttribute("ws-on",bH.concat(" ",n.map(function(ci){var cj,ck,cl;cj=bH.SplitChars(ci,[":"],1);ck=(cl=null,[cf.TryGetValue(n.get(cj,1),{get:function(){return cl;},set:function(cm){cl=cm;}}),cl]);return ck[0]?n.get(cj,0)+":"+ck[1]:ci;},bH.SplitChars(ch.getAttribute("ws-on"),[" "],1))));});N.foreachNotPreserved(ce,"[ws-attr-holes]",function(ch){var ci,cj,ck;ci=bH.SplitChars(ch.getAttribute("ws-attr-holes"),[" "],1);for(cj=0,ck=ci.length-1;cj<=ck;cj++)(function(){var cl;function cm(cn,co){var cp;cp=i.KeyValue(co);return cn.replace(new a.RegExp("\\${"+cp[0]+"}","ig"),"${"+cp[1]+"}");}cl=n.get(ci,cj);return ch.setAttribute(cl,(((cb.Curried3(Y.fold))(cm))(ch.getAttribute(cl)))(cf));}());});};bo.fill=function(ce,cf,cg){while(true)if(ce.hasChildNodes())cg=cf.insertBefore(ce.lastChild,cg);else return null;};bo.convertAttrs=function(ce){var cg,ch,ci,cj,ck,cl,cm,cn;function cf(co){var cp;cp=ce.getAttribute(co);if(cp==null);else ce.setAttribute(co,cp.toLowerCase());}cg=ce.attributes;ch=[];ci=[];cj=[];for(ck=0,cl=cg.length-1;ck<=cl;ck++){cm=cg.item(ck);if(bH.StartsWith(cm.nodeName,"ws-on")&&cm.nodeName!="ws-onafterrender"&&cm.nodeName!="ws-on"){ch.push(cm.nodeName);ci.push(bp.string(cm.nodeName,{$:1,$0:"ws-on".length},null)+":"+cm.nodeValue.toLowerCase());}else!bH.StartsWith(cm.nodeName,"ws-")&&(new a.RegExp(N.TextHoleRE())).test(cm.nodeValue)?(cm.nodeValue=(cn=new a.RegExp(N.TextHoleRE(),"g"),cm.nodeValue.replace(cn,function(co,cp){return"${"+cp.toLowerCase()+"}";})),cj.push(cm.nodeName)):void 0;}if(!(ci.length==0))ce.setAttribute("ws-on",bH.concat(" ",ci));if(!(cj.length==0))ce.setAttribute("ws-attr-holes",bH.concat(" ",cj));cf("ws-hole");cf("ws-replace");cf("ws-attr");cf("ws-onafterrender");cf("ws-var");n.iter(function(co){ce.removeAttribute(co);},ch);};bp.string=function(ce,cf,cg){var ch,ci;return cf==null?cg!=null&&cg.$==1?(ch=cg.$0,ch<0?"":ce.slice(0,ch+1)):"":cg==null?ce.slice(cf.$0):(ci=cg.$0,ci<0?"":ce.slice(cf.$0,ci+1));};bq.ParseHTMLIntoFakeRoot=function(ce){var cf,cg,ch,ci,cj;function ck(cl,cm){var cn;while(true)if(cm===0)return cl;else{cn=cm;cl=cl.lastChild;cm=cn-1;}}cf=self.document.createElement("div");return!bq.rhtml().test(ce)?(cf.appendChild(self.document.createTextNode(ce)),cf):(cg=(ch=bq.rtagName().exec(ce),s.Equals(ch,null)?"":n.get(ch,1).toLowerCase()),(ci=(cj=(bq.wrapMap())[cg],cj?cj:bq.defaultWrap()),(cf.innerHTML=ci[1]+ce.replace(bq.rxhtmlTag(),"<$1></$2>")+ci[2],ck(cf,ci[0]))));};bq.ChildrenArray=function(ce){var cf,cg,ch;cf=[];for(cg=0,ch=ce.childNodes.length-1;cg<=ch;cg++)cf.push(ce.childNodes[cg]);return cf;};bq.rhtml=function(){bS.$cctor();return bS.rhtml;};bq.wrapMap=function(){bS.$cctor();return bS.wrapMap;};bq.defaultWrap=function(){bS.$cctor();return bS.defaultWrap;};bq.rxhtmlTag=function(){bS.$cctor();return bS.rxhtmlTag;};bq.rtagName=function(){bS.$cctor();return bS.rtagName;};bq.IterSelector=function(ce,cf,cg){var ch,ci,cj;ch=ce.querySelectorAll(cf);for(ci=0,cj=ch.length-1;ci<=cj;ci++)cg(ch[ci]);};bq.IterSelectorDoc=function(ce,cf){var cg,ch,ci;cg=self.document.querySelectorAll(ce);for(ch=0,ci=cg.length-1;ch<=ci;ch++)cf(cg[ch]);};bq.InsertAt=function(ce,cf,cg){var ch;if(!(cg.parentNode===ce&&cf===(ch=cg.nextSibling,s.Equals(ch,null)?null:ch)))ce.insertBefore(cg,cf);};bq.RemoveNode=function(ce,cf){if(cf.parentNode===ce)ce.removeChild(cf);};Y.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};Y.nonNegative=function(){return i.FailWith("The input must be non-negative.");};br=K.KeyCollection=cb.Class({GetEnumerator:function(){return bb.Get(Y.map(function(ce){return ce.K;},this.d));}},f,br);br.New=cb.Ctor(function(ce){f.New.call(this);this.d=ce;},br);bs.get_UseAnimations=function(){return bO.UseAnimations();};bs.Play=function(ce){var cf;cf=null;return F.Delay(function(){return F.Bind(bs.Run(a.ignore,bO.Actions(ce)),function(){bO.Finalize(ce);return F.Return(null);});});};bs.Append=function(ce,cf){return{$:0,$0:bU.Append(ce.$0,cf.$0)};};bs.Run=function(ce,cf){var cg;function ch(ci){function cj(ck){return function(cl){var cm;cm=cl-ck;cf.Compute(cm);ce();return cm<=cg?void a.requestAnimationFrame(function(cn){(cj(ck))(cn);}):ci();};}a.requestAnimationFrame(function(ck){(cj(ck))(ck);});}cg=cf.Duration;return cg===0?F.Zero():F.FromContinuations(function(ci,cj,ck){return ch.apply(null,[ci,cj,ck]);});};bs.Concat=function(ce){return{$:0,$0:bU.Concat(Y.map(bO.List,ce))};};bs.get_Empty=function(){return{$:0,$0:bU.Empty()};};bt.BatchUpdatesEnabled=function(){bP.$cctor();return bP.BatchUpdatesEnabled;};bu.StartProcessor=function(ce){var cf;function cg(){var ch;ch=null;return F.Delay(function(){return F.Bind(ce,function(){var ci;ci=cf[0];return s.Equals(ci,1)?(cf[0]=0,F.Zero()):s.Equals(ci,2)?(cf[0]=1,cg()):F.Zero();});});}cf=[0];return function(){var ch;ch=cf[0];if(s.Equals(ch,0)){cf[0]=1;F.Start(cg(),null);}else s.Equals(ch,1)?cf[0]=2:void 0;};};bw.New=function(ce,cf,cg,ch){var ci;ci={DynElem:ce,DynFlags:cf,DynNodes:cg};cb.SetOptional(ci,"OnAfterRender",ch);return ci;};bx.Insert=function(ce,cf){var cg,ch,ci;function cj(ck){var cl,cm;while(true)if(!(ck===null)){if(ck!=null&&ck.$==1)return cg.push(ck.$0);else if(ck!=null&&ck.$==2){cl=ck.$1;cm=ck.$0;cj(cm);ck=cl;}else return ck!=null&&ck.$==3?ck.$0(ce):ck!=null&&ck.$==4?ch.push(ck.$0):null;}else return null;}cg=[];ch=[];cj(cf);ci=cg.slice(0);return bw.New(ce,bx.Flags(cf),ci,ch.length===0?null:{$:1,$0:function(ck){Y.iter(function(cl){cl(ck);},ch);}});};bx.Updates=function(ce){return bI.MapTreeReduce(function(cf){return cf.NChanged();},_6.Const(),_6.Map2Unit,ce.DynNodes);};bx.Empty=function(ce){return bw.New(ce,0,[],null);};bx.Flags=function(ce){return ce!==null&&ce.hasOwnProperty("flags")?ce.flags:0;};bx.Static=function(ce){return new bC({$:3,$0:ce});};bx.Dynamic=function(ce,cf){return new bC({$:1,$0:new bV.New(ce,cf)});};bx.EmptyAttr=function(){bX.$cctor();return bX.EmptyAttr;};bx.HasExitAnim=function(ce){var cf;cf=2;return(ce.DynFlags&cf)===cf;};bx.GetExitAnim=function(ce){return bx.GetAnim(ce,function(cf,cg){return cf.NGetExitAnim(cg);});};bx.HasEnterAnim=function(ce){var cf;cf=1;return(ce.DynFlags&cf)===cf;};bx.GetEnterAnim=function(ce){return bx.GetAnim(ce,function(cf,cg){return cf.NGetEnterAnim(cg);});};bx.HasChangeAnim=function(ce){var cf;cf=4;return(ce.DynFlags&cf)===cf;};bx.GetChangeAnim=function(ce){return bx.GetAnim(ce,function(cf,cg){return cf.NGetChangeAnim(cg);});};bx.AppendTree=function(ce,cf){var cg;return ce===null?cf:cf===null?ce:(cg=new bC({$:2,$0:ce,$1:cf}),(bx.SetFlags(cg,bx.Flags(ce)|bx.Flags(cf)),cg));};bx.GetAnim=function(ce,cf){return bs.Concat(n.map(function(cg){return cf(cg,ce.DynElem);},ce.DynNodes));};bx.Sync=function(ce,cf){n.iter(function(cg){cg.NSync(ce);},cf.DynNodes);};bx.SetFlags=function(ce,cf){ce.flags=cf;};by=w.Elt=cb.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},p,by);bz=w.Attribute=cb.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},p,bz);bA=w.Event=cb.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},p,bA);bB.Handler=function(ce,cf){return bx.Static(function(cg){cg.addEventListener(ce,function(ch){return(cf(cg))(ch);},false);});};bB.OnAfterRender=function(ce){return new bC({$:4,$0:ce});};bB.Dynamic=function(ce,cf){return bx.Dynamic(cf,function(cg){return function(ch){return cg.setAttribute(ce,ch);};});};bB.Value=function(ce){return bB.ValueWith(b0.StringApply(),ce);};bB.FloatValueUnchecked=function(ce){return bB.ValueWith(b0.FloatApplyUnchecked(),ce);};bB.Checked=function(ce){return bB.ValueWith(b0.BoolCheckedApply(),ce);};bB.DateTimeValue=function(ce){return bB.ValueWith(b0.DateTimeApplyUnchecked(),ce);};bB.FileValue=function(ce){return bB.ValueWith(b0.FileApplyUnchecked(),ce);};bB.ValueWith=function(ce,cf){var cg;cg=ce(cf);return bC.Append(bx.Static(cg[0]),bB.DynamicCustom(cg[1],cg[2]));};bB.DynamicCustom=function(ce,cf){return bx.Dynamic(cf,ce);};bC=g.AttrProxy=cb.Class({},null,bC);bC.Handler=function(ce,cf){return bC.HandlerImpl(ce,cf);};bC.Concat=function(ce){var cf;cf=bI.ofSeqNonCopying(ce);return bI.TreeReduce(bx.EmptyAttr(),bC.Append,cf);};bC.Create=function(ce,cf){return bx.Static(function(cg){cg.setAttribute(ce,cf);});};bC.HandlerImpl=function(ce,cf){return bx.Static(function(cg){cg.addEventListener(ce,function(ch){return(cf(cg))(ch);},false);});};bC.Append=function(ce,cf){return bx.AppendTree(ce,cf);};bD=w.AfterRender=cb.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},p,bD);bE=w.AfterRenderQ=cb.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},p,bE);bG=bF.T=cb.Class({GetEnumerator:function(){return new bc.New(this,null,function(ce){var cf;cf=ce.s;return cf.$==0?false:(ce.c=cf.$0,ce.s=cf.$1,true);},void 0);}},null,bG);bG.Empty=new bG({$:0});bH.concat=function(ce,cf){return n.ofSeq(cf).join(ce);};bH.SplitChars=function(ce,cf,cg){return bH.Split(ce,new a.RegExp("["+bH.RegexEscape(cf.join(""))+"]"),cg);};bH.StartsWith=function(ce,cf){return ce.substring(0,cf.length)==cf;};bH.Split=function(ce,cf,cg){return cg===1?n.filter(function(ch){return ch!=="";},bH.SplitWith(ce,cf)):bH.SplitWith(ce,cf);};bH.RegexEscape=function(ce){return ce.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bH.SplitWith=function(ce,cf){return ce.split(cf);};bH.forall=function(ce,cf){return Y.forall(ce,bH.protect(cf));};bH.protect=function(ce){return ce==null?"":ce;};bI.TreeReduce=function(ce,cf,cg){var ch;function ci(cj){return function(ck){var cl,cm;switch(ck<=0?0:ck===1?cj>=0&&cj<ch?1:(cl=ck,2):(cl=ck,2)){case 0:return ce;case 1:return n.get(cg,cj);case 2:cm=ck/2>>0;return cf((ci(cj))(cm),(ci(cj+cm))(ck-cm));}};}ch=n.length(cg);return(ci(0))(ch);};bI.MapTreeReduce=function(ce,cf,cg,ch){var ci;function cj(ck){return function(cl){var cm,cn;switch(cl<=0?0:cl===1?ck>=0&&ck<ci?1:(cm=cl,2):(cm=cl,2)){case 0:return cf;case 1:return ce(n.get(ch,ck));case 2:cn=cl/2>>0;return cg((cj(ck))(cn),(cj(ck+cn))(cl-cn));}};}ci=n.length(ch);return(cj(0))(ci);};bI.ofSeqNonCopying=function(ce){var cf,cg;if(ce instanceof a.Array)return ce;else if(ce instanceof bG)return n.ofList(ce);else if(ce===null)return[];else{cf=[];cg=bb.Get(ce);try{while(cg.MoveNext())cf.push(cg.Current());return cf;}finally{if(typeof cg=="object"&&"Dispose"in cg)cg.Dispose();}}};bJ=g.Updates=cb.Class({},null,bJ);bJ.Create=function(ce){var cf;cf=null;cf=bJ.New(ce,null,function(){var cg;cg=cf.s;return cg===null?(cg=v.Copy(cf.c()),cf.s=cg,v.WhenObsoleteRun(cg,function(){cf.s=null;}),cg):cg;});return cf;};bJ.New=function(ce,cf,cg){return new bJ({c:ce,s:cf,v:cg});};bK=K.ValueCollection=cb.Class({GetEnumerator:function(){return bb.Get(Y.map(function(ce){return ce.V;},this.d));}},f,bK);bK.New=cb.Ctor(function(ce){f.New.call(this);this.d=ce;},bK);bM.New=function(ce,cf){return{PreviousNodes:ce,Top:cf};};bN.get_Empty=function(){return{$:0,$0:new X.New$3()};};bN.FindAll=function(ce){var cf;function cg(cj,ck){var cl,cm,cn,co,cp;while(true)switch(cj){case 0:if(ck!=null&&ck.$==0){cm=ck.$1;cn=ck.$0;cg(0,cn);ck=cm;}else if(ck!=null&&ck.$==1){co=ck.$0;ck=co;cj=1;}else if(ck!=null&&ck.$==2){cp=ck.$0;ck=cp.Current;}else return ck!=null&&ck.$==6?(cl=ck.$0.Holes,(function(cq){return function(cr){n.iter(cq,cr);};}(ci))(cl)):null;break;case 1:cf.push(ck);ck=ck.Children;cj=0;break;}}function ch(cj){return cg(0,cj);}function ci(cj){return cg(1,cj);}cf=[];ch(ce);return{$:0,$0:new X.New$2(cf)};};bN.Filter=function(ce,cf){return{$:0,$0:bZ.Filter(ce,cf.$0)};};bN.Except=function(ce,cf){return{$:0,$0:bZ.Except(ce.$0,cf.$0)};};bN.ToArray=function(ce){return bZ.ToArray(ce.$0);};bN.Intersect=function(ce,cf){return{$:0,$0:bZ.Intersect(ce.$0,cf.$0)};};bO.UseAnimations=function(){bT.$cctor();return bT.UseAnimations;};bO.Actions=function(ce){return bO.ConcatActions(n.choose(function(cf){return cf.$==1?{$:1,$0:cf.$0}:null;},bU.ToArray(ce.$0)));};bO.Finalize=function(ce){n.iter(function(cf){if(cf.$==0)cf.$0();},bU.ToArray(ce.$0));};bO.ConcatActions=function(ce){var cf,cg,ch,ci;cf=bI.ofSeqNonCopying(ce);cg=n.length(cf);return cg===0?bO.Const():cg===1?n.get(cf,0):(ch=Y.max(Y.map(function(cj){return cj.Duration;},cf)),(ci=n.map(function(cj){return bO.Prolong(ch,cj);},cf),bO.Def(ch,function(cj){n.iter(function(ck){ck.Compute(cj);},ci);})));};bO.List=function(ce){return ce.$0;};bO.Const=function(ce){return bO.Def(0,function(){return ce;});};bO.Def=function(ce,cf){return{Compute:cf,Duration:ce};};bO.Prolong=function(ce,cf){var cg,ch,ci;cg=cf.Compute;ch=cf.Duration;ci=b6.Create(function(){return cf.Compute(cf.Duration);});return{Compute:function(cj){return cj>=ch?ci.f():cg(cj);},Duration:ce};};bP.$cctor=function(){bP.$cctor=a.ignore;bP.BatchUpdatesEnabled=true;};bQ.Enumerate=function(ce,cf){function cg(ch,ci){var cj;while(true)if(ch==null)return ci.$==1?{$:1,$0:[ci.$0[0],[ci.$0[1],ci.$1]]}:null;else if(ce){cj=ch;ch=cj.Right;ci=new bG({$:1,$0:[cj.Node,cj.Left],$1:ci});}else{cj=ch;ch=cj.Left;ci=new bG({$:1,$0:[cj.Node,cj.Right],$1:ci});}}return Y.unfold(function(ch){return cg(ch[0],ch[1]);},[cf,bG.Empty]);};bR.concat=function(ce){var cf,cg;cf=[];for(var ch in ce)cf.push.apply(cf,ce[ch]);return cf;};bS.$cctor=function(){var ce;bS.$cctor=a.ignore;bS.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bS.rtagName=new a.RegExp("<([\\w:]+)");bS.rhtml=new a.RegExp("<|&#?\\w+;");bS.wrapMap=(ce=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:ce,tbody:ce,tfoot:ce,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bS.defaultWrap=[0,"",""];};bT.$cctor=function(){bT.$cctor=a.ignore;bT.CubicInOut=bY.Custom(function(ce){var cf;cf=ce*ce;return 3*cf-2*(cf*ce);});bT.UseAnimations=true;};bU.Append=function(ce,cf){return ce.$==0?cf:cf.$==0?ce:{$:2,$0:ce,$1:cf};};bU.ToArray=function(ce){var cf;function cg(ch){var ci,cj;while(true)if(ch.$==1)return cf.push(ch.$0);else if(ch.$==2){ci=ch.$1;cj=ch.$0;cg(cj);ch=ci;}else return ch.$==3?n.iter(function(ck){cf.push(ck);},ch.$0):null;}cf=[];cg(ce);return cf.slice(0);};bU.Concat=function(ce){var cf;cf=bI.ofSeqNonCopying(ce);return bI.TreeReduce(bU.Empty(),bU.Append,cf);};bU.Empty=function(){b7.$cctor();return b7.Empty;};bV=g.DynamicAttrNode=cb.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(ce){return bs.get_Empty();},NGetEnterAnim:function(ce){return bs.get_Empty();},NGetChangeAnim:function(ce){return bs.get_Empty();},NSync:function(ce){if(this.dirty){(this.push(ce))(this.value);this.dirty=false;}}},f,bV);bV.New=cb.Ctor(function(ce,cf){var cg;cg=this;f.New.call(this);this.push=cf;this.value=void 0;this.dirty=false;this.updates=_6.Map(function(ch){cg.value=ch;cg.dirty=true;},ce);},bV);bW=b.KeyNotFoundException=cb.Class({},_9,bW);bW.New=cb.Ctor(function(){bW.New$1.call(this,"The given key was not present in the dictionary.");},bW);bW.New$1=cb.Ctor(function(ce){this.message=ce;T.setPrototypeOf(this,bW.prototype);},bW);bX.$cctor=function(){var ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr;bX.$cctor=a.ignore;bX.EmptyAttr=null;bX.BoolCheckedApply=function(cs){function ct(cu,cv){return cv!=null&&cv.$==1?void(cu.checked=cv.$0):null;}return[function(cu){cu.addEventListener("change",function(){return cs.Get()!=cu.checked?cs.Set(cu.checked):null;});},function(cu){return function(cv){return ct(cu,cv);};},_6.Map(function(cu){return{$:1,$0:cu};},cs.get_View())];};bX.StringSet=function(cs){return function(ct){cs.value=ct;};};bX.StringGet=function(cs){return{$:1,$0:cs.value};};bX.StringApply=(ce=b0.StringGet(),(cf=b0.StringSet(),function(cs){return b0.ApplyValue(ce,cf,cs);}));bX.DateTimeSetUnchecked=function(cs){return function(ct){cs.value=(new cd(ct)).toLocaleString();};};bX.DateTimeGetUnchecked=function(cs){var ct,cu,cv,cw;ct=cs.value;return b1.isBlank(ct)?{$:1,$0:-8640000000000000}:(cu=(cv=0,[(cw=b5.TryParse(ct),cw!=null&&cw.$==1&&(cv=cw.$0,true)),cv]),cu[0]?{$:1,$0:cu[1]}:null);};bX.DateTimeApplyUnchecked=(cg=b0.DateTimeGetUnchecked(),(ch=b0.DateTimeSetUnchecked(),function(cs){return b0.ApplyValue(cg,ch,cs);}));bX.FileSetUnchecked=function(){return function(){return null;};};bX.FileGetUnchecked=function(cs){var ct;ct=cs.files;return{$:1,$0:n.ofSeq(Y.delay(function(){return Y.map(function(cu){return ct.item(cu);},i.range(0,ct.length-1));}))};};bX.FileApplyUnchecked=(ci=b0.FileGetUnchecked(),(cj=b0.FileSetUnchecked(),function(cs){return b0.FileApplyValue(ci,cj,cs);}));bX.IntSetUnchecked=function(cs){return function(ct){cs.value=a.String(ct);};};bX.IntGetUnchecked=function(cs){var ct,cu;ct=cs.value;return b1.isBlank(ct)?{$:1,$0:0}:(cu=+ct,cu!==cu>>0?null:{$:1,$0:cu});};bX.IntApplyUnchecked=(ck=b0.IntGetUnchecked(),(cl=b0.IntSetUnchecked(),function(cs){return b0.ApplyValue(ck,cl,cs);}));bX.IntSetChecked=function(cs){return function(ct){var cu;cu=ct.get_Input();return cs.value!=cu?void(cs.value=cu):null;};};bX.IntGetChecked=function(cs){var ct,cu,cv;ct=cs.value;return{$:1,$0:b1.isBlank(ct)?(cs.checkValidity?cs.checkValidity():true)?new b2({$:2,$0:ct}):new b2({$:1,$0:ct}):(cu=(cv=0,[_7.TryParseInt32(ct,{get:function(){return cv;},set:function(cw){cv=cw;}}),cv]),cu[0]?new b2({$:0,$0:cu[1],$1:ct}):new b2({$:1,$0:ct}))};};bX.IntApplyChecked=(cm=b0.IntGetChecked(),(cn=b0.IntSetChecked(),function(cs){return b0.ApplyValue(cm,cn,cs);}));bX.FloatSetUnchecked=function(cs){return function(ct){cs.value=a.String(ct);};};bX.FloatGetUnchecked=function(cs){var ct,cu;ct=cs.value;return b1.isBlank(ct)?{$:1,$0:0}:(cu=+ct,a.isNaN(cu)?null:{$:1,$0:cu});};bX.FloatApplyUnchecked=(co=b0.FloatGetUnchecked(),(cp=b0.FloatSetUnchecked(),function(cs){return b0.ApplyValue(co,cp,cs);}));bX.FloatSetChecked=function(cs){return function(ct){var cu;cu=ct.get_Input();return cs.value!=cu?void(cs.value=cu):null;};};bX.FloatGetChecked=function(cs){var ct,cu;ct=cs.value;return{$:1,$0:b1.isBlank(ct)?(cs.checkValidity?cs.checkValidity():true)?new b2({$:2,$0:ct}):new b2({$:1,$0:ct}):(cu=+ct,a.isNaN(cu)?new b2({$:1,$0:ct}):new b2({$:0,$0:cu,$1:ct}))};};bX.FloatApplyChecked=(cq=b0.FloatGetChecked(),(cr=b0.FloatSetChecked(),function(cs){return b0.ApplyValue(cq,cr,cs);}));};bY=g.Easing=cb.Class({},f,bY);bY.Custom=function(ce){return new bY.New(ce);};bY.New=cb.Ctor(function(ce){f.New.call(this);this.transformTime=ce;},bY);bZ.Filter=function(ce,cf){return new X.New$2(n.filter(ce,bZ.ToArray(cf)));};bZ.Except=function(ce,cf){var cg;cg=new X.New$2(bZ.ToArray(cf));cg.ExceptWith(bZ.ToArray(ce));return cg;};bZ.ToArray=function(ce){var cf;cf=n.create(ce.Count(),void 0);ce.CopyTo(cf,0);return cf;};bZ.Intersect=function(ce,cf){var cg;cg=new X.New$2(bZ.ToArray(ce));cg.IntersectWith(bZ.ToArray(cf));return cg;};bF.head=function(ce){return ce.$==1?ce.$0:bF.listEmpty();};bF.tail=function(ce){return ce.$==1?ce.$1:bF.listEmpty();};bF.listEmpty=function(){return i.FailWith("The input list was empty.");};b0.ApplyValue=function(ce,cf,cg){var ch;function ci(cj,ck){return ck==null?null:cj(ck.$0);}ch=null;return[function(cj){function ck(){cg.UpdateMaybe(function(cl){var cm;ch=ce(cj);return ch!=null&&ch.$==1&&(!s.Equals(ch.$0,cl)&&(cm=[ch,ch.$0],true))?cm[0]:null;});}cj.addEventListener("change",ck);cj.addEventListener("input",ck);cj.addEventListener("keypress",ck);},function(cj){var ck;ck=cf(cj);return function(cl){return ci(ck,cl);};},_6.Map(function(cj){var ck;return ch!=null&&ch.$==1&&(s.Equals(ch.$0,cj)&&(ck=ch.$0,true))?null:{$:1,$0:cj};},cg.get_View())];};b0.StringSet=function(){bX.$cctor();return bX.StringSet;};b0.StringGet=function(){bX.$cctor();return bX.StringGet;};b0.DateTimeSetUnchecked=function(){bX.$cctor();return bX.DateTimeSetUnchecked;};b0.DateTimeGetUnchecked=function(){bX.$cctor();return bX.DateTimeGetUnchecked;};b0.FileApplyValue=function(ce,cf,cg){var ch;function ci(cj,ck){return ck==null?null:cj(ck.$0);}ch=null;return[function(cj){cj.addEventListener("change",function(){cg.UpdateMaybe(function(ck){var cl;ch=ce(cj);return ch!=null&&ch.$==1&&(ch.$0!==ck&&(cl=[ch,ch.$0],true))?cl[0]:null;});});},function(cj){var ck;ck=cf(cj);return function(cl){return ci(ck,cl);};},_6.Map(function(cj){var ck;return ch!=null&&ch.$==1&&(s.Equals(ch.$0,cj)&&(ck=ch.$0,true))?null:{$:1,$0:cj};},cg.get_View())];};b0.FileSetUnchecked=function(){bX.$cctor();return bX.FileSetUnchecked;};b0.FileGetUnchecked=function(){bX.$cctor();return bX.FileGetUnchecked;};b0.IntSetUnchecked=function(){bX.$cctor();return bX.IntSetUnchecked;};b0.IntGetUnchecked=function(){bX.$cctor();return bX.IntGetUnchecked;};b0.IntSetChecked=function(){bX.$cctor();return bX.IntSetChecked;};b0.IntGetChecked=function(){bX.$cctor();return bX.IntGetChecked;};b0.FloatSetUnchecked=function(){bX.$cctor();return bX.FloatSetUnchecked;};b0.FloatGetUnchecked=function(){bX.$cctor();return bX.FloatGetUnchecked;};b0.FloatSetChecked=function(){bX.$cctor();return bX.FloatSetChecked;};b0.FloatGetChecked=function(){bX.$cctor();return bX.FloatGetChecked;};b0.StringApply=function(){bX.$cctor();return bX.StringApply;};b0.FloatApplyUnchecked=function(){bX.$cctor();return bX.FloatApplyUnchecked;};b0.BoolCheckedApply=function(){bX.$cctor();return bX.BoolCheckedApply;};b0.DateTimeApplyUnchecked=function(){bX.$cctor();return bX.DateTimeApplyUnchecked;};b0.FileApplyUnchecked=function(){bX.$cctor();return bX.FileApplyUnchecked;};b1.isBlank=function(ce){return bH.forall(b4.IsWhiteSpace,ce);};b2=g.CheckedInput=cb.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,b2);b3.Children=function(ce,cf){var cg,ch,ci;if(cf!=null&&cf.$==1){ci=[];cg=cf.$0[0].nextSibling;while(cg!==cf.$0[1]){ci.push(cg);cg=cg.nextSibling;}return{$:0,$0:ci};}else return{$:0,$0:n.init(ce.childNodes.length,(ch=ce.childNodes,function(cj){return ch[cj];}))};};b3.Except=function(ce,cf){var cg;cg=ce.$0;return{$:0,$0:n.filter(function(ch){return n.forall(function(ci){return!(ch===ci);},cg);},cf.$0)};};b3.Iter=function(ce,cf){n.iter(ce,cf.$0);};b3.DocChildren=function(ce){var cf;function cg(ch){var ci,cj,ck,cl;while(true){if(ch!=null&&ch.$==2){cj=ch.$0;ch=cj.Current;}else if(ch!=null&&ch.$==1)return cf.push(ch.$0.El);else if(ch==null)return null;else if(ch!=null&&ch.$==5)return cf.push(ch.$0);else if(ch!=null&&ch.$==4)return cf.push(ch.$0.Text);else if(ch!=null&&ch.$==6){ci=ch.$0.Els;return(function(cm){return function(cn){n.iter(cm,cn);};}(function(cm){if(cm==null||cm.constructor===T)cg(cm);else cf.push(cm);}))(ci);}else{ck=ch.$1;cl=ch.$0;cg(cl);ch=ck;}}}cf=[];cg(ce.Children);return{$:0,$0:bI.ofSeqNonCopying(cf)};};b4.IsWhiteSpace=function(ce){return ce.match(new a.RegExp("\\s"))!==null;};b5.TryParse=function(ce){var cf;cf=cd.parse(ce);return a.isNaN(cf)?null:{$:1,$0:cf};};_7.TryParse=function(ce,cf,cg,ch){var ci,cj;ci=+ce;cj=ci===ci-ci%1&&ci>=cf&&ci<=cg;if(cj)ch.set(ci);return cj;};b6.Create=function(ce){return b_.New(false,ce,b6.forceLazy);};b6.forceLazy=function(){var ce;ce=this.v();this.c=true;this.v=ce;this.f=b6.cachedLazy;return ce;};b6.cachedLazy=function(){return this.v;};b7.$cctor=function(){b7.$cctor=a.ignore;b7.Empty={$:0};};b8.Clear=function(ce){ce.splice(0,n.length(ce));};b_.New=function(ce,cf,cg){return{c:ce,v:cf,f:cg};};cb.OnLoad(function(){e.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
